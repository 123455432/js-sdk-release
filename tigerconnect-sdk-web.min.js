var TigerConnect=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t._babelPolyfill||n(1);var r="web";n(286)("./"+r);var o=n(321);e.Client=o}).call(e,function(){return this}())},function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||r(t,e,{writable:!0,configurable:!0,value:n})}var r=n(2)["default"];if(n(5),n(281),n(283),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0,e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){t.exports={"default":n(3),__esModule:!0}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){return r.setDesc(t,e,n)}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){n(6),n(53),n(54),n(55),n(56),n(58),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(71),n(73),n(75),n(77),n(80),n(81),n(82),n(86),n(88),n(90),n(94),n(95),n(96),n(97),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(107),n(108),n(109),n(111),n(112),n(113),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(133),n(134),n(138),n(139),n(140),n(141),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(165),n(166),n(168),n(169),n(170),n(173),n(174),n(175),n(176),n(177),n(179),n(180),n(181),n(182),n(185),n(187),n(188),n(189),n(191),n(193),n(195),n(196),n(197),n(199),n(200),n(201),n(202),n(208),n(211),n(212),n(214),n(215),n(218),n(219),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(242),n(243),n(244),n(245),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(255),n(256),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(279),n(280),t.exports=n(8)},function(t,e,n){"use strict";var r=n(7),o=n(8),i=n(9),a=n(10),u=n(12),s=n(21),c=n(25).KEY,f=n(11),l=n(26),d=n(27),h=n(22),p=n(28),v=n(29),y=n(42),g=n(45),m=n(15),b=n(32),_=n(19),w=n(20),E=n(46),x=n(49),A=n(51),O=n(14),j=A.f,k=O.f,I=x.f,T=r.Symbol,S=r.JSON,M=S&&S.stringify,C=!1,P=p("_hidden"),B={}.propertyIsEnumerable,R=l("symbol-registry"),D=l("symbols"),F=Object.prototype,G="function"==typeof T,z=r.QObject,L=a&&f(function(){return 7!=E(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=j(F,e);r&&delete F[e],k(t,e,n),r&&t!==F&&k(F,e,r)}:k,V=function(t){var e=D[t]=E(T.prototype);return e._k=t,a&&C&&L(F,t,{configurable:!0,set:function(e){i(this,P)&&i(this[P],t)&&(this[P][t]=!1),L(this,t,w(1,e))}}),e},N=function(t){return"symbol"==typeof t},U=function(t,e,n){return m(t),e=_(e,!0),m(n),i(D,e)?(n.enumerable?(i(t,P)&&t[P][e]&&(t[P][e]=!1),n=E(n,{enumerable:w(0,!1)})):(i(t,P)||k(t,P,w(1,{})),t[P][e]=!0),L(t,e,n)):k(t,e,n)},$=function(t,e){m(t);for(var n,r=y(e=b(e)),o=0,i=r.length;i>o;)U(t,n=r[o++],e[n]);return t},q=function(t,e){return void 0===e?E(t):$(E(t),e)},W=function(t){var e=B.call(this,t=_(t,!0));return e||!i(this,t)||!i(D,t)||i(this,P)&&this[P][t]?e:!0},K=function(t,e){var n=j(t=b(t),e=_(e,!0));return!n||!i(D,e)||i(t,P)&&t[P][e]||(n.enumerable=!0),n},H=function(t){for(var e,n=I(b(t)),r=[],o=0;n.length>o;)i(D,e=n[o++])||e==P||e==c||r.push(e);return r},Y=function(t){for(var e,n=I(b(t)),r=[],o=0;n.length>o;)i(D,e=n[o++])&&r.push(D[e]);return r},Z=function(t){if(void 0!==t&&!N(t)){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){return n&&(e=n.call(this,t,e)),N(e)?void 0:e}),r[1]=e,M.apply(S,r)}},X=f(function(){var t=T();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))});G||(T=function(){if(N(this))throw TypeError("Symbol is not a constructor");return V(h(arguments.length>0?arguments[0]:void 0))},s(T.prototype,"toString",function(){return this._k}),N=function(t){return t instanceof T},A.f=K,O.f=U,n(50).f=x.f=H,n(44).f=W,n(43).f=Y,a&&!n(52)&&s(F,"propertyIsEnumerable",W,!0)),u(u.G+u.W+u.F*!G,{Symbol:T});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Q=0;J.length>Q;){var tt=J[Q++],et=o.Symbol,nt=p(tt);tt in et||k(et,tt,{value:G?nt:V(nt)})}z&&z.prototype&&z.prototype.findChild||(C=!0),u(u.S+u.F*!G,"Symbol",{"for":function(t){return i(R,t+="")?R[t]:R[t]=T(t)},keyFor:function(t){return v(R,t)},useSetter:function(){C=!0},useSimple:function(){C=!1}}),u(u.S+u.F*!G,"Object",{create:q,defineProperty:U,defineProperties:$,getOwnPropertyDescriptor:K,getOwnPropertyNames:H,getOwnPropertySymbols:Y}),S&&u(u.S+u.F*(!G||X),"JSON",{stringify:Z}),d(T,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.1.5"};"number"==typeof __e&&(__e=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(7),o=n(8),i=n(13),a=n(21),u=n(23),s="prototype",c=function(t,e,n){var f,l,d,h,p=t&c.F,v=t&c.G,y=t&c.S,g=t&c.P,m=t&c.B,b=v?r:y?r[e]||(r[e]={}):(r[e]||{})[s],_=v?o:o[e]||(o[e]={}),w=_[s]||(_[s]={});v&&(n=e);for(f in n)l=!p&&b&&void 0!==b[f],d=(l?b:n)[f],h=m&&l?u(d,r):g&&"function"==typeof d?u(Function.call,d):d,b&&a(b,f,d,t&c.U),_[f]!=d&&i(_,f,h),g&&w[f]!=d&&(w[f]=d)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(14),o=n(20);t.exports=n(10)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(15),o=n(17),i=n(19),a=Object.defineProperty;e.f=n(10)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(16);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(10)&&!n(11)(function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(16),o=n(7).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(16);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(7),o=n(13),i=n(9),a=n(22)("src"),u="toString",s=Function[u],c=(""+s).split(u);n(8).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,u){var s="function"==typeof n;s&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(s&&(i(n,a)||o(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(24);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(22)("meta"),o=n(16),i=n(9),a=n(14).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(11)(function(){return s(Object.preventExtensions({}))}),f=function(t){a(t,r,{value:{i:"O"+ ++u,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!i(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},h=function(t){return c&&p.NEED&&s(t)&&!i(t,r)&&f(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:d,onFreeze:h}},function(t,e,n){var r=n(7),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(14).f,o=n(9),i=n(28)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(26)("wks"),o=n(22),i=n(7).Symbol,a="function"==typeof i;t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}},function(t,e,n){var r=n(30),o=n(32);t.exports=function(t,e){for(var n,i=o(t),a=r(i),u=a.length,s=0;u>s;)if(i[n=a[s++]]===e)return n}},function(t,e,n){var r=n(31),o=n(41);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(9),o=n(32),i=n(36)(!1),a=n(40)("IE_PROTO");t.exports=function(t,e){var n,u=o(t),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var r=n(33),o=n(35);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(32),o=n(37),i=n(39);t.exports=function(t){return function(e,n,a){var u,s=r(e),c=o(s.length),f=i(a,c);if(t&&n!=n){for(;c>f;)if(u=s[f++],u!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f;return!t&&-1}}},function(t,e,n){var r=n(38),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(38),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),0>t?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(26)("keys"),o=n(22);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(30),o=n(43),i=n(44);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var a,u=n(t),s=i.f,c=0;u.length>c;)s.call(t,a=u[c++])&&e.push(a);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(34);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(15),o=n(47),i=n(41),a=n(40)("IE_PROTO"),u=function(){},s="prototype",c=function(){var t,e=n(18)("iframe"),r=i.length,o=">";for(e.style.display="none",n(48).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+o),t.close(),c=t.F;r--;)delete c[s][i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[s]=r(t),n=new u,u[s]=null,n[a]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(14),o=n(15),i=n(30);t.exports=n(10)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),u=a.length,s=0;u>s;)r.f(t,n=a[s++],e[n]);return t}},function(t,e,n){t.exports=n(7).document&&document.documentElement},function(t,e,n){var r=n(32),o=n(50).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return o.f(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?u(t):o(r(t))}},function(t,e,n){var r=n(31),o=n(41).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(44),o=n(20),i=n(32),a=n(19),u=n(9),s=n(17),c=Object.getOwnPropertyDescriptor;e.f=n(10)?c:function(t,e){if(t=i(t),e=a(e,!0),s)try{return c(t,e)}catch(n){}return u(t,e)?o(!r.f.call(t,e),t[e]):void 0}},function(t,e){t.exports=!1},function(t,e,n){var r=n(12);r(r.S,"Object",{create:n(46)})},function(t,e,n){var r=n(12);r(r.S+r.F*!n(10),"Object",{defineProperty:n(14).f})},function(t,e,n){var r=n(12);r(r.S+r.F*!n(10),"Object",{defineProperties:n(47)})},function(t,e,n){var r=n(32),o=n(51).f;n(57)("getOwnPropertyDescriptor",function(){return function(t,e){return o(r(t),e)}})},function(t,e,n){var r=n(12),o=n(8),i=n(11);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(59),o=n(60);n(57)("getPrototypeOf",function(){return function(t){return o(r(t))}})},function(t,e,n){var r=n(35);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(9),o=n(59),i=n(40)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(59),o=n(30);n(57)("keys",function(){return function(t){return o(r(t))}})},function(t,e,n){n(57)("getOwnPropertyNames",function(){return n(49).f})},function(t,e,n){var r=n(16),o=n(25).onFreeze;n(57)("freeze",function(t){return function(e){return t&&r(e)?t(o(e)):e}})},function(t,e,n){var r=n(16),o=n(25).onFreeze;n(57)("seal",function(t){return function(e){return t&&r(e)?t(o(e)):e}})},function(t,e,n){var r=n(16),o=n(25).onFreeze;n(57)("preventExtensions",function(t){return function(e){return t&&r(e)?t(o(e)):e}})},function(t,e,n){var r=n(16);n(57)("isFrozen",function(t){return function(e){return r(e)?t?t(e):!1:!0}})},function(t,e,n){var r=n(16);n(57)("isSealed",function(t){return function(e){return r(e)?t?t(e):!1:!0}})},function(t,e,n){var r=n(16);n(57)("isExtensible",function(t){return function(e){return r(e)?t?t(e):!0:!1}})},function(t,e,n){var r=n(12);r(r.S+r.F,"Object",{assign:n(70)})},function(t,e,n){"use strict";var r=n(30),o=n(43),i=n(44),a=n(59),u=n(33),s=Object.assign;t.exports=!s||n(11)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=a(t),s=arguments.length,c=1,f=o.f,l=i.f;s>c;)for(var d,h=u(arguments[c++]),p=f?r(h).concat(f(h)):r(h),v=p.length,y=0;v>y;)l.call(h,d=p[y++])&&(n[d]=h[d]);return n}:s},function(t,e,n){var r=n(12);r(r.S,"Object",{is:n(72)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(12);r(r.S,"Object",{setPrototypeOf:n(74).set})},function(t,e,n){var r=n(16),o=n(15),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(23)(Function.call,n(51).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){"use strict";var r=n(76),o={};o[n(28)("toStringTag")]="z",o+""!="[object z]"&&n(21)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(34),o=n(28)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:i?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e,n){var r=n(12);r(r.P,"Function",{bind:n(78)})},function(t,e,n){"use strict";var r=n(24),o=n(16),i=n(79),a=[].slice,u={},s=function(t,e,n){if(!(e in u)){for(var r=[],o=0;e>o;o++)r[o]="a["+o+"]";u[e]=Function("F,a","return new F("+r.join(",")+")")}return u[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),u=function(){var r=n.concat(a.call(arguments));return this instanceof u?s(e,r.length,r):i(e,r,t)};return o(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(14).f,o=n(20),i=n(9),a=Function.prototype,u=/^\s*function ([^ (]*)/,s="name";s in a||n(10)&&r(a,s,{configurable:!0,get:function(){var t=(""+this).match(u),e=t?t[1]:"";return i(this,s)||r(this,s,o(5,e)),e}})},function(t,e,n){"use strict";var r=n(16),o=n(60),i=n(28)("hasInstance"),a=Function.prototype;i in a||n(14).f(a,i,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(12),o=n(83);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(t,e,n){var r=n(7).parseInt,o=n(84).trim,i=n(85),a=/^[\-+]?0[xX]/;t.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(t,e){var n=o(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(12),o=n(35),i=n(11),a=n(85),u="["+a+"]",s="​",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$"),l=function(t,e,n){var o={},u=i(function(){return!!a[t]()||s[t]()!=s}),c=o[t]=u?e(d):a[t];n&&(o[n]=c),r(r.P+r.F*u,"String",o)},d=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(f,"")),t};t.exports=l},function(t,e){t.exports="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var r=n(12),o=n(87);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(t,e,n){var r=n(7).parseFloat,o=n(84).trim;t.exports=1/r(n(85)+"-0")!==-(1/0)?function(t){var e=o(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){"use strict";var r=n(7),o=n(9),i=n(34),a=n(89),u=n(19),s=n(11),c=n(50).f,f=n(51).f,l=n(14).f,d=n(84).trim,h="Number",p=r[h],v=p,y=p.prototype,g=i(n(46)(y))==h,m="trim"in String.prototype,b=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():d(e,3);var n,r,o,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,s=e.slice(2),c=0,f=s.length;f>c;c++)if(a=s.charCodeAt(c),48>a||a>o)return NaN;return parseInt(s,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(g?s(function(){y.valueOf.call(n)}):i(n)!=h)?a(new v(b(e)),n,p):b(e)};for(var _,w=n(10)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)o(v,_=w[E])&&!o(p,_)&&l(p,_,f(v,_));p.prototype=y,y.constructor=p,n(21)(r,h,p)}},function(t,e,n){var r=n(16),o=n(74).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){"use strict";var r=n(12),o=(n(91),n(38)),i=n(92),a=n(93),u=1..toFixed,s=Math.floor,c=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",l="0",d=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=s(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=s(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call(l,7-n.length)+n}return e},v=function(t,e,n){return 0===e?n:e%2===1?v(t,e-1,n*t):v(t*t,e/2,n)},y=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};r(r.P+r.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!n(11)(function(){u.call({})})),"Number",{toFixed:function(t){var e,n,r,u,s=i(this,f),c=o(t),g="",m=l;if(0>c||c>20)throw RangeError(f);if(s!=s)return"NaN";if(-1e21>=s||s>=1e21)return String(s);if(0>s&&(g="-",s=-s),s>1e-21)if(e=y(s*v(2,69,1))-69,n=0>e?s*v(2,-e,1):s/v(2,e,1),n*=4503599627370496,e=52-e,e>0){for(d(0,n),r=c;r>=7;)d(1e7,0),r-=7;for(d(v(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),d(1,1),h(2),m=p()}else d(0,n),d(1<<-e,0),m=p()+a.call(l,c);return c>0?(u=m.length,m=g+(c>=u?"0."+a.call(l,c-u)+m:m.slice(0,u-c)+"."+m.slice(u-c))):m=g+m,m}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(34);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var r=n(38),o=n(35);t.exports=function(t){var e=String(o(this)),n="",i=r(t);if(0>i||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(12),o=n(11),i=n(92),a=1..toPrecision;r(r.P+r.F*(o(function(){return"1"!==a.call(1,void 0)})||!o(function(){a.call({})})),"Number",{toPrecision:function(t){var e=i(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(12);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(12),o=n(7).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){var r=n(12);r(r.S,"Number",{isInteger:n(98)})},function(t,e,n){var r=n(16),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var r=n(12);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(12),o=n(98),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return o(t)&&i(t)<=9007199254740991}})},function(t,e,n){var r=n(12);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(12);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(12),o=n(87);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,n){var r=n(12),o=n(83);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,n){var r=n(12),o=n(106),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+i(t-1)*i(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&1e-8>t?t-t*t/2:Math.log(1+t)}},function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?0>t?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var o=n(12);o(o.S,"Math",{asinh:r})},function(t,e,n){var r=n(12);r(r.S,"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(12),o=n(110);r(r.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:0>t?-1:1}},function(t,e,n){var r=n(12);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(12),o=Math.exp;r(r.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,n){var r=n(12);r(r.S,"Math",{expm1:n(114)})},function(t,e){t.exports=Math.expm1||function(t){return 0==(t=+t)?t:t>-1e-6&&1e-6>t?t+t*t/2:Math.exp(t)-1}},function(t,e,n){var r=n(12),o=n(110),i=Math.pow,a=i(2,-52),u=i(2,-23),s=i(2,127)*(2-u),c=i(2,-126),f=function(t){return t+1/a-1/a};r(r.S,"Math",{fround:function(t){var e,n,r=Math.abs(t),i=o(t);return c>r?i*f(r/c/u)*c*u:(e=(1+u/a)*r,n=e-(e-r),n>s||n!=n?i*(1/0):i*n)}})},function(t,e,n){var r=n(12),o=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,i=0,a=0,u=arguments.length,s=0;u>a;)n=o(arguments[a++]),n>s?(r=s/n,i=i*r*r+1,s=n):n>0?(r=n/s,i+=r*r):i+=n;return s===1/0?1/0:s*Math.sqrt(i)}})},function(t,e,n){var r=n(12),o=Math.imul;r(r.S+r.F*n(11)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var n=65535,r=+t,o=+e,i=n&r,a=n&o;return 0|i*a+((n&r>>>16)*a+i*(n&o>>>16)<<16>>>0)}})},function(t,e,n){var r=n(12);r(r.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var r=n(12);r(r.S,"Math",{log1p:n(106)})},function(t,e,n){var r=n(12);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(12);r(r.S,"Math",{sign:n(110)})},function(t,e,n){var r=n(12),o=n(114),i=Math.exp;r(r.S+r.F*n(11)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(12),o=n(114),i=Math.exp;r(r.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(i(t)+i(-t))}})},function(t,e,n){var r=n(12);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(12),o=n(39),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(65536>e?i(e):i(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(12),o=n(32),i=n(37);r(r.S,"String",{raw:function(t){for(var e=o(t.raw),n=i(e.length),r=arguments.length,a=[],u=0;n>u;)a.push(String(e[u++])),r>u&&a.push(String(arguments[u]));return a.join("")}})},function(t,e,n){"use strict";n(84)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(129)(!0);n(130)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(38),o=n(35);t.exports=function(t){return function(e,n){var i,a,u=String(o(e)),s=r(n),c=u.length;return 0>s||s>=c?t?"":void 0:(i=u.charCodeAt(s),55296>i||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):i:t?u.slice(s,s+2):(i-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(52),o=n(12),i=n(21),a=n(13),u=n(9),s=n(131),c=n(132),f=n(27),l=n(60),d=n(28)("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",y="values",g=function(){return this};t.exports=function(t,e,n,m,b,_,w){c(n,e,m);var E,x,A,O=function(t){if(!h&&t in T)return T[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},j=e+" Iterator",k=b==y,I=!1,T=t.prototype,S=T[d]||T[p]||b&&T[b],M=S||O(b),C=b?k?O("entries"):M:void 0,P="Array"==e?T.entries||S:S;if(P&&(A=l(P.call(new t)),A!==Object.prototype&&(f(A,j,!0),r||u(A,d)||a(A,d,g))),k&&S&&S.name!==y&&(I=!0,M=function(){return S.call(this)}),r&&!w||!h&&!I&&T[d]||a(T,d,M),s[e]=M,s[j]=g,b)if(E={values:k?M:O(y),keys:_?M:O(v),entries:C},w)for(x in E)x in T||i(T,x,E[x]);else o(o.P+o.F*(h||I),e,E);return E}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(46),o=n(20),i=n(27),a={};n(13)(a,n(28)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(12),o=n(129)(!1);r(r.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(12),o=n(37),i=n(135),a="endsWith",u=""[a];r(r.P+r.F*n(137)(a),"String",{endsWith:function(t){var e=i(this,t,a),n=arguments.length>1?arguments[1]:void 0,r=o(e.length),s=void 0===n?r:Math.min(o(n),r),c=String(t);return u?u.call(e,c,s):e.slice(s-c.length,s)===c}})},function(t,e,n){var r=n(136),o=n(35);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){var r=n(16),o=n(34),i=n(28)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(28)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(o){}}return!0}},function(t,e,n){"use strict";var r=n(12),o=n(135),i="includes";r(r.P+r.F*n(137)(i),"String",{includes:function(t){return!!~o(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(12);r(r.P,"String",{repeat:n(93)})},function(t,e,n){"use strict";var r=n(12),o=n(37),i=n(135),a="startsWith",u=""[a];r(r.P+r.F*n(137)(a),"String",{startsWith:function(t){var e=i(this,t,a),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return u?u.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(142)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){var r=n(12),o=n(11),i=n(35),a=/"/g,u=function(t,e,n,r){var o=String(i(t)),u="<"+e;return""!==n&&(u+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),u+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(u),r(r.P+r.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";n(142)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(142)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(142)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(142)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(142)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(142)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(142)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(142)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(142)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(142)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(142)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(142)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(12);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){var r=Date.prototype,o="Invalid Date",i="toString",a=r[i],u=r.getTime;new Date(NaN)+""!=o&&n(21)(r,i,function(){var t=u.call(this);return t===t?a.call(this):o})},function(t,e,n){"use strict";var r=n(12),o=n(11),i=Date.prototype.getTime,a=function(t){return t>9?t:"0"+t};r(r.P+r.F*(o(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!o(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=0>e?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z";
}})},function(t,e,n){"use strict";var r=n(12),o=n(59),i=n(19);r(r.P+r.F*n(11)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=o(this),n=i(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(12);r(r.S,"Array",{isArray:n(45)})},function(t,e,n){"use strict";var r=n(23),o=n(12),i=n(59),a=n(161),u=n(162),s=n(37),c=n(163);o(o.S+o.F*!n(164)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,l=i(t),d="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,v=void 0!==p,y=0,g=c(l);if(v&&(p=r(p,h>2?arguments[2]:void 0,2)),void 0==g||d==Array&&u(g))for(e=s(l.length),n=new d(e);e>y;y++)n[y]=v?p(l[y],y):l[y];else for(f=g.call(l),n=new d;!(o=f.next()).done;y++)n[y]=v?a(f,p,[o.value,y],!0):o.value;return n.length=y,n}})},function(t,e,n){var r=n(15);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){var a=t["return"];throw void 0!==a&&r(a.call(t)),i}}},function(t,e,n){var r=n(131),o=n(28)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(76),o=n(28)("iterator"),i=n(131);t.exports=n(8).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[r(t)]:void 0}},function(t,e,n){var r=n(28)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){n=!0},i[r]=function(){return a},t(i)}catch(u){}return n}},function(t,e,n){"use strict";var r=n(12);r(r.S+r.F*n(11)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)n[t]=arguments[t++];return n.length=e,n}})},function(t,e,n){"use strict";var r=n(12),o=n(32),i=[].join;r(r.P+r.F*(n(33)!=Object||!n(167)(i)),"Array",{join:function(t){return i.call(o(this),void 0===t?",":t)}})},function(t,e,n){var r=n(11);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var r=n(12),o=n(48),i=n(34),a=n(39),u=n(37),s=[].slice;r(r.P+r.F*n(11)(function(){o&&s.call(o)}),"Array",{slice:function(t,e){var n=u(this.length),r=i(this);if(e=void 0===e?n:e,"Array"==r)return s.call(this,t,e);for(var o=a(t,n),c=a(e,n),f=u(c-o),l=Array(f),d=0;f>d;d++)l[d]="String"==r?this.charAt(o+d):this[o+d];return l}})},function(t,e,n){"use strict";var r=n(12),o=n(24),i=n(59),a=n(11),u=[].sort,s=[1,2,3];r(r.P+r.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n(167)(u)),"Array",{sort:function(t){return void 0===t?u.call(i(this)):u.call(i(this),o(t))}})},function(t,e,n){"use strict";var r=n(12),o=n(171)(0),i=n(167)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var r=n(23),o=n(33),i=n(59),a=n(37),u=n(172);t.exports=function(t,e){var n=1==t,s=2==t,c=3==t,f=4==t,l=6==t,d=5==t||l,h=e||u;return function(e,u,p){for(var v,y,g=i(e),m=o(g),b=r(u,p,3),_=a(m.length),w=0,E=n?h(e,_):s?h(e,0):void 0;_>w;w++)if((d||w in m)&&(v=m[w],y=b(v,w,g),t))if(n)E[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(f)return!1;return l?-1:c||f?f:E}}},function(t,e,n){var r=n(16),o=n(45),i=n(28)("species");t.exports=function(t,e){var n;return o(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)||(n=void 0),r(n)&&(n=n[i],null===n&&(n=void 0))),new(void 0===n?Array:n)(e)}},function(t,e,n){"use strict";var r=n(12),o=n(171)(1);r(r.P+r.F*!n(167)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),o=n(171)(2);r(r.P+r.F*!n(167)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),o=n(171)(3);r(r.P+r.F*!n(167)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),o=n(171)(4);r(r.P+r.F*!n(167)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),o=n(178);r(r.P+r.F*!n(167)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){var r=n(24),o=n(59),i=n(33),a=n(37);t.exports=function(t,e,n,u,s){r(e);var c=o(t),f=i(c),l=a(c.length),d=s?l-1:0,h=s?-1:1;if(2>n)for(;;){if(d in f){u=f[d],d+=h;break}if(d+=h,s?0>d:d>=l)throw TypeError("Reduce of empty array with no initial value")}for(;s?d>=0:l>d;d+=h)d in f&&(u=e(u,f[d],d,c));return u}},function(t,e,n){"use strict";var r=n(12),o=n(178);r(r.P+r.F*!n(167)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(12),o=n(36)(!1);r(r.P+r.F*!n(167)([].indexOf),"Array",{indexOf:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),o=n(32),i=n(38),a=n(37);r(r.P+r.F*!n(167)([].lastIndexOf),"Array",{lastIndexOf:function(t){var e=o(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),0>r&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r;return-1}})},function(t,e,n){var r=n(12);r(r.P,"Array",{copyWithin:n(183)}),n(184)("copyWithin")},function(t,e,n){"use strict";var r=n(59),o=n(39),i=n(37);t.exports=[].copyWithin||function(t,e){var n=r(this),a=i(n.length),u=o(t,a),s=o(e,a),c=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===c?a:o(c,a))-s,a-u),l=1;for(u>s&&s+f>u&&(l=-1,s+=f-1,u+=f-1);f-- >0;)s in n?n[u]=n[s]:delete n[u],u+=l,s+=l;return n}},function(t,e,n){var r=n(28)("unscopables"),o=Array.prototype;void 0==o[r]&&n(13)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e,n){var r=n(12);r(r.P,"Array",{fill:n(186)}),n(184)("fill")},function(t,e,n){"use strict";var r=n(59),o=n(39),i=n(37);t.exports=function(t){for(var e=r(this),n=i(e.length),a=arguments.length,u=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:o(s,n);c>u;)e[u++]=t;return e}},function(t,e,n){"use strict";var r=n(12),o=n(171)(5),i="find",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(184)(i)},function(t,e,n){"use strict";var r=n(12),o=n(171)(6),i="findIndex",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(184)(i)},function(t,e,n){n(190)("Array")},function(t,e,n){"use strict";var r=n(7),o=n(14),i=n(10),a=n(28)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(184),o=n(192),i=n(131),a=n(32);t.exports=n(130)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(7),o=n(89),i=n(14).f,a=n(50).f,u=n(136),s=n(194),c=r.RegExp,f=c,l=c.prototype,d=/a/g,h=/a/g,p=new c(d)!==d;if(n(10)&&(!p||n(11)(function(){return h[n(28)("match")]=!1,c(d)!=d||c(h)==h||"/a/i"!=c(d,"i")}))){c=function(t,e){var n=this instanceof c,r=u(t),i=void 0===e;return!n&&r&&t.constructor===c&&i?t:o(p?new f(r&&!i?t.source:t,e):f((r=t instanceof c)?t.source:t,r&&i?s.call(t):e),n?this:l,c)};for(var v=(function(t){t in c||i(c,t,{configurable:!0,get:function(){return f[t]},set:function(e){f[t]=e}})}),y=a(f),g=0;y.length>g;)v(y[g++]);l.constructor=c,c.prototype=l,n(21)(r,"RegExp",c)}n(190)("RegExp")},function(t,e,n){"use strict";var r=n(15);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(196);var r=n(15),o=n(194),i=n(10),a="toString",u=/./[a],s=function(t){n(21)(RegExp.prototype,a,t,!0)};n(11)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)}):u.name!=a&&s(function(){return u.call(this)})},function(t,e,n){n(10)&&"g"!=/./g.flags&&n(14).f(RegExp.prototype,"flags",{configurable:!0,get:n(194)})},function(t,e,n){n(198)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){"use strict";var r=n(13),o=n(21),i=n(11),a=n(35),u=n(28);t.exports=function(t,e,n){var s=u(t),c=n(a,s,""[t]),f=c[0],l=c[1];i(function(){var e={};return e[s]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,f),r(RegExp.prototype,s,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}))}},function(t,e,n){n(198)("replace",2,function(t,e,n){return[function(r,o){"use strict";var i=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},n]})},function(t,e,n){n(198)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(198)("split",2,function(t,e,r){"use strict";var o=n(136),i=r,a=[].push,u="split",s="length",c="lastIndex";if("c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[s]||2!="ab"[u](/(?:ab)*/)[s]||4!="."[u](/(.?)(.?)/)[s]||"."[u](/()()/)[s]>1||""[u](/.?/)[s]){var f=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!o(t))return i.call(n,t,e);var r,u,l,d,h,p=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,v+"g");for(f||(r=new RegExp("^"+m.source+"$(?!\\s)",v));(u=m.exec(n))&&(l=u.index+u[0][s],!(l>y&&(p.push(n.slice(y,u.index)),!f&&u[s]>1&&u[0].replace(r,function(){for(h=1;h<arguments[s]-2;h++)void 0===arguments[h]&&(u[h]=void 0)}),u[s]>1&&u.index<n[s]&&a.apply(p,u.slice(1)),d=u[0][s],y=l,p[s]>=g)));)m[c]===u.index&&m[c]++;return y===n[s]?!d&&m.test("")||p.push(""):p.push(n.slice(y)),p[s]>g?p.slice(0,g):p}}else"0"[u](void 0,0)[s]&&(r=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(n,o){var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i,o):r.call(String(i),n,o)},r]})},function(t,e,n){"use strict";var r,o,i,a=n(52),u=n(7),s=n(23),c=n(76),f=n(12),l=n(16),d=(n(15),n(24)),h=n(91),p=n(203),v=(n(74).set,n(204)),y=n(205).set,g=n(206),m="Promise",b=u.TypeError,_=u.process,w=u[m],_=u.process,E="process"==c(_),x=function(){},A=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[n(28)("species")]=function(t){t(x,x)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e}catch(r){}}(),O=function(t,e){return t===e||t===w&&e===i},j=function(t){var e;return l(t)&&"function"==typeof(e=t.then)?e:!1},k=function(t){return O(w,t)?new I(t):new o(t)},I=o=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw b("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)},T=function(t){try{t()}catch(e){return{error:e}}},S=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var r=t._v,o=1==t._s,i=0,a=function(e){var n,i,a=o?e.ok:e.fail,u=e.resolve,s=e.reject,c=e.domain;try{a?(o||(2==t._h&&P(t),t._h=1),a===!0?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?s(b("Promise-chain cycle")):(i=j(n))?i.call(n,u,s):u(n)):s(r)}catch(f){s(f)}};n.length>i;)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){y.call(u,function(){var e,n,r,o=t._v;if(C(t)&&(e=T(function(){E?_.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=E||C(t)?2:1),t._a=void 0,e)throw e.error})},C=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!C(e.promise))return!1;return!0},P=function(t){y.call(u,function(){var e;E?_.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),S(e,!0))},R=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw b("Promise can't be resolved itself");(e=j(t))?g(function(){var r={_w:n,_d:!1};try{e.call(t,s(R,r,1),s(B,r,1))}catch(o){B.call(r,o)}}):(n._v=t,n._s=1,S(n,!1))}catch(r){B.call({_w:n,_d:!1},r)}}};A||(w=function(t){h(this,w,m,"_h"),d(t),r.call(this);try{t(s(R,this,1),s(B,this,1))}catch(e){B.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(207)(w.prototype,{then:function(t,e){var n=k(v(this,w));return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,n.domain=E?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&S(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),I=function(){var t=new r;this.promise=t,this.resolve=s(R,t,1),this.reject=s(B,t,1)}),f(f.G+f.W+f.F*!A,{Promise:w}),n(27)(w,m),n(190)(m),i=n(8)[m],f(f.S+f.F*!A,m,{reject:function(t){var e=k(this),n=e.reject;return n(t),e.promise}}),f(f.S+f.F*(a||!A),m,{resolve:function(t){if(t instanceof w&&O(t.constructor,this))return t;var e=k(this),n=e.resolve;return n(t),e.promise}}),f(f.S+f.F*!(A&&n(164)(function(t){w.all(t)["catch"](x)})),m,{all:function(t){var e=this,n=k(e),r=n.resolve,o=n.reject,i=T(function(){var n=[],i=0,a=1;p(t,!1,function(t){var u=i++,s=!1;n.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,n[u]=t,--a||r(n))},o)}),--a||r(n)});return i&&o(i.error),n.promise},race:function(t){var e=this,n=k(e),r=n.reject,o=T(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(t,e,n){var r=n(23),o=n(161),i=n(162),a=n(15),u=n(37),s=n(163);t.exports=function(t,e,n,c,f){var l,d,h,p=f?function(){return t}:s(t),v=r(n,c,e?2:1),y=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(i(p))for(l=u(t.length);l>y;y++)e?v(a(d=t[y])[0],d[1]):v(t[y]);else for(h=p.call(t);!(d=h.next()).done;)o(h,v,d.value,e)}},function(t,e,n){var r=n(15),o=n(24),i=n(28)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r,o,i,a=n(23),u=n(79),s=n(48),c=n(18),f=n(7),l=f.process,d=f.setImmediate,h=f.clearImmediate,p=f.MessageChannel,v=0,y={},g="onreadystatechange",m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){u("function"==typeof t?t:Function(t),e)},r(v),v},h=function(t){delete y[t]},"process"==n(34)(l)?r=function(t){l.nextTick(a(m,t,1))}:p?(o=new p,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",b,!1)):r=g in c("script")?function(t){s.appendChild(c("script"))[g]=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){var r,o,i,a=n(7),u=n(205).set,s=a.MutationObserver||a.WebKitMutationObserver,c=a.process,f=a.Promise,l="process"==n(34)(c),d=function(){var t,e;for(l&&(t=c.domain)&&t.exit();r;)e=r.fn,e(),r=r.next;o=void 0,t&&t.enter()};if(l)i=function(){c.nextTick(d)};else if(s){var h=!0,p=document.createTextNode("");new s(d).observe(p,{characterData:!0}),i=function(){p.data=h=!h}}else i=f&&f.resolve?function(){f.resolve().then(d)}:function(){u.call(a,d)};t.exports=function(t){var e={fn:t,next:void 0};o&&(o.next=e),r||(r=e,i()),o=e}},function(t,e,n){var r=n(21);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){"use strict";var r=n(209);t.exports=n(210)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(14).f,o=n(46),i=(n(13),n(207)),a=n(23),u=n(91),s=n(35),c=n(203),f=n(130),l=n(192),d=n(190),h=n(10),p=n(25).fastKey,v=h?"_s":"size",y=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,f){var l=t(function(t,r){u(t,l,e,"_i"),t._i=o(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&c(r,n,t[f],t)});return i(l.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[v]=0},"delete":function(t){var e=this,n=y(e,t);if(n){var r=n.n,o=n.p;delete e._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),e._f==n&&(e._f=r),e._l==n&&(e._l=o),e[v]--}return!!n},forEach:function(t){u(this,l,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(this,t)}}),h&&r(l.prototype,"size",{get:function(){return s(this[v])}}),l},def:function(t,e,n){var r,o,i=y(t,e);return i?i.v=n:(t._l=i={i:o=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[v]++,"F"!==o&&(t._i[o]=i)),t},getEntry:y,setStrong:function(t,e,n){f(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),d(e)}}},function(t,e,n){"use strict";var r=n(7),o=n(12),i=n(21),a=n(207),u=n(25),s=n(203),c=n(91),f=n(16),l=n(11),d=n(164),h=n(27),p=n(89);t.exports=function(t,e,n,v,y,g){var m=r[t],b=m,_=y?"set":"add",w=b&&b.prototype,E={},x=function(t){var e=w[t];i(w,t,"delete"==t?function(t){return g&&!f(t)?!1:e.call(this,0===t?0:t)}:"has"==t?function(t){return g&&!f(t)?!1:e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(g||w.forEach&&!l(function(){(new b).entries().next()}))){var A=new b,O=A[_](g?{}:-0,1)!=A,j=l(function(){A.has(1)}),k=d(function(t){new b(t)}),I=!g&&l(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});k||(b=e(function(e,n){c(e,b,t);var r=p(new m,e,b);return void 0!=n&&s(n,y,r[_],r),r}),b.prototype=w,w.constructor=b),(j||I)&&(x("delete"),x("has"),y&&x("get")),(I||O)&&x(_),g&&w.clear&&delete w.clear}else b=v.getConstructor(e,t,y,_),a(b.prototype,n),u.NEED=!0;return h(b,t),E[t]=b,o(o.G+o.W+o.F*(b!=m),E),g||v.setStrong(b,t,y),b}},function(t,e,n){"use strict";var r=n(209);t.exports=n(210)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,o=n(171)(0),i=n(21),a=n(25),u=n(70),s=n(213),c=n(16),f=(n(9),a.getWeak),l=Object.isExtensible,d=s.ufstore,h={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(t){if(c(t)){var e=f(t);return e===!0?d(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return s.def(this,t,e)}},y=t.exports=n(210)("WeakMap",p,v,s,!0,!0);7!=(new y).set((Object.freeze||Object)(h),7).get(h)&&(r=s.getConstructor(p),u(r.prototype,v),a.NEED=!0,o(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];i(e,t,function(e,o){if(c(e)&&!l(e)){this._f||(this._f=new r);var i=this._f[t](e,o);return"set"==t?this:i}return n.call(this,e,o)})}))},function(t,e,n){"use strict";var r=n(207),o=n(25).getWeak,i=n(15),a=n(16),u=n(91),s=n(203),c=n(171),f=n(9),l=c(5),d=c(6),h=0,p=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},y=function(t,e){return l(t.a,function(t){return t[0]===e})};v.prototype={get:function(t){var e=y(this,t);return e?e[1]:void 0},has:function(t){return!!y(this,t)},set:function(t,e){var n=y(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,i){var c=t(function(t,r){u(t,c,e,"_i"),t._i=h++,t._l=void 0,void 0!=r&&s(r,n,t[i],t)});return r(c.prototype,{"delete":function(t){if(!a(t))return!1;var e=o(t);return e===!0?p(this)["delete"](t):e&&f(e,this._i)&&delete e[this._i]},has:function(t){if(!a(t))return!1;var e=o(t);return e===!0?p(this).has(t):e&&f(e,this._i)}}),c},def:function(t,e,n){var r=o(i(e),!0);return r===!0?p(t).set(e,n):r[t._i]=n,t},ufstore:p}},function(t,e,n){"use strict";var r=n(213);n(210)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(12),o=n(216),i=n(217),a=n(15),u=n(39),s=n(37),c=n(16),f=(n(28)("typed_array"),n(7).ArrayBuffer),l=n(204),d=i.ArrayBuffer,h=i.DataView,p=o.ABV&&f.isView,v=d.prototype.slice,y=o.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(f!==d),{ArrayBuffer:d}),r(r.S+r.F*!o.CONSTR,g,{isView:function(t){return p&&p(t)||c(t)&&y in t}}),r(r.P+r.U+r.F*n(11)(function(){return!new d(2).slice(1,void 0).byteLength}),g,{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var n=a(this).byteLength,r=u(t,n),o=u(void 0===e?n:e,n),i=new(l(this,d))(s(o-r)),c=new h(this),f=new h(i),p=0;o>r;)f.setUint8(p++,c.getUint8(r++));return i}}),n(190)(g)},function(t,e,n){for(var r,o=n(7),i=n(13),a=n(22),u=a("typed_array"),s=a("view"),c=!(!o.ArrayBuffer||!o.DataView),f=c,l=0,d=9,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d>l;)(r=o[h[l++]])?(i(r.prototype,u,!0),i(r.prototype,s,!0)):f=!1;t.exports={ABV:c,CONSTR:f,TYPED:u,VIEW:s}},function(t,e,n){"use strict";var r=n(7),o=n(10),i=n(52),a=n(216),u=n(13),s=n(207),c=n(11),f=n(91),l=n(38),d=n(37),h=n(50).f,p=n(14).f,v=n(186),y=n(27),g="ArrayBuffer",m="DataView",b="prototype",_="Wrong length!",w="Wrong index!",E=r[g],x=r[m],A=r.Math,O=(r.parseInt,r.RangeError),j=r.Infinity,k=E,I=A.abs,T=A.pow,S=(A.min,A.floor),M=A.log,C=A.LN2,P="buffer",B="byteLength",R="byteOffset",D=o?"_b":P,F=o?"_l":B,G=o?"_o":R,z=function(t,e,n){var r,o,i,a=Array(n),u=8*n-e-1,s=(1<<u)-1,c=s>>1,f=23===e?T(2,-24)-T(2,-77):0,l=0,d=0>t||0===t&&0>1/t?1:0;for(t=I(t),t!=t||t===j?(o=t!=t?1:0,r=s):(r=S(M(t)/C),t*(i=T(2,-r))<1&&(r--,i*=2),t+=r+c>=1?f/i:f*T(2,1-c),t*i>=2&&(r++,i/=2),r+c>=s?(o=0,r=s):r+c>=1?(o=(t*i-1)*T(2,e),r+=c):(o=t*T(2,c-1)*T(2,e),r=0));e>=8;a[l++]=255&o,o/=256,e-=8);for(r=r<<e|o,u+=e;u>0;a[l++]=255&r,r/=256,u-=8);return a[--l]|=128*d,a},L=function(t,e,n){var r,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;f=256*f+t[s],s--,u-=8);for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;r=256*r+t[s],s--,u-=8);if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-j:j;r+=T(2,e),f-=a}return(c?-1:1)*r*T(2,f-e)},V=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},N=function(t){return[255&t]},U=function(t){return[255&t,t>>8&255]},$=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return z(t,52,8)},W=function(t){return z(t,23,4)},K=function(t,e,n){p(t[b],e,{get:function(){return this[n]}})},H=function(t,e,n,r){var o=+n,i=l(o);if(o!=i||0>i||i+e>t[F])throw O(w);var a=t[D]._b,u=i+t[G],s=a.slice(u,u+e);return r?s:s.reverse()},Y=function(t,e,n,r,o,i){var a=+n,u=l(a);if(a!=u||0>u||u+e>t[F])throw O(w);for(var s=t[D]._b,c=u+t[G],f=r(+o),d=0;e>d;d++)s[c+d]=f[i?d:e-d-1]},Z=function(t,e){f(t,E,g);var n=+e,r=d(n);if(n!=r)throw O(_);return r};if(a.ABV){if(!c(function(){new E})||!c(function(){new E(.5)})){E=function(t){return new k(Z(this,t))};for(var X,J=E[b]=k[b],Q=h(k),tt=0;Q.length>tt;)(X=Q[tt++])in E||u(E,X,k[X]);i||(J.constructor=E)}var et=new x(new E(2)),nt=x[b].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||s(x[b],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else E=function(t){var e=Z(this,t);this._b=v.call(Array(e),0),this[F]=e},x=function(t,e,n){f(this,x,m),f(t,E,m);var r=t[F],o=l(e);if(0>o||o>r)throw O("Wrong offset!");if(n=void 0===n?r-o:d(n),o+n>r)throw O(_);this[D]=t,this[G]=o,this[F]=n},o&&(K(E,B,"_l"),K(x,P,"_b"),K(x,B,"_l"),K(x,R,"_o")),s(x[b],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return V(H(this,4,t,arguments[1]))},getUint32:function(t){return V(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return L(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return L(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Y(this,1,t,N,e)},setUint8:function(t,e){Y(this,1,t,N,e)},setInt16:function(t,e){Y(this,2,t,U,e,arguments[2])},setUint16:function(t,e){Y(this,2,t,U,e,arguments[2])},setInt32:function(t,e){Y(this,4,t,$,e,arguments[2])},setUint32:function(t,e){Y(this,4,t,$,e,arguments[2])},setFloat32:function(t,e){Y(this,4,t,W,e,arguments[2])},setFloat64:function(t,e){Y(this,8,t,q,e,arguments[2])}});y(E,g),y(x,m),u(x[b],a.VIEW,!0),e[g]=E,e[m]=x},function(t,e,n){var r=n(12);r(r.G+r.W+r.F*!n(216).ABV,{DataView:n(217).DataView})},function(t,e,n){n(220)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){"use strict";if(n(10)){var r=n(52),o=n(7),i=n(11),a=n(12),u=n(216),s=n(217),c=n(23),f=n(91),l=n(20),d=n(13),h=n(207),p=(n(98),n(38)),v=n(37),y=n(39),g=n(19),m=n(9),b=n(72),_=n(76),w=n(16),E=n(59),x=n(162),A=n(46),O=n(60),j=n(50).f,k=(n(221),n(163)),I=n(22),T=n(28),S=n(171),M=n(36),C=n(204),P=n(191),B=n(131),R=n(164),D=n(190),F=n(186),G=n(183),z=n(14),L=n(51),V=z.f,N=L.f,U=o.RangeError,$=o.TypeError,q=o.Uint8Array,W="ArrayBuffer",K="Shared"+W,H="BYTES_PER_ELEMENT",Y="prototype",Z=Array[Y],X=s.ArrayBuffer,J=s.DataView,Q=S(0),tt=S(2),et=S(3),nt=S(4),rt=S(5),ot=S(6),it=M(!0),at=M(!1),ut=P.values,st=P.keys,ct=P.entries,ft=Z.lastIndexOf,lt=Z.reduce,dt=Z.reduceRight,ht=Z.join,pt=Z.sort,vt=Z.slice,yt=Z.toString,gt=Z.toLocaleString,mt=T("iterator"),bt=T("toStringTag"),_t=I("typed_constructor"),wt=I("def_constructor"),Et=u.CONSTR,xt=u.TYPED,At=u.VIEW,Ot="Wrong length!",jt=S(1,function(t,e){return Ct(C(t,t[wt]),e)}),kt=i(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),It=!!q&&!!q[Y].set&&i(function(){new q(1).set({})}),Tt=function(t,e){if(void 0===t)throw $(Ot);var n=+t,r=v(t);if(e&&!b(n,r))throw U(Ot);return r},St=function(t,e){var n=p(t);if(0>n||n%e)throw U("Wrong offset!");return n},Mt=function(t){if(w(t)&&xt in t)return t;throw $(t+" is not a typed array!")},Ct=function(t,e){if(!(w(t)&&_t in t))throw $("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Bt(C(t,t[wt]),e)},Bt=function(t,e){for(var n=0,r=e.length,o=Ct(t,r);r>n;)o[n]=e[n++];return o},Rt=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},Dt=function(t){var e,n,r,o,i,a,u=E(t),s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,d=k(u);if(void 0!=d&&!x(d)){for(a=d.call(u),r=[],e=0;!(i=a.next()).done;e++)r.push(i.value);u=r}for(l&&s>2&&(f=c(f,arguments[2],2)),e=0,n=v(u.length),o=Ct(this,n);n>e;e++)o[e]=l?f(u[e],e):u[e];return o},Ft=function(){for(var t=0,e=arguments.length,n=Ct(this,e);e>t;)n[t]=arguments[t++];return n},Gt=!!q&&i(function(){gt.call(new q(1))}),zt=function(){return gt.apply(Gt?vt.call(Mt(this)):Mt(this),arguments)},Lt={copyWithin:function(t,e){return G.call(Mt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Mt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return F.apply(Mt(this),arguments)},filter:function(t){return Pt(this,tt(Mt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(Mt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return ot(Mt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Mt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return at(Mt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(Mt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ht.apply(Mt(this),arguments)},lastIndexOf:function(t){return ft.apply(Mt(this),arguments)},map:function(t){return jt(Mt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Mt(this),arguments)},reduceRight:function(t){return dt.apply(Mt(this),arguments)},reverse:function(){for(var t,e=this,n=Mt(e).length,r=Math.floor(n/2),o=0;r>o;)t=e[o],e[o++]=e[--n],e[n]=t;return e},slice:function(t,e){return Pt(this,vt.call(Mt(this),t,e))},some:function(t){return et(Mt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Mt(this),t)},subarray:function(t,e){var n=Mt(this),r=n.length,o=y(t,r);return new(C(n,n[wt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,v((void 0===e?r:y(e,r))-o))}},Vt=function(t){Mt(this);var e=St(arguments[1],1),n=this.length,r=E(t),o=v(r.length),i=0;if(o+e>n)throw U(Ot);for(;o>i;)this[e+i]=r[i++]},Nt={entries:function(){return ct.call(Mt(this))},keys:function(){return st.call(Mt(this))},values:function(){return ut.call(Mt(this))}},Ut=function(t,e){return w(t)&&t[xt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},$t=function(t,e){return Ut(t,e=g(e,!0))?l(2,t[e]):N(t,e)},qt=function(t,e,n){return!(Ut(t,e=g(e,!0))&&w(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};Et||(L.f=$t,z.f=qt),a(a.S+a.F*!Et,"Object",{getOwnPropertyDescriptor:$t,defineProperty:qt}),i(function(){yt.call({})})&&(yt=gt=function(){return ht.call(this)});var Wt=h({},Lt);h(Wt,Nt),d(Wt,mt,Nt.values),h(Wt,{set:Vt,constructor:function(){},toString:yt,toLocaleString:zt}),Rt(Wt,"buffer","b"),Rt(Wt,"byteOffset","o"),Rt(Wt,"byteLength","l"),Rt(Wt,"length","e"),V(Wt,bt,{get:function(){return this[xt]}}),t.exports=function(t,e,n,s){s=!!s;var c=t+(s?"Clamped":"")+"Array",l="Uint8Array"!=c,h="get"+t,p="set"+t,y=o[c],g=y||{},m=y&&O(y),b=!y||!u.ABV,E={},x=y&&y[Y],k=function(t,n){var r=t._d;return r.v[h](n*e+r.o,kt)},I=function(t,n,r){var o=t._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[p](n*e+o.o,r,kt)},T=function(t,e){V(t,e,{get:function(){return k(this,e)},set:function(t){return I(this,e,t)},enumerable:!0})};b?(y=n(function(t,n,r,o){f(t,y,c,"_d");var i,a,u,s,l=0,h=0;if(w(n)){if(!(n instanceof X||(s=_(n))==W||s==K))return xt in n?Bt(y,n):Dt.call(y,n);i=n,h=St(r,e);var p=n.byteLength;if(void 0===o){if(p%e)throw U(Ot);if(a=p-h,0>a)throw U(Ot)}else if(a=v(o)*e,a+h>p)throw U(Ot);u=a/e}else u=Tt(n,!0),a=u*e,i=new X(a);for(d(t,"_d",{b:i,o:h,l:a,e:u,v:new J(i)});u>l;)T(t,l++)}),x=y[Y]=A(Wt),d(x,"constructor",y)):R(function(t){new y(null),new y(t)},!0)||(y=n(function(t,n,r,o){f(t,y,c);var i;return w(n)?n instanceof X||(i=_(n))==W||i==K?void 0!==o?new g(n,St(r,e),o):void 0!==r?new g(n,St(r,e)):new g(n):xt in n?Bt(y,n):Dt.call(y,n):new g(Tt(n,l))}),Q(m!==Function.prototype?j(g).concat(j(m)):j(g),function(t){t in y||d(y,t,g[t])}),y[Y]=x,r||(x.constructor=y));var S=x[mt],M=!!S&&("values"==S.name||void 0==S.name),C=Nt.values;d(y,_t,!0),d(x,xt,c),d(x,At,!0),d(x,wt,y),(s?new y(1)[bt]==c:bt in x)||V(x,bt,{get:function(){return c}}),E[c]=y,a(a.G+a.W+a.F*(y!=g),E),a(a.S,c,{BYTES_PER_ELEMENT:e,from:Dt,of:Ft}),H in x||d(x,H,e),a(a.P,c,Lt),a(a.P+a.F*It,c,{set:Vt}),a(a.P+a.F*!M,c,Nt),a(a.P+a.F*(x.toString!=yt),c,{toString:yt}),a(a.P+a.F*(i(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!i(function(){x.toLocaleString.call([1,2])})),c,{toLocaleString:zt}),B[c]=M?S:C,r||M||d(x,mt,C),D(c)}}else t.exports=function(){}},function(t,e,n){var r=n(76),o=n(28)("iterator"),i=n(131);t.exports=n(8).isIterable=function(t){
var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){n(220)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(220)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(220)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(220)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(220)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(220)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(220)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(220)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(12),o=Function.apply;r(r.S,"Reflect",{apply:function(t,e,n){return o.call(t,e,n)}})},function(t,e,n){var r=n(12),o=n(46),i=n(24),a=n(15),u=n(16),s=n(78);r(r.S+r.F*n(11)(function(){function t(){}return!(Reflect.construct(function(){},[],t)instanceof t)}),"Reflect",{construct:function(t,e){i(t);var n=arguments.length<3?t:i(arguments[2]);if(t==n){if(void 0!=e)switch(a(e).length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(s.apply(t,r))}var c=n.prototype,f=o(u(c)?c:Object.prototype),l=Function.apply.call(t,f,e);return u(l)?l:f}})},function(t,e,n){var r=n(14),o=n(12),i=n(15),a=n(19);o(o.S+o.F*n(11)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){i(t),e=a(e,!0),i(n);try{return r.f(t,e,n),!0}catch(o){return!1}}})},function(t,e,n){var r=n(12),o=n(51).f,i=n(15);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=o(i(t),e);return n&&!n.configurable?!1:delete t[e]}})},function(t,e,n){"use strict";var r=n(12),o=n(15),i=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(132)(i,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new i(t)}})},function(t,e,n){function r(t,e){var n,u,f=arguments.length<3?t:arguments[2];return c(t)===f?t[e]:(n=o.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(f):void 0:s(u=i(t))?r(u,e,f):void 0}var o=n(51),i=n(60),a=n(9),u=n(12),s=n(16),c=n(15);u(u.S,"Reflect",{get:r})},function(t,e,n){var r=n(51),o=n(12),i=n(15);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(i(t),e)}})},function(t,e,n){var r=n(12),o=n(60),i=n(15);r(r.S,"Reflect",{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,n){var r=n(12);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(12),o=n(15),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return o(t),i?i(t):!0}})},function(t,e,n){var r=n(12);r(r.S,"Reflect",{ownKeys:n(241)})},function(t,e,n){var r=n(50),o=n(43),i=n(15),a=n(7).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(i(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(12),o=n(15),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){o(t);try{return i&&i(t),!0}catch(e){return!1}}})},function(t,e,n){function r(t,e,n){var s,d,h=arguments.length<4?t:arguments[3],p=i.f(f(t),e);if(!p){if(l(d=a(t)))return r(d,e,n,h);p=c(0)}return u(p,"value")?p.writable!==!1&&l(h)?(s=i.f(h,e)||c(0),s.value=n,o.f(h,e,s),!0):!1:void 0===p.set?!1:(p.set.call(h,n),!0)}var o=n(14),i=n(51),a=n(60),u=n(9),s=n(12),c=n(20),f=n(15),l=n(16);s(s.S,"Reflect",{set:r})},function(t,e,n){var r=n(12),o=n(74);o&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){"use strict";var r=n(12),o=n(36)(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(184)("includes")},function(t,e,n){"use strict";var r=n(12),o=n(129)(!0);r(r.P,"String",{at:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(12),o=n(248);r(r.P,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var r=n(37),o=n(93),i=n(35);t.exports=function(t,e,n,a){var u=String(i(t)),s=u.length,c=void 0===n?" ":String(n),f=r(e);if(s>=f)return u;""==c&&(c=" ");var l=f-s,d=o.call(c,Math.ceil(l/c.length));return d.length>l&&(d=d.slice(0,l)),a?d+u:u+d}},function(t,e,n){"use strict";var r=n(12),o=n(248);r(r.P,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(84)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(84)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){var r=n(12),o=n(241),i=n(32),a=n(20),u=n(51),s=n(14);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=i(t),c=u.f,f=o(r),l={},d=0;f.length>d;)n=c(r,e=f[d++]),e in l?s.f(l,e,a(0,n)):l[e]=n;return l}})},function(t,e,n){var r=n(12),o=n(254)(!1);r(r.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){var r=n(30),o=n(32),i=n(44).f;t.exports=function(t){return function(e){for(var n,a=o(e),u=r(a),s=u.length,c=0,f=[];s>c;)i.call(a,n=u[c++])&&f.push(t?[n,a[n]]:a[n]);return f}}},function(t,e,n){var r=n(12),o=n(254)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var r=n(12);r(r.P+r.R,"Map",{toJSON:n(257)("Map")})},function(t,e,n){var r=n(76),o=n(258);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){var r=n(203);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){var r=n(12);r(r.P+r.R,"Set",{toJSON:n(257)("Set")})},function(t,e,n){var r=n(12);r(r.S,"System",{global:n(7)})},function(t,e,n){var r=n(12),o=n(34);r(r.S,"Error",{isError:function(t){return"Error"===o(t)}})},function(t,e,n){var r=n(12);r(r.S,"Math",{iaddh:function(t,e,n,r){var o=t>>>0,i=e>>>0,a=n>>>0;return i+(r>>>0)+((o&a|(o|a)&~(o+a>>>0))>>>31)|0}})},function(t,e,n){var r=n(12);r(r.S,"Math",{isubh:function(t,e,n,r){var o=t>>>0,i=e>>>0,a=n>>>0;return i-(r>>>0)-((~o&a|~(o^a)&o-a>>>0)>>>31)|0}})},function(t,e,n){var r=n(12);r(r.S,"Math",{imulh:function(t,e){var n=65535,r=+t,o=+e,i=r&n,a=o&n,u=r>>16,s=o>>16,c=(u*a>>>0)+(i*a>>>16);return u*s+(c>>16)+((i*s>>>0)+(c&n)>>16)}})},function(t,e,n){var r=n(12);r(r.S,"Math",{umulh:function(t,e){var n=65535,r=+t,o=+e,i=r&n,a=o&n,u=r>>>16,s=o>>>16,c=(u*a>>>0)+(i*a>>>16);return u*s+(c>>>16)+((i*s>>>0)+(c&n)>>>16)}})},function(t,e,n){var r=n(267),o=n(15),i=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,o(n),i(r))}})},function(t,e,n){var r=n(208),o=n(12),i=n(26)("metadata"),a=i.store||(i.store=new(n(212))),u=function(t,e,n){var o=a.get(t);if(!o){if(!n)return;a.set(t,o=new r)}var i=o.get(e);if(!i){if(!n)return;o.set(e,i=new r)}return i},s=function(t,e,n){var r=u(e,n,!1);return void 0===r?!1:r.has(t)},c=function(t,e,n){var r=u(e,n,!1);return void 0===r?void 0:r.get(t)},f=function(t,e,n,r){u(n,r,!0).set(t,e)},l=function(t,e){var n=u(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},d=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},h=function(t){o(o.S,"Reflect",t)};t.exports={store:a,map:u,has:s,get:c,set:f,keys:l,key:d,exp:h}},function(t,e,n){var r=n(267),o=n(15),i=r.key,a=r.map,u=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:i(arguments[2]),r=a(o(e),n,!1);if(void 0===r||!r["delete"](t))return!1;if(r.size)return!0;var s=u.get(e);return s["delete"](n),!!s.size||u["delete"](e)}})},function(t,e,n){var r=n(267),o=n(15),i=n(60),a=r.has,u=r.get,s=r.key,c=function(t,e,n){var r=a(t,e,n);if(r)return u(t,e,n);var o=i(e);return null!==o?c(t,o,n):void 0};r.exp({getMetadata:function(t,e){return c(t,o(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(211),o=n(258),i=n(267),a=n(15),u=n(60),s=i.keys,c=i.key,f=function(t,e){var n=s(t,e),i=u(t);if(null===i)return n;var a=f(i,e);return a.length?n.length?o(new r(n.concat(a))):a:n};i.exp({getMetadataKeys:function(t){return f(a(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(267),o=n(15),i=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return i(t,o(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(267),o=n(15),i=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return i(o(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(267),o=n(15),i=n(60),a=r.has,u=r.key,s=function(t,e,n){var r=a(t,e,n);if(r)return!0;var o=i(e);return null!==o?s(t,o,n):!1};r.exp({hasMetadata:function(t,e){return s(t,o(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(267),o=n(15),i=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return i(t,o(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(267),o=n(15),i=n(24),a=r.key,u=r.set;r.exp({metadata:function(t,e){return function(n,r){u(t,e,(void 0!==r?o:i)(n),a(r))}}})},function(t,e,n){var r=n(7),o=n(12),i=n(79),a=n(277),u=r.navigator,s=!!u&&/MSIE .\./.test(u.userAgent),c=function(t){return s?function(e,n){return t(i(a,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};o(o.G+o.B+o.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(t,e,n){"use strict";var r=n(278),o=n(79),i=n(24);t.exports=function(){for(var t=i(this),e=arguments.length,n=Array(e),a=0,u=r._,s=!1;e>a;)(n[a]=arguments[a++])===u&&(s=!0);return function(){var r,i=this,a=arguments.length,c=0,f=0;if(!s&&!a)return o(t,n,i);if(r=n.slice(),s)for(;e>c;c++)r[c]===u&&(r[c]=arguments[f++]);for(;a>f;)r.push(arguments[f++]);return o(t,r,i)}}},function(t,e,n){t.exports=n(7)},function(t,e,n){var r=n(12),o=n(205);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){for(var r=n(191),o=n(21),i=n(7),a=n(13),u=n(131),s=n(28),c=s("iterator"),f=s("toStringTag"),l=u.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],h=0;5>h;h++){var p,v=d[h],y=i[v],g=y&&y.prototype;if(g){g[c]||a(g,c,l),g[f]||a(g,f,v),u[v]=l;for(p in r)g[p]||o(g,p,r[p],!0)}}},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var o=Object.create((e||i).prototype),a=new p(r||[]);return o._invoke=l(t,n,a),o}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function a(){}function u(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){this.arg=t}function f(t){function e(e,n){var r=t[e](n),o=r.value;return o instanceof c?Promise.resolve(o.arg).then(i,a):Promise.resolve(o).then(function(t){return r.value=t,r})}function r(t,n){function r(){return e(t,n)}return o=o?o.then(r,r):new Promise(function(t){t(r())})}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o,i=e.bind(t,"next"),a=e.bind(t,"throw");e.bind(t,"return"),this._invoke=r}function l(t,e,n){var r=E;return function(i,a){if(r===A)throw new Error("Generator is already running");if(r===O){if("throw"===i)throw a;return y()}for(;;){var u=n.delegate;if(u){if("return"===i||"throw"===i&&u.iterator[i]===g){n.delegate=null;var s=u.iterator["return"];if(s){var c=o(s,u.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(u.iterator[i],u.iterator,a);if("throw"===c.type){n.delegate=null,i="throw",a=c.arg;continue}i="next",a=g;var f=c.arg;if(!f.done)return r=x,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===i)n._sent=a,r===x?n.sent=a:n.sent=g;else if("throw"===i){if(r===E)throw r=O,a;n.dispatchException(a)&&(i="next",a=g)}else"return"===i&&n.abrupt("return",a);r=A;var c=o(t,e,n);if("normal"===c.type){r=n.done?O:x;var f={value:c.arg,done:n.done};if(c.arg!==j)return f;n.delegate&&"next"===i&&(a=g)}else"throw"===c.type&&(r=O,i="throw",a=c.arg)}}}function d(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(d,this),this.reset(!0)}function v(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function o(){for(;++n<t.length;)if(m.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=g,o.done=!0,o};return r.next=r}}return{next:y}}function y(){return{value:g,done:!0}}var g,m=Object.prototype.hasOwnProperty,b="function"==typeof Symbol&&Symbol.iterator||"@@iterator",_="object"==typeof t,w=e.regeneratorRuntime;if(w)return void(_&&(t.exports=w));w=e.regeneratorRuntime=_?t.exports:{},w.wrap=r;var E="suspendedStart",x="suspendedYield",A="executing",O="completed",j={},k=u.prototype=i.prototype;a.prototype=k.constructor=u,u.constructor=a,a.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===a||"GeneratorFunction"===(e.displayName||e.name):!1},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):t.__proto__=u,t.prototype=Object.create(k),t},w.awrap=function(t){return new c(t)},s(f.prototype),w.async=function(t,e,n,o){var i=new f(r(t,e,n,o));return w.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},s(k),k[b]=function(){return this},k.toString=function(){return"[object Generator]"},w.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},w.values=v,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),u=m.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?this.next=o.finallyLoc:this.complete(i),j},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),j}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;h(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},j}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(282))},function(t,e){function n(){c=!1,a.length?s=a.concat(s):f=-1,s.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=s.length;e;){for(a=s,s=[];++f<e;)a&&a[f].run();f=-1,e=s.length}a=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var a,u=t.exports={},s=[],c=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new o(t,e)),1!==s.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,e,n){n(284),t.exports=n(8).RegExp.escape},function(t,e,n){var r=n(12),o=n(285)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return o(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){function r(t){return n(o(t))}function o(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./node":287,"./node.js":287,"./web":288,"./web.js":288};r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=286},function(t,e,n){"use strict"},function(t,e,n){"use strict";!function(){try{var t=n(289).request().__proto__;t.setNoDelay||(t.setNoDelay=function(){}),t.abort||(t.abort=function(){this.xhr&&this.xhr.abort()})}catch(e){}}()},function(t,e,n){var r=t.exports,o=(n(290).EventEmitter,n(291)),i=n(315);r.request=function(t,e){"string"==typeof t&&(t=i.parse(t)),t||(t={}),t.host||t.port||(t.port=parseInt(window.location.port,10)),!t.host&&t.hostname&&(t.host=t.hostname),t.protocol||(t.scheme?t.protocol=t.scheme+":":t.protocol=window.location.protocol),t.host||(t.host=window.location.hostname||window.location.host),/:/.test(t.host)&&(t.port||(t.port=t.host.split(":")[1]),t.host=t.host.split(":")[0]),t.port||(t.port="https:"==t.protocol?443:80);var n=new o(new a,t);return e&&n.on("response",e),n},r.get=function(t,e){t.method="GET";var n=r.request(t,e);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{var n=new window.ActiveXObject(t[e]);return function(){if(n){var r=n;return n=null,r}return new window.ActiveXObject(t[e])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,u,s,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,s=0;o>s;s++)c[s].apply(this,u);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,a,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(u=a;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){o=u;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){var r=n(292),o=n(311),i=n(314),a=n(293),u=t.exports=function(t,e){var n=this;n.writable=!0,n.xhr=t,n.body=[],n.uri=(e.protocol||"http:")+"//"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),"undefined"==typeof e.withCredentials&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch(r){}if(e.responseType)try{t.responseType=e.responseType}catch(r){}if(t.open(e.method||"GET",n.uri,!0),t.onerror=function(t){n.emit("error",new Error("Network error"))},n._headers={},e.headers)for(var a=s(e.headers),u=0;u<a.length;u++){var c=a[u];if(n.isSafeRequestHeader(c)){var f=e.headers[c];n.setHeader(c,f)}}e.auth&&this.setHeader("Authorization","Basic "+i.btoa(e.auth));var l=new o;l.on("close",function(){n.emit("close")}),l.on("ready",function(){n.emit("response",l)}),l.on("error",function(t){n.emit("error",t)}),t.onreadystatechange=function(){t.__aborted||l.handle(t)}};a(u,r),u.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e},u.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]},u.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},u.prototype.write=function(t){this.body.push(t)},u.prototype.destroy=function(t){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},u.prototype.end=function(t){void 0!==t&&this.body.push(t);for(var e=s(this._headers),n=0;n<e.length;n++){var r=e[n],o=this._headers[r];if(c(o))for(var i=0;i<o.length;i++)this.xhr.setRequestHeader(r,o[i]);else this.xhr.setRequestHeader(r,o)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(c(this.body[0])){for(var a=[],n=0;n<this.body.length;n++)a.push.apply(a,this.body[n]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var u=0,n=0;n<this.body.length;n++)u+=this.body[n].length;for(var a=new this.body[0].constructor(u),f=0,n=0;n<this.body.length;n++)for(var d=this.body[n],i=0;i<d.length;i++)a[f++]=d[i];this.xhr.send(a)}else if(l(this.body[0]))this.xhr.send(this.body[0]);else{for(var a="",n=0;n<this.body.length;n++)a+=this.body[n].toString();this.xhr.send(a)}},u.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],u.prototype.isSafeRequestHeader=function(t){return t?-1===f(u.unsafeHeaders,t.toLowerCase()):!1};var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},f=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},l=function(t){return"undefined"!=typeof Blob&&t instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&t instanceof FormData?!0:void 0}},function(t,e,n){function r(){o.call(this)}t.exports=r;var o=n(290).EventEmitter,i=n(293);i(r,o),r.Readable=n(294),r.Writable=n(307),r.Duplex=n(308),r.Transform=n(309),r.PassThrough=n(310),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function i(){f||(f=!0,t.end())}function a(){f||(f=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(s(),0===o.listenerCount(this,"error"))throw t}function s(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",i),c.removeListener("close",a),c.removeListener("error",u),t.removeListener("error",u),c.removeListener("end",s),c.removeListener("close",s),t.removeListener("close",s)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",i),c.on("close",a));var f=!1;return c.on("error",u),t.on("error",u),c.on("end",s),c.on("close",s),t.on("close",s),t.emit("pipe",c),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){e=t.exports=n(295),e.Readable=e,e.Writable=n(303),e.Duplex=n(304),e.Transform=n(305),e.PassThrough=n(306)},function(t,e,n){(function(e){function r(t,e){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(I||(I=n(302).StringDecoder),this.decoder=new I(t.encoding),this.encoding=t.encoding)}function o(t){return this instanceof o?(this._readableState=new r(t,this),this.readable=!0,void j.call(this)):new o(t)}function i(t,e,n,r,o){var i=c(e,n);if(i)t.emit("error",i);else if(null===n||void 0===n)e.reading=!1,e.ended||f(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var u=new Error("stream.push() after EOF");t.emit("error",u)}else if(e.endEmitted&&o){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else!e.decoder||o||r||(n=e.decoder.write(n)),e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):(e.reading=!1,e.buffer.push(n)),e.needReadable&&l(t),h(t,e);else o||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function u(t){if(t>=T)t=T;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function s(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||null===t?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=u(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return A.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||n||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?l(t):_(t)}function l(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,n.sync?e.nextTick(function(){d(t)}):d(t))}function d(t){t.emit("readable")}function h(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){p(t,n)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&y(t)}}function y(t){function e(t,e,o){var i=t.write(n);!1===i&&r.awaitDrain++}var n,r=t._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=t.read());)if(1===r.pipesCount?e(r.pipes,0,null):w(r.pipes,e),t.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(O.listenerCount(t,"data")>0&&m(t))):void(r.ranOut=!0)}function g(){this._readableState.ranOut&&(this._readableState.ranOut=!1,y(this))}function m(t,n){var r=t._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var o=n||!1,i=!1;t.readable=!0,t.pipe=j.prototype.pipe,t.on=t.addListener=j.prototype.on,t.on("readable",function(){i=!0;for(var e;!o&&null!==(e=t.read());)t.emit("data",e);null===e&&(i=!1,t._readableState.needReadable=!0)}),t.pause=function(){o=!0,this.emit("pause")},t.resume=function(){o=!1,i?e.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function b(t,e){var n,r=e.buffer,o=e.length,i=!!e.decoder,a=!!e.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(a)n=r.shift();else if(!t||t>=o)n=i?r.join(""):A.concat(r,o),r.length=0;else if(t<r[0].length){var u=r[0];n=u.slice(0,t),r[0]=u.slice(t)}else if(t===r[0].length)n=r.shift();else{n=i?"":new A(t);for(var s=0,c=0,f=r.length;f>c&&t>s;c++){var u=r[0],l=Math.min(t-s,u.length);i?n+=u.slice(0,l):u.copy(n,s,0,l),l<u.length?r[0]=u.slice(l):r.shift(),s+=l}
}return n}function _(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");!n.endEmitted&&n.calledRead&&(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}function E(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}t.exports=o;var x=n(296),A=n(297).Buffer;o.ReadableState=r;var O=n(290).EventEmitter;O.listenerCount||(O.listenerCount=function(t,e){return t.listeners(e).length});var j=n(292),k=n(301);k.inherits=n(293);var I;k.inherits(o,j),o.prototype.push=function(t,e){var n=this._readableState;return"string"!=typeof t||n.objectMode||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new A(t,e),e="")),i(this,n,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return i(this,e,t,"",!0)},o.prototype.setEncoding=function(t){I||(I=n(302).StringDecoder),this._readableState.decoder=new I(t),this._readableState.encoding=t};var T=8388608;o.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return l(this),null;if(t=s(t,e),0===t&&e.ended)return 0===e.length&&_(this),null;var r=e.needReadable;e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=s(n,e));var o;return o=t>0?b(t,e):null,null===o&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&_(this),o},o.prototype._read=function(t){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(t,n){function r(t){t===f&&i()}function o(){t.end()}function i(){t.removeListener("close",u),t.removeListener("finish",s),t.removeListener("drain",p),t.removeListener("error",a),t.removeListener("unpipe",r),f.removeListener("end",o),f.removeListener("end",i),t._writableState&&!t._writableState.needDrain||p()}function a(e){c(),t.removeListener("error",a),0===O.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",s),c()}function s(){t.removeListener("close",u),c()}function c(){f.unpipe(t)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=t;break;case 1:l.pipes=[l.pipes,t];break;default:l.pipes.push(t)}l.pipesCount+=1;var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,h=d?o:i;l.endEmitted?e.nextTick(h):f.once("end",h),t.on("unpipe",r);var p=v(f);return t.on("drain",p),t._events&&t._events.error?x(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",s),t.emit("pipe",f),l.flowing||(this.on("readable",g),l.flowing=!0,e.nextTick(function(){y(f)})),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",g),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",g),e.flowing=!1;for(var o=0;r>o;o++)n[o].emit("unpipe",this);return this}var o=E(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var n=j.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&l(this,r):this.read(0))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},o.prototype.pause=function(){m(this,!0),this.emit("pause")},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(o){if(e.decoder&&(o=e.decoder.write(o)),o&&(e.objectMode||o.length)){var i=r.push(o);i||(n=!0,t.pause())}});for(var o in t)"function"==typeof t[o]&&"undefined"==typeof this[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return w(i,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){n&&(n=!1,t.resume())},r},o._fromList=b}).call(e,n(282))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t,r){"use strict";function o(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function i(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(t.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?a(this,e):"string"==typeof e?u(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function a(e,n){if(e=v(e,0>n?0:0|y(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)e[r]=0;return e}function u(t,e,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|m(e,n);return t=v(t,r),t.write(e,n),t}function s(e,n){if(t.isBuffer(n))return c(e,n);if(Z(n))return f(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return l(e,n);if(n instanceof ArrayBuffer)return d(e,n)}return n.length?h(e,n):p(e,n)}function c(t,e){var n=0|y(e.length);return t=v(t,n),e.copy(t,0,0,n),t}function f(t,e){var n=0|y(e.length);t=v(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function l(t,e){var n=0|y(e.length);t=v(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function d(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=l(e,new Uint8Array(n)),e}function h(t,e){var n=0|y(e.length);t=v(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function p(t,e){var n,r=0;"Buffer"===e.type&&Z(e.data)&&(n=e.data,r=0|y(n.length)),t=v(t,r);for(var o=0;r>o;o+=1)t[o]=255&n[o];return t}function v(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var r=0!==n&&n<=t.poolSize>>>1;return r&&(e.parent=X),e}function y(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function g(e,n){if(!(this instanceof g))return new g(e,n);var r=new t(e,n);return delete r.parent,r}function m(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function b(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return T(this,e,n);case"binary":return S(this,e,n);case"base64":return j(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;r>a;a++){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[n+a]=u}return a}function w(t,e,n,r){return K(U(e,t.length-n),t,n,r)}function E(t,e,n,r){return K($(e),t,n,r)}function x(t,e,n,r){return E(t,e,n,r)}function A(t,e,n,r){return K(W(e),t,n,r)}function O(t,e,n,r){return K(q(e,t.length-n),t,n,r)}function j(t,e,n){return 0===e&&n===t.length?H.fromByteArray(t):H.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;n>o;){var i=t[o],a=null,u=i>239?4:i>223?3:i>191?2:1;if(n>=o+u){var s,c,f,l;switch(u){case 1:128>i&&(a=i);break;case 2:s=t[o+1],128===(192&s)&&(l=(31&i)<<6|63&s,l>127&&(a=l));break;case 3:s=t[o+1],c=t[o+2],128===(192&s)&&128===(192&c)&&(l=(15&i)<<12|(63&s)<<6|63&c,l>2047&&(55296>l||l>57343)&&(a=l));break;case 4:s=t[o+1],c=t[o+2],f=t[o+3],128===(192&s)&&128===(192&c)&&128===(192&f)&&(l=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&f,l>65535&&1114112>l&&(a=l))}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=u}return I(r)}function I(t){var e=t.length;if(J>=e)return String.fromCharCode.apply(String,t);for(var n="",r=0;e>r;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(127&t[o]);return r}function S(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(t[o]);return r}function M(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=e;n>i;i++)o+=N(t[i]);return o}function C(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,n,r,o,i,a){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>i||a>n)throw new RangeError("value is out of bounds");if(r+o>e.length)throw new RangeError("index out of range")}function R(t,e,n,r){0>e&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);i>o;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(t,e,n,r){0>e&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);i>o;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function F(t,e,n,r,o,i){if(e>o||i>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function G(t,e,n,r,o){return o||F(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(t,e,n,r,23,4),n+4}function z(t,e,n,r,o){return o||F(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(t,e,n,r,52,8),n+8}function L(t){if(t=V(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t){return 16>t?"0"+t.toString(16):t.toString(16)}function U(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],a=0;r>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,128>n){if((e-=1)<0)break;i.push(n)}else if(2048>n){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function $(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function q(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function W(t){return H.toByteArray(L(t))}function K(t,e,n,r){for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}var H=n(298),Y=n(299),Z=n(300);e.Buffer=t,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var X={};t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),t.TYPED_ARRAY_SUPPORT?(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array):(t.prototype.length=void 0,t.prototype.parent=void 0),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,i=0,a=Math.min(r,o);a>i&&e[i]===n[i];)++i;return i!==a&&(r=e[i],o=n[i]),o>r?-1:r>o?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Z(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var o=new t(n),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(o,i),i+=a.length}return o},t.byteLength=m,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function r(t,e,n){for(var r=-1,o=0;n+o<t.length;o++)if(t[n+o]===e[-1===r?0:o-r]){if(-1===r&&(r=o),o-r+1===e.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return r(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):r(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var o=r;r=e,e=0|n,n=o}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return E(this,t,e,n);case"binary":return x(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),e>n&&(n=e);var o;if(t.TYPED_ARRAY_SUPPORT)o=t._augment(this.subarray(e,n));else{var i=n-e;o=new t(i,void 0);for(var a=0;i>a;a++)o[a]=this[a+e]}return o.length&&(o.parent=this.parent||this),o},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},t.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},t.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),Y.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),Y.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),Y.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),Y.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||B(this,t,e,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||B(this,t,e,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):R(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):R(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):D(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):D(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);B(this,t,e,n,o-1,-o)}var i=0,a=1,u=0>t?1:0;for(this[e]=255&t;++i<n&&(a*=256);)this[e+i]=(t/a>>0)-u&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);B(this,t,e,n,o-1,-o)}var i=n-1,a=1,u=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=(t/a>>0)-u&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):R(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):R(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):D(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n=0|n,r||B(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):D(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return G(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return G(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return z(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return z(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&r>o&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i,a=o-r;if(this===e&&n>r&&o>n)for(i=a-1;i>=0;i--)e[i+n]=this[i+r];else if(1e3>a||!t.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)e[i+n]=this[i+r];else e._set(this.subarray(r,r+a),n);return a},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var o=U(t.toString()),i=o.length;for(r=e;n>r;r++)this[r]=o[r%i]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;r>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(297).Buffer,function(){return this}())},function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===l?62:e===u||e===d?63:s>e?-1:s+10>e?e-s+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function n(t){function n(t){c[l++]=t}var r,o,a,u,s,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;s="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new i(3*t.length/4-s),a=s>0?t.length-4:t.length;var l=0;for(r=0,o=0;a>r;r+=4,o+=3)u=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===s?(u=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&u)):1===s&&(u=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(u>>8&255),n(255&u)),c}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,a,u=t.length%3,s="";for(o=0,a=t.length-u;a>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s+=n(i);switch(u){case 1:i=t[t.length-1],s+=e(i>>2),s+=e(i<<4&63),s+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],s+=e(i>>10),s+=e(i>>4&63),s+=e(i<<2&63),s+="="}return s}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),u="/".charCodeAt(0),s="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),d="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}(e)},function(t,e){e.read=function(t,e,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,f=-7,l=n?o-1:0,d=n?-1:1,h=t[e+l];for(l+=d,i=h&(1<<-f)-1,h>>=-f,f+=u;f>0;i=256*i+t[e+l],l+=d,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=d,f-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,u,s,c=8*i-o-1,f=(1<<c)-1,l=f>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),e+=a+l>=1?d/s:d*Math.pow(2,1-l),e*s>=2&&(a++,s/=2),a+l>=f?(u=0,a=f):a+l>=1?(u=(e*s-1)*Math.pow(2,o),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+h]=255&u,h+=p,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;t[n+h]=255&a,h+=p,a/=256,c-=8);t[n+h-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===y(t)}function r(t){return"boolean"==typeof t}function o(t){return null===t}function i(t){return null==t}function a(t){return"number"==typeof t}function u(t){return"string"==typeof t}function s(t){return"symbol"==typeof t}function c(t){return void 0===t}function f(t){return"[object RegExp]"===y(t)}function l(t){return"object"==typeof t&&null!==t}function d(t){return"[object Date]"===y(t)}function h(t){return"[object Error]"===y(t)||t instanceof Error}function p(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function y(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=o,e.isNullOrUndefined=i,e.isNumber=a,e.isString=u,e.isSymbol=s,e.isUndefined=c,e.isRegExp=f,e.isObject=l,e.isDate=d,e.isError=h,e.isFunction=p,e.isPrimitive=v,e.isBuffer=t.isBuffer}).call(e,n(297).Buffer)},function(t,e,n){function r(t){if(t&&!s(t))throw new Error("Unknown encoding: "+t)}function o(t){return t.toString(this.encoding)}function i(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var u=n(297).Buffer,s=u.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=o)}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var o=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,o),o-=this.charReceived),e+=t.toString(this.encoding,0,o);var o=e.length-1,r=e.charCodeAt(o);if(r>=55296&&56319>=r){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,o)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;e+=r.slice(0,n).toString(o)}return e}},function(t,e,n){(function(e){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function o(t,e){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){h(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(t){var e=n(304);return this instanceof i||this instanceof e?(this._writableState=new o(t,this),this.writable=!0,void E.call(this)):new i(t)}function a(t,n,r){var o=new Error("write after end");t.emit("error",o),e.nextTick(function(){r(o)})}function u(t,n,r,o){var i=!0;if(!_.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!n.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),e.nextTick(function(){o(a)}),i=!1}return i}function s(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new _(e,n)),e}function c(t,e,n,o,i){n=s(e,n,o),_.isBuffer(n)&&(o="buffer");var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;return u||(e.needDrain=!0),e.writing?e.buffer.push(new r(n,o,i)):f(t,e,a,n,o,i),u}function f(t,e,n,r,o,i){e.writelen=n,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,o,e.onwrite),e.sync=!1}function l(t,n,r,o,i){r?e.nextTick(function(){i(o)}):i(o),t._writableState.errorEmitted=!0,t.emit("error",o)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function h(t,n){var r=t._writableState,o=r.sync,i=r.writecb;if(d(r),n)l(t,r,o,n,i);else{var a=g(t,r);a||r.bufferProcessing||!r.buffer.length||y(t,r),o?e.nextTick(function(){p(t,r,a,i)}):p(t,r,a,i)}}function p(t,e,n,r){n||v(t,e),r(),n&&m(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function y(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var r=e.buffer[n],o=r.chunk,i=r.encoding,a=r.callback,u=e.objectMode?1:o.length;if(f(t,e,u,o,i,a),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}function g(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function m(t,e){var n=g(t,e);return n&&(e.finished=!0,t.emit("finish")),n}function b(t,n,r){n.ending=!0,m(t,n),r&&(n.finished?e.nextTick(r):t.once("finish",r)),n.ended=!0}t.exports=i;var _=n(297).Buffer;i.WritableState=o;var w=n(301);w.inherits=n(293);var E=n(292);w.inherits(i,E),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(t,e,n){var r=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),_.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?a(this,r,n):u(this,r,t,n)&&(o=c(this,r,t,e,n)),o},i.prototype._write=function(t,e,n){n(new Error("not implemented"))},i.prototype.end=function(t,e,n){
var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),r.ending||r.finished||b(this,r,n)}}).call(e,n(282))},function(t,e,n){(function(e){function r(t){return this instanceof r?(s.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new r(t)}function o(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function i(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}t.exports=r;var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},u=n(301);u.inherits=n(293);var s=n(295),c=n(303);u.inherits(r,s),i(a(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(e,n(282))},function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(t,e,n){var r=t._transformState;r.transforming=!1;var o=r.writecb;if(!o)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),o&&o(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);u.call(this,t);var e=(this._transformState=new r(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=i;var u=n(304),s=n(301);s.inherits=n(293),s.inherits(i,u),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){function r(t){return this instanceof r?void o.call(this,t):new r(t)}t.exports=r;var o=n(305),i=n(301);i.inherits=n(293),i.inherits(r,o),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(303)},function(t,e,n){t.exports=n(304)},function(t,e,n){t.exports=n(305)},function(t,e,n){t.exports=n(306)},function(t,e,n){function r(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),n={},r=0;r<e.length;r++){var o=e[r];if(""!==o){var i=o.match(/^([^:]+):\s*(.*)/);if(i){var a=i[1].toLowerCase(),u=i[2];void 0!==n[a]?s(n[a])?n[a].push(u):n[a]=[n[a],u]:n[a]=u}else n[o]=!0}}return n}var o=n(292),i=n(312),a=t.exports=function(t){this.offset=0,this.readable=!0};i.inherits(a,o);var u={streaming:!0,status2:!0};a.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return"blob"===e?t.responseBlob||t.response:"arraybuffer"===e?t.response:t.responseText},a.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]},a.prototype.handle=function(t){if(2===t.readyState&&u.status2){try{this.statusCode=t.status,this.headers=r(t)}catch(e){u.status2=!1}u.status2&&this.emit("ready")}else if(u.streaming&&3===t.readyState){try{this.statusCode||(this.statusCode=t.status,this.headers=r(t),this.emit("ready"))}catch(e){}try{this._emitData(t)}catch(e){u.streaming=!1}}else 4===t.readyState&&(this.statusCode||(this.statusCode=t.status,this.emit("ready")),this._emitData(t),t.error?this.emit("error",this.getResponse(t)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(t){var e=this.getResponse(t);return e.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(e,this.offset)),void(this.offset=e.byteLength)):void(e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length))};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){(function(t,r){function o(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function a(t,e){return t}function u(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function s(t,n,r){if(t.customInspect&&n&&j(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return b(o)||(o=s(t,o,r)),o}var i=c(t,n);if(i)return i;var a=Object.keys(n),v=u(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),O(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(j(n)){var y=n.name?": "+n.name:"";return t.stylize("[Function"+y+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(A(n))return t.stylize(Date.prototype.toString.call(n),"date");if(O(n))return f(n)}var g="",m=!1,_=["{","}"];if(p(n)&&(m=!0,_=["[","]"]),j(n)){var w=n.name?": "+n.name:"";g=" [Function"+w+"]"}if(E(n)&&(g=" "+RegExp.prototype.toString.call(n)),A(n)&&(g=" "+Date.prototype.toUTCString.call(n)),O(n)&&(g=" "+f(n)),0===a.length&&(!m||0==n.length))return _[0]+g+_[1];if(0>r)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var x;return x=m?l(t,n,r,v,a):a.map(function(e){return d(t,n,r,v,e,m)}),t.seen.pop(),h(x,g,_)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,o){for(var i=[],a=0,u=e.length;u>a;++a)M(e,String(a))?i.push(d(t,e,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(t,e,n,r,o,!0))}),i}function d(t,e,n,r,o,i){var a,u,c;if(c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},c.get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),M(r,o)||(a="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=y(n)?s(t,c.value,null):s(t,c.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return u;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function h(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function w(t){return void 0===t}function E(t){return x(t)&&"[object RegExp]"===I(t)}function x(t){return"object"==typeof t&&null!==t}function A(t){return x(t)&&"[object Date]"===I(t)}function O(t){return x(t)&&("[object Error]"===I(t)||t instanceof Error)}function j(t){return"function"==typeof t}function k(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function I(t){return Object.prototype.toString.call(t)}function T(t){return 10>t?"0"+t.toString(10):t.toString(10)}function S(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),u=r[n];i>n;u=r[++n])a+=y(u)||!x(u)?" "+u:" "+o(u);return a},e.deprecate=function(n,o){function i(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return n.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return i};var P,B={};e.debuglog=function(t){if(w(P)&&(P={NODE_ENV:"production",NODE_TARGET:"web"}.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var n=r.pid;B[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else B[t]=function(){};return B[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=v,e.isNull=y,e.isNullOrUndefined=g,e.isNumber=m,e.isString=b,e.isSymbol=_,e.isUndefined=w,e.isRegExp=E,e.isObject=x,e.isDate=A,e.isError=O,e.isFunction=j,e.isPrimitive=k,e.isBuffer=n(313);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",S(),e.format.apply(e,arguments))},e.inherits=n(293),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(282))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){!function(){function t(t){this.message=t}var n=e,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(e){for(var n,o,i=0,a=r,u="";e.charAt(0|i)||(a="=",i%1);u+=a.charAt(63&n>>8-i%1*8)){if(o=e.charCodeAt(i+=.75),o>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return u}),n.atob||(n.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,i=0,a=0,u="";o=e.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?u+=String.fromCharCode(255&n>>(-2*i&6)):0)o=r.indexOf(o);return u})}()},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return s(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function u(t,e){return t?o(t,!1,!0).resolveObject(e):e}function s(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function f(t){return null===t}function l(t){return null==t}var d=n(316);e.parse=o,e.resolve=a,e.resolveObject=u,e.format=i,e.Url=r;var h=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(v),g=["'"].concat(y),m=["%","/","?",";","#"].concat(g),b=["/","?","#"],_=255,w=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=n(318);r.prototype.parse=function(t,e,n){if(!s(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=h.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||o&&A[o]||(r=r.substr(2),this.slashes=!0)}if(!A[o]&&(a||o&&!O[o])){for(var u=-1,c=0;c<b.length;c++){var f=r.indexOf(b[c]);-1!==f&&(-1===u||u>f)&&(u=f)}var l,p;p=-1===u?r.lastIndexOf("@"):r.lastIndexOf("@",u),-1!==p&&(l=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(l)),u=-1;for(var c=0;c<m.length;c++){var f=r.indexOf(m[c]);-1!==f&&(-1===u||u>f)&&(u=f)}-1===u&&(u=r.length),this.host=r.slice(0,u),r=r.slice(u),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),c=0,k=y.length;k>c;c++){var I=y[c];if(I&&!I.match(w)){for(var T="",S=0,M=I.length;M>S;S++)T+=I.charCodeAt(S)>127?"x":I[S];if(!T.match(w)){var C=y.slice(0,c),P=y.slice(c+1),B=I.match(E);B&&(C.push(B[1]),P.unshift(B[2])),P.length&&(r="/"+P.join(".")+r),this.hostname=C.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var R=this.hostname.split("."),D=[],c=0;c<R.length;++c){var F=R[c];D.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(F):F)}this.hostname=D.join(".")}var G=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+G,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!x[i])for(var c=0,k=g.length;k>c;c++){var L=g[c],V=encodeURIComponent(L);V===L&&(V=escape(L)),r=r.split(L).join(V)}var N=r.indexOf("#");-1!==N&&(this.hash=r.substr(N),r=r.slice(0,N));var U=r.indexOf("?");if(-1!==U?(this.search=r.substr(U),this.query=r.substr(U+1),e&&(this.query=j.parse(this.query)),r=r.slice(0,U)):e&&(this.search="",this.query={}),r&&(this.pathname=r),O[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var G=this.pathname||"",F=this.search||"";this.path=G+F}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=j.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||O[e])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(s(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),O[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!O[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||A[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",a=n.search||"";n.path=i+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=c||u||n.host&&t.pathname,h=d,p=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],v=n.protocol&&!O[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),d=d&&(""===o[0]||""===p[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,p=o;else if(o.length)p||(p=[]),p.pop(),p=p.concat(o),n.search=t.search,n.query=t.query;else if(!l(t.search)){if(v){n.hostname=n.host=p.shift();var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return n.search=t.search,n.query=t.query,f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=p.slice(-1)[0],m=(n.host||t.host)&&("."===g||".."===g)||""===g,b=0,_=p.length;_>=0;_--)g=p[_],"."==g?p.splice(_,1):".."===g?(p.splice(_,1),b++):b&&(p.splice(_,1),b--);if(!d&&!h)for(;b--;b)p.unshift("..");!d||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),m&&"/"!==p.join("/").substr(-1)&&p.push("");var w=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){n.hostname=n.host=w?"":p.length?p.shift():"";var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return d=d||n.host&&p.length,d&&!w&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,o){!function(i){function a(t){throw RangeError(C[t])}function u(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function s(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(M,".");var o=t.split("."),i=u(o,e).join(".");return r+i}function c(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function f(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=R(t>>>10&1023|55296),t=56320|1023&t),e+=R(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function d(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function h(t,e,n){var r=0;for(t=n?B(t/O):t>>1,t+=B(t/e);t>P*x>>1;r+=w)t=B(t/P);return B(r+(P+1)*t/(t+A))}function p(t){var e,n,r,o,i,u,s,c,d,p,v=[],y=t.length,g=0,m=k,b=j;for(n=t.lastIndexOf(I),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&a("not-basic"),v.push(t.charCodeAt(r));for(o=n>0?n+1:0;y>o;){for(i=g,u=1,s=w;o>=y&&a("invalid-input"),c=l(t.charCodeAt(o++)),(c>=w||c>B((_-g)/u))&&a("overflow"),g+=c*u,d=b>=s?E:s>=b+x?x:s-b,!(d>c);s+=w)p=w-d,u>B(_/p)&&a("overflow"),u*=p;e=v.length+1,b=h(g-i,e,0==i),B(g/e)>_-m&&a("overflow"),m+=B(g/e),g%=e,v.splice(g++,0,m)}return f(v)}function v(t){var e,n,r,o,i,u,s,f,l,p,v,y,g,m,b,A=[];for(t=c(t),y=t.length,e=k,n=0,i=j,u=0;y>u;++u)v=t[u],128>v&&A.push(R(v));for(r=o=A.length,o&&A.push(I);y>r;){for(s=_,u=0;y>u;++u)v=t[u],v>=e&&s>v&&(s=v);for(g=r+1,s-e>B((_-n)/g)&&a("overflow"),n+=(s-e)*g,e=s,u=0;y>u;++u)if(v=t[u],e>v&&++n>_&&a("overflow"),v==e){for(f=n,l=w;p=i>=l?E:l>=i+x?x:l-i,!(p>f);l+=w)b=f-p,m=w-p,A.push(R(d(p+b%m,0))),f=B(b/m);A.push(R(d(f,0))),i=h(n,g,r==o),n=0,++r}++n,++e}return A.join("")}function y(t){return s(t,function(t){return T.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return S.test(t)?"xn--"+v(t):t})}var m=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);m.global!==m&&m.window!==m&&m.self!==m||(i=m);var b,_=2147483647,w=36,E=1,x=26,A=38,O=700,j=72,k=128,I="-",T=/^xn--/,S=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=w-E,B=Math.floor,R=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:f},decode:p,encode:v,toASCII:g,toUnicode:y},r=function(){return b}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(317)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";e.decode=e.parse=n(319),e.encode=e.stringify=n(320)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var s=t.length;u>0&&s>u&&(s=u);for(var c=0;s>c;++c){var f,l,d,h,p=t[c].replace(a,"%20"),v=p.indexOf(r);v>=0?(f=p.substr(0,v),l=p.substr(v+1)):(f=p,l=""),d=decodeURIComponent(f),h=decodeURIComponent(l),n(i,d)?Array.isArray(i[d])?i[d].push(h):i[d]=[i[d],h]:i[d]=h}return i}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(n(t))}).join(e):i+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(t)):""}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,h["default"])(t);if(!Array.isArray(t)){var i=(0,l["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,c["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,h["default"])(s))?s.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,h["default"])(t);if(!Array.isArray(t)){var o=(0,l["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,c["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,h["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var a,u,s=n(322),c=r(s),f=n(325),l=r(f),d=n(359),h=r(d),p=n(392),v=r(p),y=n(396),g=r(y),m=n(413),b=r(m),_=n(421),w=r(_),E=n(422),x=r(E),A=n(423),O=r(A),j=n(427),k=r(j),I=n(432),T=r(I),S=n(290),M=r(S),C=n(453),P=r(C),B=n(441),R=r(B),D=n(457),F=r(D),G=n(466),z=r(G),L=n(536),V=r(L),N=n(504),U=r(N),$=n(553),q=r($),W=n(483);r(W),n(554)(P["default"]);var K="UpM28mnfW65vJkbqEATtKvxm",H={eventsFeatures:"is-typing",autoAckEvents:!0,logLevel:"error",eventsAutoReconnect:!0,flushAckInterval:2e3,flushAckMaxEvents:500,flushSetMessageStatusInterval:1e3,flushMessageMaxCount:500,conversationReloadDelay:200,eventsAutoReconnectDelay:2e3,organizationRostersChangeThrottleDelay:500,temporaryEntityDelayBeforeRefreshing:100,enableEnsureEntityWithTemp:!0,enableEnsureEntityFindMissing:!0,consumerOrganizationId:K,maxMetadataKeyCount:8,pushAgent:"consumer",baseUrl:"https://developer.tigertext.me/v2",productKey:"bc1oOf3DZXbnaNZ2LCWZGvSg",clientVersion:"1.0"},Y=(u=a=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if((0,x["default"])(this,t),!(null==n||n instanceof Object))throw new TypeError('Value of argument "config" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+i(n));if(!(null==n||n instanceof Object))throw new TypeError('Value of argument "config" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+o(n));this.config=P["default"].defaults(n,H),this.httpClient=new T["default"]({baseUrl:this.config.baseUrl,logger:new k["default"]({name:"HttpClient",level:this.config.logLevel})}),this.enums=U["default"],this.store=new V["default"](this,{logger:new k["default"]({name:"Store",level:this.config.logLevel})}),this.store.defineModels(),this.models=this.store.models,this.modelsByEntityType=P["default"].mapKeys(this.store.models,function(t,e){return P["default"].snakeCase(e)}),this.logger=new k["default"]({name:"TigerConnectClient",level:this.config.logLevel}),this.api={},P["default"].each(F["default"],function(t,n){e.api[P["default"].camelCase(n)]=new t(e,{logger:new k["default"]({name:t.name,level:e.config.logLevel})})}),this._services={},P["default"].each(z["default"],function(t,n){n=P["default"].camelCase(n),e._services[n]=e[n]=new t(e,{logger:new k["default"]({name:t.name,level:e.config.logLevel})})}),P["default"].each(this._services,function(t){return t.mounted&&t.mounted()}),this._listenToEvents()}return(0,O["default"])(t,[{key:"_listenToEvents",value:function(){var t=this;this.on("signedIn",function(e,n){t.logger.info("signedIn",e.id)}).on("signedOut",function(){t.reset()}).on("signUp",function(e){var n=e.user,r=e.auth;t.logger.info("signUp",n.id),t._setCurrentUser(n,r)}),this.events.on("event",function(e){return t.emit("event",e)}),this.conversations.on("message",function(e){return t.emit("message",e)}),this.conversations.on("change",function(e){return t.emit("conversation:change",e)})}},{key:"signIn",value:function(){var t=(0,w["default"])(b["default"].mark(function e(t,n){var r,o,i,a=arguments.length<=2||void 0===arguments[2]?{udid:void 0}:arguments[2];return b["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit("signingIn"),e.prev=1,e.next=4,this.users.signIn(t,n,a);case 4:return r=e.sent,o=r.user,i=r.auth,this._setCurrentUser(o,i),e.next=10,this.users.me({bypassCache:!0});case 10:return this.emit("signedIn",o,i),e.abrupt("return",{user:o,auth:i});case 14:throw e.prev=14,e.t0=e["catch"](1),e.t0;case 18:case"end":return e.stop()}},e,this,[[1,14]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"signOut",value:function(){var t=(0,w["default"])(b["default"].mark(function e(){var t,n,r=arguments.length<=0||void 0===arguments[0]?{async:!0}:arguments[0],o=r.async,i=void 0===o?!0:o;return b["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSignedIn()){e.next=2;break}return e.abrupt("return",g["default"].resolve());case 2:if(this.emit("signingOut"),i||"undefined"!=typeof XMLHttpRequest){e.next=5;break}throw new Error("async: false option has to be on the browser.");case 5:if(!i){e.next=16;break}return t=this.users.signOut({async:i}),e.next=9,t;case 9:this._currentUser=null,this._auth=null,this.httpClient.removeAuth(),this.events.disconnect(),this.emit("signedOut"),e.next=22;break;case 16:return n=new XMLHttpRequest,n.open("POST",this.config.baseUrl+"/logout",!1),n.setRequestHeader("Authorization",this.httpClient.getAuthHeader()),n.send(null),this.emit("signedOut"),e.abrupt("return",g["default"].resolve());case 22:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"authenticate",value:function(){var t=(0,w["default"])(b["default"].mark(function e(t,n){var r,o,i;return b["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._setAuth(t,n),e.prev=1,e.next=4,this.httpClient.get("/user");case 4:e.next=25;break;case 6:if(e.prev=6,e.t0=e["catch"](1),r=e.t0.response&&e.t0.response.get("TT_Log_Account_Token")){e.next=11;break}throw new R["default"].WrongCredentialsError;case 11:return e.prev=11,e.next=14,this.users.find(r);case 14:return o=e.sent,i={key:t,secret:n},this._setCurrentUser(o,i),this.emit("signedIn",o,i),e.abrupt("return",o);case 21:throw e.prev=21,e.t1=e["catch"](11),this._removeAuth(),e.t1;case 25:case"end":return e.stop()}},e,this,[[1,6],[11,21]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_setCurrentUser",value:function(t,e){this._currentUser=t,this._setAuth(e.key,e.secret,e.resource)}},{key:"_setAuth",value:function(t,e,n){this._auth={key:t,secret:e,resource:n},this.httpClient.setAuth(t,e)}},{key:"_removeAuth",value:function(){this._auth=null,this.httpClient.removeAuth()}},{key:"getCurrentUser",value:function(){return this._currentUser||null}},{key:"getAuth",value:function(){return this._auth}},{key:"isSignedIn",value:function(){return null!=this.getAuth()}},{key:"requireUser",value:function(){if(!this.isSignedIn())throw new R["default"].NotSignedInError}},{key:"reactToAdvisoryEvent",value:function(t,e){switch(this.emit("advisory",{type:t,data:e}),t){case"replayStart":this.emit("messages:offline:start",e);break;case"replayStop":this.emit("messages:offline:stop"),this.emit("messages:new:start")}}},{key:"modelByTypeNS",value:function(t){return this.MODEL_BY_TYPE_NS[t]}},{key:"injectModel",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?t.xmlns||t.type:arguments[1],n=this.modelByTypeNS(e);return n?n.inject(t):((0,q["default"])(n,"injectModel: Missing class for "+e),null)}},{key:"getEntity",value:function(t,e){return this.modelsByEntityType[t].get(e)}},{key:"getEntities",value:function(t){var e=this;return t.map(function(t){return e.getEntity(t.type,t.id)})}},{key:"typeNSByModelName",value:function(t){return this.TYPE_NS_BY_MODEL_NAME[t]}},{key:"reset",value:function(){this.emit("reset"),P["default"].each(this._services,function(t){t.dispose&&t.dispose(),t.mounted&&t.mounted()}),this.store&&this.store.clear()}},{key:"configure",value:function(t){return(0,v["default"])(this.config,t),this}},{key:"setDefaultOrganization",
value:function(t){return this.configure({defaultOrganizationId:t})}},{key:"MODEL_BY_TYPE_NS",get:function(){return this._MODEL_BY_TYPE_NS||(this._MODEL_BY_TYPE_NS={"tigertext:entity:account":this.models.User,"tigertext:entity:group":this.models.Group,"tigertext:entity:list":this.models.Group,"tigertext:iq:message":this.models.Message,"tigertext:iq:group_message":this.models.Message,"tigertext:iq:group:message":this.models.Message}),this._MODEL_BY_TYPE_NS}},{key:"TYPE_NS_BY_MODEL_NAME",get:function(){return this._TYPE_NS_BY_MODEL_NAME||(this._TYPE_NS_BY_MODEL_NAME=P["default"].reduce(this.MODEL_BY_TYPE_NS,function(t,e,n){return t[e.name]=n,t[P["default"].capitalize(e.name)]=n,t},{})),this._TYPE_NS_BY_MODEL_NAME}}]),t}(),a.errors=R["default"],a.VERSION="0.1.6",a.CONSUMER_ORGANIZATION_ID=K,u);(0,v["default"])(Y.prototype,M["default"].prototype),e["default"]=Y,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(323),__esModule:!0}},function(t,e,n){var r=n(324),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e){var n=t.exports={version:"2.1.4"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports={"default":n(326),__esModule:!0}},function(t,e,n){n(327),t.exports=n(324).Object.keys},function(t,e,n){var r=n(328),o=n(330);n(345)("keys",function(){return function(t){return o(r(t))}})},function(t,e,n){var r=n(329);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(331),o=n(344);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(332),o=n(333),i=n(336)(!1),a=n(340)("IE_PROTO");t.exports=function(t,e){var n,u=o(t),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~i(c,n)||c.push(n));return c}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(334),o=n(329);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(335);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(333),o=n(337),i=n(339);t.exports=function(t){return function(e,n,a){var u,s=r(e),c=o(s.length),f=i(a,c);if(t&&n!=n){for(;c>f;)if(u=s[f++],u!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f;return!t&&-1}}},function(t,e,n){var r=n(338),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(338),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),0>t?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(341)("keys"),o=n(343);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(342),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(346),o=n(324),i=n(355);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(342),o=n(324),i=n(347),a=n(349),u="prototype",s=function(t,e,n){var c,f,l,d=t&s.F,h=t&s.G,p=t&s.S,v=t&s.P,y=t&s.B,g=t&s.W,m=h?o:o[e]||(o[e]={}),b=m[u],_=h?r:p?r[e]:(r[e]||{})[u];h&&(n=e);for(c in n)f=!d&&_&&void 0!==_[c],f&&c in m||(l=f?_[c]:n[c],m[c]=h&&"function"!=typeof _[c]?n[c]:y&&f?i(l,r):g&&_[c]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(l):v&&"function"==typeof l?i(Function.call,l):l,v&&((m.virtual||(m.virtual={}))[c]=l,t&s.R&&b&&!b[c]&&a(b,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var r=n(348);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(350),o=n(358);t.exports=n(354)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(351),o=n(353),i=n(357),a=Object.defineProperty;e.f=n(354)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(352);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(354)&&!n(355)(function(){return 7!=Object.defineProperty(n(356)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(355)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(352),o=n(342).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(352);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(360),i=r(o),a=n(379),u=r(a),s="function"==typeof u["default"]&&"symbol"==typeof i["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof u["default"]&&t.constructor===u["default"]?"symbol":typeof t};e["default"]="function"==typeof u["default"]&&"symbol"===s(i["default"])?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof u["default"]&&t.constructor===u["default"]?"symbol":"undefined"==typeof t?"undefined":s(t)}},function(t,e,n){t.exports={"default":n(361),__esModule:!0}},function(t,e,n){n(362),n(375),t.exports=n(373)("iterator")},function(t,e,n){"use strict";var r=n(363)(!0);n(364)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(338),o=n(329);t.exports=function(t){return function(e,n){var i,a,u=String(o(e)),s=r(n),c=u.length;return 0>s||s>=c?t?"":void 0:(i=u.charCodeAt(s),55296>i||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):i:t?u.slice(s,s+2):(i-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(365),o=n(346),i=n(366),a=n(349),u=n(332),s=n(367),c=n(368),f=n(372),l=n(374),d=n(373)("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",y="values",g=function(){return this};t.exports=function(t,e,n,m,b,_,w){c(n,e,m);var E,x,A,O=function(t){if(!h&&t in T)return T[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},j=e+" Iterator",k=b==y,I=!1,T=t.prototype,S=T[d]||T[p]||b&&T[b],M=S||O(b),C=b?k?O("entries"):M:void 0,P="Array"==e?T.entries||S:S;if(P&&(A=l(P.call(new t)),A!==Object.prototype&&(f(A,j,!0),r||u(A,d)||a(A,d,g))),k&&S&&S.name!==y&&(I=!0,M=function(){return S.call(this)}),r&&!w||!h&&!I&&T[d]||a(T,d,M),s[e]=M,s[j]=g,b)if(E={values:k?M:O(y),keys:_?M:O(v),entries:C},w)for(x in E)x in T||i(T,x,E[x]);else o(o.P+o.F*(h||I),e,E);return E}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(349)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(369),o=n(358),i=n(372),a={};n(349)(a,n(373)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(351),o=n(370),i=n(344),a=n(340)("IE_PROTO"),u=function(){},s="prototype",c=function(){var t,e=n(356)("iframe"),r=i.length,o=">";for(e.style.display="none",n(371).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+o),t.close(),c=t.F;r--;)delete c[s][i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[s]=r(t),n=new u,u[s]=null,n[a]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(350),o=n(351),i=n(330);t.exports=n(354)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),u=a.length,s=0;u>s;)r.f(t,n=a[s++],e[n]);return t}},function(t,e,n){t.exports=n(342).document&&document.documentElement},function(t,e,n){var r=n(350).f,o=n(332),i=n(373)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(341)("wks"),o=n(343),i=n(342).Symbol,a="function"==typeof i;t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}},function(t,e,n){var r=n(332),o=n(328),i=n(340)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){n(376);for(var r=n(342),o=n(349),i=n(367),a=n(373)("toStringTag"),u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;5>s;s++){var c=u[s],f=r[c],l=f&&f.prototype;l&&!l[a]&&o(l,a,c),i[c]=i.Array}},function(t,e,n){"use strict";var r=n(377),o=n(378),i=n(367),a=n(333);t.exports=n(364)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={"default":n(380),__esModule:!0}},function(t,e,n){n(381),n(391),t.exports=n(324).Symbol},function(t,e,n){"use strict";var r=n(342),o=n(324),i=n(332),a=n(354),u=n(346),s=n(366),c=n(382).KEY,f=n(355),l=n(341),d=n(372),h=n(343),p=n(373),v=n(383),y=n(384),g=n(387),m=n(351),b=n(333),_=n(357),w=n(358),E=n(369),x=n(388),A=n(390),O=n(350),j=A.f,k=O.f,I=x.f,T=r.Symbol,S=r.JSON,M=S&&S.stringify,C=!1,P=p("_hidden"),B={}.propertyIsEnumerable,R=l("symbol-registry"),D=l("symbols"),F=Object.prototype,G="function"==typeof T,z=r.QObject,L=a&&f(function(){return 7!=E(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=j(F,e);r&&delete F[e],k(t,e,n),r&&t!==F&&k(F,e,r)}:k,V=function(t){var e=D[t]=E(T.prototype);return e._k=t,a&&C&&L(F,t,{configurable:!0,set:function(e){i(this,P)&&i(this[P],t)&&(this[P][t]=!1),L(this,t,w(1,e))}}),e},N=function(t){return"symbol"==typeof t},U=function(t,e,n){return m(t),e=_(e,!0),m(n),i(D,e)?(n.enumerable?(i(t,P)&&t[P][e]&&(t[P][e]=!1),n=E(n,{enumerable:w(0,!1)})):(i(t,P)||k(t,P,w(1,{})),t[P][e]=!0),L(t,e,n)):k(t,e,n)},$=function(t,e){m(t);for(var n,r=y(e=b(e)),o=0,i=r.length;i>o;)U(t,n=r[o++],e[n]);return t},q=function(t,e){return void 0===e?E(t):$(E(t),e)},W=function(t){var e=B.call(this,t=_(t,!0));return e||!i(this,t)||!i(D,t)||i(this,P)&&this[P][t]?e:!0},K=function(t,e){var n=j(t=b(t),e=_(e,!0));return!n||!i(D,e)||i(t,P)&&t[P][e]||(n.enumerable=!0),n},H=function(t){for(var e,n=I(b(t)),r=[],o=0;n.length>o;)i(D,e=n[o++])||e==P||e==c||r.push(e);return r},Y=function(t){for(var e,n=I(b(t)),r=[],o=0;n.length>o;)i(D,e=n[o++])&&r.push(D[e]);return r},Z=function(t){if(void 0!==t&&!N(t)){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){return n&&(e=n.call(this,t,e)),N(e)?void 0:e}),r[1]=e,M.apply(S,r)}},X=f(function(){var t=T();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))});G||(T=function(){if(N(this))throw TypeError("Symbol is not a constructor");return V(h(arguments.length>0?arguments[0]:void 0))},s(T.prototype,"toString",function(){return this._k}),N=function(t){return t instanceof T},A.f=K,O.f=U,n(389).f=x.f=H,n(386).f=W,n(385).f=Y,a&&!n(365)&&s(F,"propertyIsEnumerable",W,!0)),u(u.G+u.W+u.F*!G,{Symbol:T});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Q=0;J.length>Q;){var tt=J[Q++],et=o.Symbol,nt=p(tt);tt in et||k(et,tt,{value:G?nt:V(nt)})}z&&z.prototype&&z.prototype.findChild||(C=!0),u(u.S+u.F*!G,"Symbol",{"for":function(t){return i(R,t+="")?R[t]:R[t]=T(t)},keyFor:function(t){return v(R,t)},useSetter:function(){C=!0},useSimple:function(){C=!1}}),u(u.S+u.F*!G,"Object",{create:q,defineProperty:U,defineProperties:$,getOwnPropertyDescriptor:K,getOwnPropertyNames:H,getOwnPropertySymbols:Y}),S&&u(u.S+u.F*(!G||X),"JSON",{stringify:Z}),d(T,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(t,e,n){var r=n(343)("meta"),o=n(352),i=n(332),a=n(350).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(355)(function(){return s(Object.preventExtensions({}))}),f=function(t){a(t,r,{value:{i:"O"+ ++u,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!i(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},h=function(t){return c&&p.NEED&&s(t)&&!i(t,r)&&f(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:d,onFreeze:h}},function(t,e,n){var r=n(330),o=n(333);t.exports=function(t,e){for(var n,i=o(t),a=r(i),u=a.length,s=0;u>s;)if(i[n=a[s++]]===e)return n}},function(t,e,n){var r=n(330),o=n(385),i=n(386);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var a,u=n(t),s=i.f,c=0;u.length>c;)s.call(t,a=u[c++])&&e.push(a);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(335);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(333),o=n(389).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return o.f(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?u(t):o(r(t))}},function(t,e,n){var r=n(331),o=n(344).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(386),o=n(358),i=n(333),a=n(357),u=n(332),s=n(353),c=Object.getOwnPropertyDescriptor;e.f=n(354)?c:function(t,e){if(t=i(t),e=a(e,!0),s)try{return c(t,e)}catch(n){}return u(t,e)?o(!r.f.call(t,e),t[e]):void 0}},function(t,e){},function(t,e,n){t.exports={"default":n(393),__esModule:!0}},function(t,e,n){n(394),t.exports=n(324).Object.assign},function(t,e,n){var r=n(346);r(r.S+r.F,"Object",{assign:n(395)})},function(t,e,n){"use strict";var r=n(330),o=n(385),i=n(386),a=n(328),u=n(334),s=Object.assign;t.exports=!s||n(355)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=a(t),s=arguments.length,c=1,f=o.f,l=i.f;s>c;)for(var d,h=u(arguments[c++]),p=f?r(h).concat(f(h)):r(h),v=p.length,y=0;v>y;)l.call(h,d=p[y++])&&(n[d]=h[d]);return n}:s},function(t,e,n){t.exports={"default":n(397),__esModule:!0}},function(t,e,n){n(391),n(362),n(375),n(398),t.exports=n(324).Promise},function(t,e,n){"use strict";var r,o,i,a=n(365),u=n(342),s=n(347),c=n(399),f=n(346),l=n(352),d=(n(351),n(348)),h=n(400),p=n(401),v=(n(405).set,n(406)),y=n(407).set,g=n(409),m="Promise",b=u.TypeError,_=u.process,w=u[m],E="process"==c(_),x=function(){},A=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[n(373)("species")]=function(t){t(x,x)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e}catch(r){}}(),O=function(t,e){return t===e||t===w&&e===i},j=function(t){var e;return l(t)&&"function"==typeof(e=t.then)?e:!1},k=function(t){return O(w,t)?new I(t):new o(t)},I=o=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw b("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)},T=function(t){try{t()}catch(e){return{error:e}}},S=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var r=t._v,o=1==t._s,i=0,a=function(e){var n,i,a=o?e.ok:e.fail,u=e.resolve,s=e.reject;try{a?(o||(2==t._h&&P(t),t._h=1),n=a===!0?r:a(r),n===e.promise?s(b("Promise-chain cycle")):(i=j(n))?i.call(n,u,s):u(n)):s(r)}catch(c){s(c)}};n.length>i;)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){y.call(u,function(){var e,n,r,o=t._v;if(C(t)&&(e=T(function(){E?_.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=E||C(t)?2:1),t._a=void 0,e)throw e.error})},C=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!C(e.promise))return!1;return!0},P=function(t){y.call(u,function(){var e;E?_.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),S(e,!0))},R=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw b("Promise can't be resolved itself");(e=j(t))?g(function(){var r={_w:n,_d:!1};try{e.call(t,s(R,r,1),s(B,r,1))}catch(o){B.call(r,o)}}):(n._v=t,n._s=1,S(n,!1))}catch(r){B.call({_w:n,_d:!1},r)}}};A||(w=function(t){h(this,w,m,"_h"),d(t),r.call(this);try{t(s(R,this,1),s(B,this,1))}catch(e){B.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(410)(w.prototype,{then:function(t,e){var n=k(v(this,w));return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,this._c.push(n),this._a&&this._a.push(n),this._s&&S(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),I=function(){var t=new r;this.promise=t,this.resolve=s(R,t,1),this.reject=s(B,t,1)}),f(f.G+f.W+f.F*!A,{Promise:w}),n(372)(w,m),n(411)(m),i=n(324)[m],f(f.S+f.F*!A,m,{reject:function(t){var e=k(this),n=e.reject;return n(t),e.promise}}),f(f.S+f.F*(a||!A),m,{resolve:function(t){if(t instanceof w&&O(t.constructor,this))return t;var e=k(this),n=e.resolve;return n(t),e.promise}}),f(f.S+f.F*!(A&&n(412)(function(t){w.all(t)["catch"](x)})),m,{all:function(t){var e=this,n=k(e),r=n.resolve,o=n.reject,i=T(function(){var n=[],i=0,a=1;p(t,!1,function(t){var u=i++,s=!1;n.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,n[u]=t,--a||r(n))},o)}),--a||r(n)});return i&&o(i.error),n.promise},race:function(t){var e=this,n=k(e),r=n.reject,o=T(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(t,e,n){var r=n(335),o=n(373)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:i?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(347),o=n(402),i=n(403),a=n(351),u=n(337),s=n(404);t.exports=function(t,e,n,c,f){var l,d,h,p=f?function(){return t}:s(t),v=r(n,c,e?2:1),y=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(i(p))for(l=u(t.length);l>y;y++)e?v(a(d=t[y])[0],d[1]):v(t[y]);else for(h=p.call(t);!(d=h.next()).done;)o(h,v,d.value,e)}},function(t,e,n){var r=n(351);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){var a=t["return"];throw void 0!==a&&r(a.call(t)),i}}},function(t,e,n){var r=n(367),o=n(373)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(399),o=n(373)("iterator"),i=n(367);t.exports=n(324).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[r(t)]:void 0}},function(t,e,n){var r=n(352),o=n(351),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(347)(Function.call,n(390).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){var r=n(351),o=n(348),i=n(373)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r,o,i,a=n(347),u=n(408),s=n(371),c=n(356),f=n(342),l=f.process,d=f.setImmediate,h=f.clearImmediate,p=f.MessageChannel,v=0,y={},g="onreadystatechange",m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){u("function"==typeof t?t:Function(t),e)},r(v),v},h=function(t){delete y[t]},"process"==n(335)(l)?r=function(t){l.nextTick(a(m,t,1))}:p?(o=new p,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",b,!1)):r=g in c("script")?function(t){s.appendChild(c("script"))[g]=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:h}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r,o,i,a=n(342),u=n(407).set,s=a.MutationObserver||a.WebKitMutationObserver,c=a.process,f=a.Promise,l="process"==n(335)(c),d=function(){var t,e,n;for(l&&(t=c.domain)&&(c.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;o=void 0,t&&t.enter()};if(l)i=function(){c.nextTick(d)};else if(s){var h=1,p=document.createTextNode("");new s(d).observe(p,{characterData:!0}),i=function(){p.data=h=-h}}else i=f&&f.resolve?function(){f.resolve().then(d)}:function(){u.call(a,d)};t.exports=function(t){var e={fn:t,next:void 0,domain:l&&c.domain};o&&(o.next=e),r||(r=e,i()),o=e}},function(t,e,n){var r=n(349);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},function(t,e,n){"use strict";var r=n(342),o=n(324),i=n(350),a=n(354),u=n(373)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];a&&e&&!e[u]&&i.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(373)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){n=!0},i[r]=function(){return a},t(i)}catch(u){}return n}},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(414),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(a){r.regeneratorRuntime=void 0}t.exports={"default":t.exports,__esModule:!0}}).call(e,function(){return this}())},function(t,e,n){(function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i=n(396),a=o(i),u=n(415),s=o(u),c=n(418),f=o(c),l=n(359),d=o(l),h=n(360),p=o(h),v=n(379),y=o(v);!function(t){function n(t,e,n,r){var o=(0,f["default"])((e||i).prototype),a=new _(r||[]);return o._invoke=g(t,n,a),o}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function u(){}function c(){}function l(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function h(t){this.arg=t}function v(t){function e(e,n){var r=t[e](n),o=r.value;return o instanceof h?a["default"].resolve(o.arg).then(i,u):a["default"].resolve(o).then(function(t){return r.value=t,r})}function n(t,n){function r(){return e(t,n)}return o=o?o.then(r,r):new a["default"](function(t){t(r())})}"object"===("undefined"==typeof r?"undefined":(0,d["default"])(r))&&r.domain&&(e=r.domain.bind(e));var o,i=e.bind(t,"next"),u=e.bind(t,"throw");e.bind(t,"return"),this._invoke=n}function g(t,e,n){var r=I;return function(i,a){if(r===S)throw new Error("Generator is already running");if(r===M){if("throw"===i)throw a;return E()}for(;;){var u=n.delegate;if(u){if("return"===i||"throw"===i&&u.iterator[i]===x){n.delegate=null;var s=u.iterator["return"];if(s){var c=o(s,u.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(u.iterator[i],u.iterator,a);if("throw"===c.type){n.delegate=null,i="throw",a=c.arg;continue}i="next",a=x;var f=c.arg;if(!f.done)return r=T,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===i)n._sent=a,r===T?n.sent=a:n.sent=x;else if("throw"===i){if(r===I)throw r=M,a;n.dispatchException(a)&&(i="next",a=x)}else"return"===i&&n.abrupt("return",a);r=S;var c=o(t,e,n);if("normal"===c.type){r=n.done?M:T;var f={value:c.arg,done:n.done};if(c.arg!==C)return f;n.delegate&&"next"===i&&(a=x)}else"throw"===c.type&&(r=M,i="throw",a=c.arg)}}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(t){if(t){var e=t[O];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function o(){for(;++n<t.length;)if(A.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=x,o.done=!0,o};return r.next=r}}return{next:E}}function E(){return{value:x,done:!0}}var x,A=Object.prototype.hasOwnProperty,O="function"==typeof y["default"]&&p["default"]||"@@iterator",j="object"===(0,d["default"])(e),k=t.regeneratorRuntime;if(k)return void(j&&(e.exports=k));k=t.regeneratorRuntime=j?e.exports:{},k.wrap=n;var I="suspendedStart",T="suspendedYield",S="executing",M="completed",C={},P=c.prototype=i.prototype;u.prototype=P.constructor=c,c.constructor=u,u.displayName="GeneratorFunction",k.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===u||"GeneratorFunction"===(e.displayName||e.name):!1},k.mark=function(t){return s["default"]?(0,s["default"])(t,c):t.__proto__=c,t.prototype=(0,f["default"])(P),t},k.awrap=function(t){return new h(t)},l(v.prototype),k.async=function(t,e,r,o){var i=new v(n(t,e,r,o));return k.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},l(P),P[O]=function(){return this},P.toString=function(){return"[object Generator]"},k.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},k.values=w,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=x,this.done=!1,this.delegate=null,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&A.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=x)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=A.call(o,"catchLoc"),u=A.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&A.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?this.next=o.finallyLoc:this.complete(i),C},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),C}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;b(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},C}}}("object"===("undefined"==typeof t?"undefined":(0,d["default"])(t))?t:"object"===("undefined"==typeof window?"undefined":(0,d["default"])(window))?window:"object"===("undefined"==typeof self?"undefined":(0,d["default"])(self))?self:void 0)}).call(e,function(){return this}(),n(317)(t),n(282))},function(t,e,n){t.exports={"default":n(416),__esModule:!0}},function(t,e,n){n(417),t.exports=n(324).Object.setPrototypeOf},function(t,e,n){var r=n(346);r(r.S,"Object",{setPrototypeOf:n(405).set})},function(t,e,n){t.exports={"default":n(419),__esModule:!0}},function(t,e,n){n(420);var r=n(324).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(346);r(r.S,"Object",{create:n(369)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(396),i=r(o);e["default"]=function(t){return function(){var e=t.apply(this,arguments);return new i["default"](function(t,n){function r(o,a){try{var u=e[o](a),s=u.value}catch(c){return void n(c)}return u.done?void t(s):i["default"].resolve(s).then(function(t){return r("next",t)},function(t){return r("throw",t)})}return r("next")})}}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(424),i=r(o);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={"default":n(425),__esModule:!0}},function(t,e,n){n(426);var r=n(324).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(346);r(r.S+r.F*!n(354),"Object",{defineProperty:n(350).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t
}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var i=(0,c["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var o=(0,c["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var a=n(322),u=r(a),s=n(325),c=r(s),f=n(359),l=r(f),d=n(428),h=r(d),p=n(422),v=r(p),y=n(423),g=r(y),m=function(){function t(e){var n=e.name,r=e.level;if((0,v["default"])(this,t),null==arguments[0]||"string"!=typeof arguments[0].name||"string"!=typeof arguments[0].level)throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ name: string;\n  level: string;\n}\n\nGot:\n"+i(arguments[0]));if(null==arguments[0]||"string"!=typeof arguments[0].name||"string"!=typeof arguments[0].level)throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ name: string;\n  level: string;\n}\n\nGot:\n"+o(arguments[0]));this.name=n,this.level=r}return(0,g["default"])(t,[{key:"setLevel",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "level" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof t)throw new TypeError('Value of argument "level" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));this.level=t}}]),t}(),b=["debug","log","info","warn","error"],_=b.reduce(function(t,e,n){return t[e]=n,t},{});b.forEach(function(t){var e=_[t];m.prototype[t]=function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];e<_[this.level]||(r=["["+this.name+"]"].concat((0,h["default"])(r)),Function.prototype.apply.call(console[t],console,r))}}),e["default"]=m,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(429),i=r(o);e["default"]=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,i["default"])(t)}},function(t,e,n){t.exports={"default":n(430),__esModule:!0}},function(t,e,n){n(362),n(431),t.exports=n(324).Array.from},function(t,e,n){"use strict";var r=n(347),o=n(346),i=n(328),a=n(402),u=n(403),s=n(337),c=n(404);o(o.S+o.F*!n(412)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,l=i(t),d="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,v=void 0!==p,y=0,g=c(l);if(v&&(p=r(p,h>2?arguments[2]:void 0,2)),void 0==g||d==Array&&u(g))for(e=s(l.length),n=new d(e);e>y;y++)n[y]=v?p(l[y],y):l[y];else for(f=g.call(l),n=new d;!(o=f.next()).done;y++)n[y]=v?a(f,p,[o.value,y],!0):o.value;return n.length=y,n}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=(arguments.length<=1||void 0===arguments[1]?"attachment":arguments[1],t.name);return e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(392),a=r(i),u=n(413),s=r(u),c=n(396),f=r(c),l=n(421),d=r(l),h=n(422),p=r(h),v=n(423),y=r(v),g=n(433),m=r(g),b=n(440),_=r(b),w=n(441),E=r(w),x=n(452),A=r(x),O=n(453),j=r(O),k=n(454),I=n(455),T=["get","post","put","patch","del"],S=function(){function t(e){(0,p["default"])(this,t),this.config=e,this.logger=e.logger,this._prefixBaseUrl=(0,A["default"])(this.config.baseUrl)}return(0,y["default"])(t,[{key:"setAuth",value:function(t,e){this._key=t,this._secret=e}},{key:"removeAuth",value:function(){this._key=null,this._secret=null}},{key:"getAuthHeader",value:function(){return this.getAuthHeaderForKeyAndSecret(this._key,this._secret)}},{key:"getAuthHeaderForKeyAndSecret",value:function(t,e){return t&&e?"Basic "+(0,_["default"])(t+":"+e):null}},{key:"_contentType",value:function(t){switch(t){case"json":return"application/json";case"event-stream":return"text/event-stream";case"text":default:return"plain/text"}}},{key:"downloadImageBlob",value:function(){var t=(0,d["default"])(s["default"].mark(function e(t){var n=this;return s["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.abrupt("return",(0,I.WEB_CODE)(function(){return new f["default"](function(e,r){var o=new XMLHttpRequest,i=n.config.baseUrl+t;o.open("GET",i,!0),o.setRequestHeader("Authorization",n.getAuthHeader()),o.responseType="blob",o.onreadystatechange=function(){4==o.readyState&&(o.status<200||o.status>299?r(new Error("Failed downloading "+i+". Status = "+o.status)):e(o.response))},o.send(null)})}));case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"downloadImageToFile",value:function(){var t=(0,d["default"])(s["default"].mark(function e(t,r){var o=this;return s["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("On Web use `downloadImageBlob`");case 2:return e.abrupt("return",(0,I.NODE_CODE)(function(){return new f["default"](function(e,i){var a=o.config.baseUrl+t;n(456)({url:a,headers:{Authorization:o.getAuthHeader()}},function(t,n){t||n.statusCode<200||n.statusCode>299?i(new Error("Failed downloading "+a+". Status = "+xhr.status)):e()}).pipe(fs.createWriteStream(r))})}));case 3:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"downloadImageAndGetURL",value:function(){var t=(0,d["default"])(s["default"].mark(function e(t){var n,r;return s["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.downloadImageBlob(t);case 3:return n=e.sent,r=URL.createObjectURL(n),e.abrupt("return",r);case 8:throw new Error("On Node.js use `downloadImageToFile`");case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();T.forEach(function(t){S.prototype[t]=function(){var e=(0,d["default"])(s["default"].mark(function n(e){var r,i,u=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=j["default"].defaults(c||{},{reqFormat:"json",resFormat:"json"}),c.urlParams&&(e=e.replace(/:([\w\-]+)/g,function(t,e){return encodeURIComponent(c.urlParams[e])})),this.logger&&this.logger.info("start",t.toUpperCase(),e,c),r=(0,a["default"])({},c.headers),j["default"].isEmpty(c.files)&&(r["Content-Type"]=r["Content-Type"]||this._contentType(c.reqFormat)),r.Accept=r.Accept||this._contentType(c.resFormat),c.requestId&&(r["Request-ID"]=c.requestId),i=new f["default"](function(n,i){var a=m["default"][t](e).use(u._prefixBaseUrl).set(r).query(c.query||{});j["default"].isEmpty(c.files)?a=a.send(c.data||{}):(j["default"].each(c.data,function(t,e){return a=a.field(e,t)}),j["default"].each(c.files,function(t,e,n){return a=a.attach(e,t,o(t,"attachment-"+n))}),a=a.send()),u._key&&u._secret&&(a=a.auth(u._key,u._secret)),a.end(function(r,o){if(r)return u.logger&&u.logger.info("error",t.toUpperCase(),e,r),401==r.status&&i(new E["default"].WrongCredentialsError),void i(r);switch(c.resFormat){case"json":var a=o.body||{};"reply"in a&&(a=a.reply);var s={data:a,headers:o.headers,getHeader:function(t){return o.headers[t.toLowerCase()]},status:o.status};Object.defineProperty(s,"_origData",{get:function(){return o.body}}),u.logger&&u.logger.info("success",t.toUpperCase(),e,s),n(s);break;default:u.logger&&u.logger.info("success",t.toUpperCase(),e,o.text?o.text.substr(0,80)+"...":"[null]"),n(o.text)}})}),n.abrupt("return",i);case 9:case"end":return n.stop()}},n,this)}));return function(t,n){return e.apply(this,arguments)}}()}),!function(){var t=S.prototype.get,e=(0,k.decorator)(t);S.prototype.get=function(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.reusePromise?e.call(this,n,r):t.call(this,n,r)}}(),e["default"]=S,t.exports=e["default"]},function(t,e,n){function r(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(t){if(!b(t))return t;var e=[];for(var n in t)null!=t[n]&&a(e,n,t[n]);return e.join("&")}function a(t,e,n){return Array.isArray(n)?n.forEach(function(n){a(t,e,n)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}function u(t){for(var e,n,r={},o=t.split("&"),i=0,a=o.length;a>i;++i)n=o[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function s(t){var e,n,r,o,i=t.split(/\r?\n/),a={};i.pop();for(var u=0,s=i.length;s>u;++u)n=i[u],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),o=w(n.slice(e+1)),a[r]=o;return a}function c(t){return/[\/+]json\b/.test(t)}function f(t){return t.split(/ *; */).shift()}function l(t){return g(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})}function d(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function h(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new d(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,t.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,t.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var o=new Error(e.statusText||"Unsuccessful HTTP response");o.original=t,o.response=e,o.status=e.status,n.callback(o,e)})}function p(t,e){var n=_("DELETE",t);return e&&n.end(e),n}var v,y=n(434),g=n(435),m=n(436),b=n(437);v="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var _=t.exports=n(439).bind(null,h);_.getXHR=function(){if(!(!v.XMLHttpRequest||v.location&&"file:"==v.location.protocol&&v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var w="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};_.serializeObject=i,_.parseString=u,_.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},_.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},_.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},d.prototype.get=function(t){return this.header[t.toLowerCase()]},d.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=f(e);var n=l(e);for(var r in n)this[r]=n[r]},d.prototype.parseBody=function(t){var e=_.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},d.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},d.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},_.Response=d,y(h.prototype);for(var E in m)h.prototype[E]=m[E];h.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},h.prototype.type=function(t){return this.set("Content-Type",_.types[t]||t),this},h.prototype.responseType=function(t){return this._responseType=t,this},h.prototype.accept=function(t){return this.set("Accept",_.types[t]||t),this},h.prototype.auth=function(t,e,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(t+":"+e);this.set("Authorization","Basic "+r);break;case"auto":this.username=t,this.password=e}return this},h.prototype.query=function(t){return"string"!=typeof t&&(t=i(t)),t&&this._query.push(t),this},h.prototype.attach=function(t,e,n){return this._formData||(this._formData=new v.FormData),this._formData.append(t,e,n||e.name),this},h.prototype.send=function(t){var e=b(t),n=this._header["content-type"];if(e&&b(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||o(t)?this:(n||this.type("json"),this)},h.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},h.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},h.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(t){var e=this,n=this.xhr=_.getXHR(),i=this._query.join("&"),a=this._timeout,u=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),t.direction="download",e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=s);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=s)}catch(f){}if(a&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},a)),i&&(i=_.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!o(u)){var l=this._header["content-type"],d=this._parser||_.serialize[l?l.split(";")[0]:""];!d&&c(l)&&(d=_.serialize["application/json"]),d&&(u=d(u))}for(var h in this.header)null!=this.header[h]&&n.setRequestHeader(h,this.header[h]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof u?u:null),this},_.Request=h,_.get=function(t,e,n){var r=_("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},_.head=function(t,e,n){var r=_("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},_.del=p,_["delete"]=p,_.patch=function(t,e,n){var r=_("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},_.post=function(t,e,n){var r=_("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},_.put=function(t,e,n){var r=_("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=function(t,e,n){for(var r=0,o=t.length,i=3==arguments.length?n:t[r++];o>r;)i=e.call(null,i,t[r],++r,t);return i}},function(t,e,n){var r=n(437);e.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},e.parse=function(t){return this._parser=t,this},e.timeout=function(t){return this._timeout=t,this},e.then=function(t,e){return this.end(function(n,r){n?e(n):t(r)})},e.use=function(t){return t(this),this},e.get=function(t){return this._header[t.toLowerCase()]},e.getHeader=e.get,e.set=function(t,e){if(r(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},e.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},e.field=function(t,e){if(!this._formData){var r=n(438);this._formData=new r}return this._formData.append(t,e),this}},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e){t.exports=FormData},function(t,e){function n(t,e,n){return"function"==typeof n?new t("GET",e).end(n):2==arguments.length?new t("GET",e):new t(e,n)}t.exports=n},function(t,e,n){(function(e){!function(){"use strict";function n(t){var n;return n=t instanceof e?t:new e(t.toString(),"binary"),n.toString("base64")}t.exports=n}()}).call(e,n(297).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={NotSignedInError:n(442),WrongCredentialsError:n(448),NotFoundError:n(449),PermissionDeniedError:n(450),ValidationError:n(451)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(443),u=r(a),s=n(422),c=r(s),f=n(446),l=r(f),d=n(447),h=r(d),p=(i=o=function(t){function e(){var t;(0,c["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,l["default"])(this,(t=(0,u["default"])(e)).call.apply(t,[this].concat(r)));return i.code=e.CODE,i}return(0,h["default"])(e,t),e}(Error),o.CODE="not-signed-in",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(444),__esModule:!0}},function(t,e,n){n(445),t.exports=n(324).Object.getPrototypeOf},function(t,e,n){var r=n(328),o=n(374);n(345)("getPrototypeOf",function(){return function(t){return o(r(t))}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(359),i=r(o);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,i["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(415),i=r(o),a=n(418),u=r(a),s=n(359),c=r(s);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,c["default"])(e)));t.prototype=(0,u["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i["default"]?(0,i["default"])(t,e):t.__proto__=e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(443),u=r(a),s=n(422),c=r(s),f=n(446),l=r(f),d=n(447),h=r(d),p=(i=o=function(t){function e(){var t;(0,c["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,l["default"])(this,(t=(0,u["default"])(e)).call.apply(t,[this].concat(r)));return i.code=e.CODE,i}return(0,h["default"])(e,t),e}(Error),o.CODE="wrong-credentials",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(443),u=r(a),s=n(422),c=r(s),f=n(446),l=r(f),d=n(447),h=r(d),p=(i=o=function(t){function e(t,n,r){(0,c["default"])(this,e);var o=(0,l["default"])(this,(0,u["default"])(e).call(this,r));return o.code=e.CODE,o.resource=t,o.id=n,o}return(0,h["default"])(e,t),e}(Error),o.CODE="not-found",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(443),u=r(a),s=n(422),c=r(s),f=n(446),l=r(f),d=n(447),h=r(d),p=(i=o=function(t){function e(t,n,r){var o=arguments.length<=3||void 0===arguments[3]?"can't perform action "+r+" on "+(t.name||t)+" #"+n:arguments[3];(0,c["default"])(this,e);var i=(0,l["default"])(this,(0,u["default"])(e).call(this,o));return i.code=e.CODE,i.resource=t,i.action=r,i.id=n,i}return(0,h["default"])(e,t),e}(Error),o.CODE="permission-denied",i);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,i,a=n(443),u=r(a),s=n(422),c=r(s),f=n(446),l=r(f),d=n(447),h=r(d),p=(i=o=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?"invalid":arguments[1],r=arguments.length<=2||void 0===arguments[2]?t+" is "+n:arguments[2];(0,c["default"])(this,e);var o=(0,l["default"])(this,(0,u["default"])(e).call(this,r));return o.code=e.CODE,o.name=t,o.reason=n,o}return(0,h["default"])(e,t),e}(Error),o.CODE="validation",i);e["default"]=p,t.exports=e["default"]},function(t,e){t.exports=function(t){return function(e){return"/"===e.url[0]&&(e.url=t+e.url),e}}},function(t,e,n){var r;(function(t,o){(function(){function i(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function u(t,e,n){var r=n.length;switch(r){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function s(t,e,n,r){for(var o=-1,i=t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function c(t,e){for(var n=-1,r=t.length,o=-1,i=e.length,a=Array(r+i);++n<r;)a[n]=t[n];for(;++o<i;)a[n++]=e[o];return a}function f(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function d(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function h(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function p(t,e){return!!t.length&&A(t,e,0)>-1}function v(t,e,n){for(var r=-1,o=t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function y(t,e){for(var n=-1,r=t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function g(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function m(t,e,n,r){var o=-1,i=t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function b(t,e,n,r){var o=t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function _(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function w(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],a=e(i);if(null!=a&&(u===Q?a===a:n(a,u)))var u=a,s=i}return s}function E(t,e,n,r){var o;return n(t,function(t,n,i){return e(t,n,i)?(o=r?n:t,!1):void 0}),o}function x(t,e,n){for(var r=t.length,o=n?r:-1;n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function A(t,e,n){if(e!==e)return N(t,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function O(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function j(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function k(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function I(t,e){for(var n,r=-1,o=t.length;++r<o;){var i=e(t[r]);i!==Q&&(n=n===Q?i:n+i)}return n}function T(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function S(t,e){return y(e,function(e){return[e,t[e]]})}function M(t){return function(e){return t(e)}}function C(t,e){return y(e,function(e){return t[e]})}function P(t,e){for(var n=-1,r=t.length;++n<r&&A(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length;n--&&A(e,t[n],0)>-1;);return n}function R(t){return t&&t.Object===Object?t:null}function D(t,e){if(t!==e){var n=null===t,r=t===Q,o=t===t,i=null===e,a=e===Q,u=e===e;if(t>e&&!i||!o||n&&!a&&u||r&&u)return 1;if(e>t&&!n||!u||i&&!r&&o||a&&o)return-1}return 0}function F(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,a=o.length,u=n.length;++r<a;){var s=D(o[r],i[r]);if(s){if(r>=u)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}function G(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&r++;return r}function z(t){return An[t]}function L(t){return On[t]}function V(t){return"\\"+In[t]}function N(t,e,n){for(var r=t.length,o=e+(n?0:-1);n?o--:++o<r;){var i=t[o];if(i!==i)return o}return-1}function U(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function $(t,e){return t="number"==typeof t||Te.test(t)?+t:-1,e=null==e?Ot:e,t>-1&&t%1==0&&e>t}function q(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function K(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];a!==e&&a!==ot||(t[n]=ot,i[o++]=n)}return i}function H(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Y(t){if(!t||!yn.test(t))return t.length;for(var e=vn.lastIndex=0;vn.test(t);)e++;return e}function Z(t){return t.match(vn)}function X(t){return jn[t]}function J(t){function e(t){if(Va(t)&&!kf(t)&&!(t instanceof o)){if(t instanceof r)return t;if(Hs.call(t,"__wrapped__"))return Ro(t)}return new r(t)}function n(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Q}function o(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=It,this.__views__=[]}function R(){var t=new o(this.__wrapped__);return t.__actions__=zr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=zr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=zr(this.__views__),t}function Te(){if(this.__filtered__){var t=new o(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Pe(){var t=this.__wrapped__.value(),e=this.__dir__,n=kf(t),r=0>e,o=n?t.length:0,i=mo(0,o,this.__views__),a=i.start,u=i.end,s=u-a,c=r?u:a-1,f=this.__iteratees__,l=f.length,d=0,h=bc(s,this.__takeCount__);if(!n||et>o||o==s&&h==s)return kr(t,this.__actions__);var p=[];t:for(;s--&&h>d;){c+=e;for(var v=-1,y=t[c];++v<l;){var g=f[v],m=g.iteratee,b=g.type,_=m(y);if(b==Et)y=_;else if(!_){if(b==wt)continue t;break t}}p[d++]=y}return p}function Be(){}function Re(t,e){return Fe(t,e)&&delete t[e]}function De(t,e){if(jc){var n=t[e];return n===rt?Q:n}return Hs.call(t,e)?t[e]:Q}function Fe(t,e){return jc?t[e]!==Q:Hs.call(t,e)}function Ge(t,e,n){t[e]=jc&&n===Q?rt:n}function ze(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Le(){this.__data__={hash:new Be,map:xc?new xc:[],string:new Be}}function Ve(t){var e=this.__data__;return jo(t)?Re("string"==typeof t?e.string:e.hash,t):xc?e.map["delete"](t):tn(e.map,t)}function Ne(t){var e=this.__data__;return jo(t)?De("string"==typeof t?e.string:e.hash,t):xc?e.map.get(t):en(e.map,t)}function Ue(t){var e=this.__data__;return jo(t)?Fe("string"==typeof t?e.string:e.hash,t):xc?e.map.has(t):nn(e.map,t)}function $e(t,e){var n=this.__data__;return jo(t)?Ge("string"==typeof t?n.string:n.hash,t,e):xc?n.map.set(t,e):on(n.map,t,e),this}function qe(t){var e=-1,n=t?t.length:0;for(this.__data__=new ze;++e<n;)this.push(t[e])}function We(t,e){var n=t.__data__;if(jo(e)){var r=n.__data__,o="string"==typeof e?r.string:r.hash;return o[e]===rt}return n.has(e)}function Ke(t){var e=this.__data__;if(jo(t)){var n=e.__data__,r="string"==typeof t?n.string:n.hash;r[t]=rt}else e.set(t,rt)}function He(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ye(){this.__data__={array:[],map:null}}function Ze(t){var e=this.__data__,n=e.array;return n?tn(n,t):e.map["delete"](t)}function Xe(t){var e=this.__data__,n=e.array;return n?en(n,t):e.map.get(t)}function Je(t){var e=this.__data__,n=e.array;return n?nn(n,t):e.map.has(t)}function Qe(t,e){var n=this.__data__,r=n.array;r&&(r.length<et-1?on(r,t,e):(n.array=null,n.map=new ze(r)));var o=n.map;return o&&o.set(t,e),this}function tn(t,e){var n=rn(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():dc.call(t,n,1),!0}function en(t,e){var n=rn(t,e);return 0>n?Q:t[n][1]}function nn(t,e){return rn(t,e)>-1}function rn(t,e){for(var n=t.length;n--;)if(Ea(t[n][0],e))return n;return-1}function on(t,e,n){var r=rn(t,e);0>r?t.push([e,n]):t[r][1]=n}function an(t,e,n,r){return t===Q||Ea(t,Ws[n])&&!Hs.call(r,n)?e:t}function un(t,e,n){(n===Q||Ea(t[e],n))&&("number"!=typeof e||n!==Q||e in t)||(t[e]=n)}function sn(t,e,n){var r=t[e];Hs.call(t,e)&&Ea(r,n)&&(n!==Q||e in t)||(t[e]=n)}function cn(t,e,n,r){return Dc(t,function(t,o,i){e(r,t,n(t),i)}),r}function fn(t,e){return t&&Lr(e,ku(e),t)}function ln(t,e){for(var n=-1,r=null==t,o=e.length,i=Array(o);++n<o;)i[n]=r?Q:Au(t,e[n]);return i}function dn(t){return Ia(t)?t:[]}function hn(t){return"function"==typeof t?t:ms}function vn(t){return kf(t)?t:Bo(t)}function An(t,e,n){return t===t&&(n!==Q&&(t=n>=t?t:n),e!==Q&&(t=t>=e?t:e)),t}function On(t,e,n,r,o,i,a){
var u;if(r&&(u=i?r(t,o,i,a):r(t)),u!==Q)return u;if(!La(t))return t;var s=kf(t);if(s){if(u=_o(t),!e)return zr(t,u)}else{var c=go(t),l=c==Dt||c==Ft;if(If(t))return Sr(t,e);if(c==Lt||c==Mt||l&&!i){if(U(t))return i?t:{};if(u=wo(l?{}:t),!e)return u=fn(u,t),n?Nr(t,u):u}else{if(!xn[c])return i?t:{};u=Eo(t,c,e)}}a||(a=new He);var d=a.get(t);return d?d:(a.set(t,u),(s?f:Ln)(t,function(o,i){sn(u,i,On(o,e,n,r,i,t,a))}),n&&!s?Nr(t,u):u)}function jn(t){var e=ku(t),n=e.length;return function(r){if(null==r)return!n;for(var o=n;o--;){var i=e[o],a=t[i],u=r[i];if(u===Q&&!(i in Object(r))||!a(u))return!1}return!0}}function kn(t){return La(t)?cc(t):{}}function In(t,e,n){if("function"!=typeof t)throw new $s(nt);return lc(function(){t.apply(Q,n)},e)}function Mn(t,e,n,r){var o=-1,i=p,a=!0,u=t.length,s=[],c=e.length;if(!u)return s;n&&(e=y(e,M(n))),r?(i=v,a=!1):e.length>=et&&(i=We,a=!1,e=new qe(e));t:for(;++o<u;){var f=t[o],l=n?n(f):f;if(a&&l===l){for(var d=c;d--;)if(e[d]===l)continue t;s.push(f)}else i(e,l,r)||s.push(f)}return s}function Cn(t,e){var n=!0;return Dc(t,function(t,r,o){return n=!!e(t,r,o)}),n}function Bn(t,e,n,r){var o=t.length;for(n=cu(n),0>n&&(n=-n>o?0:o+n),r=r===Q||r>o?o:cu(r),0>r&&(r+=o),r=n>r?0:fu(r);r>n;)t[n++]=e;return t}function Rn(t,e){var n=[];return Dc(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function Dn(t,e,n,r){r||(r=[]);for(var o=-1,i=t.length;++o<i;){var a=t[o];e>0&&Ia(a)&&(n||kf(a)||Oa(a))?e>1?Dn(a,e-1,n,r):g(r,a):n||(r[r.length]=a)}return r}function Fn(t,e){return null==t?t:Gc(t,e,Iu)}function Ln(t,e){return t&&Gc(t,e,ku)}function Vn(t,e){return t&&zc(t,e,ku)}function Nn(t,e){return h(e,function(e){return Fa(t[e])})}function Un(t,e){e=Oo(e,t)?[e+""]:vn(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:Q}function $n(t,e){return Hs.call(t,e)||"object"==typeof t&&e in t&&null===ac(t)}function qn(t,e){return e in Object(t)}function Wn(t,e,n){return t>=bc(e,n)&&t<mc(e,n)}function Kn(t,e,n){for(var r=n?v:p,o=t[0].length,i=t.length,a=i,u=Array(i),s=1/0,c=[];a--;){var f=t[a];a&&e&&(f=y(f,M(e))),s=bc(f.length,s),u[a]=!n&&(e||o>=120&&f.length>=120)?new qe(a&&f):Q}f=t[0];var l=-1,d=u[0];t:for(;++l<o&&c.length<s;){var h=f[l],g=e?e(h):h;if(!(d?We(d,g):r(c,g,n))){for(a=i;--a;){var m=u[a];if(!(m?We(m,g):r(t[a],g,n)))continue t}d&&d.push(g),c.push(h)}}return c}function Hn(t,e,n,r){return Ln(t,function(t,o,i){e(r,n(t),o,i)}),r}function Yn(t,e,n){Oo(e,t)||(e=vn(e),t=Co(t,e),e=Qo(e));var r=null==t?t:t[e];return null==r?Q:u(r,t,n)}function Zn(t,e,n,r,o){return t===e?!0:null==t||null==e||!La(t)&&!Va(e)?t!==t&&e!==e:Xn(t,e,Zn,n,r,o)}function Xn(t,e,n,r,o,i){var a=kf(t),u=kf(e),s=Ct,c=Ct;a||(s=go(t),s=s==Mt?Lt:s),u||(c=go(e),c=c==Mt?Lt:c);var f=s==Lt&&!U(t),l=c==Lt&&!U(e),d=s==c;if(d&&!f)return i||(i=new He),a||nu(t)?so(t,e,n,r,o,i):co(t,e,s,n,r,o,i);if(!(o&yt)){var h=f&&Hs.call(t,"__wrapped__"),p=l&&Hs.call(e,"__wrapped__");if(h||p)return i||(i=new He),n(h?t.value():t,p?e.value():e,r,o,i)}return d?(i||(i=new He),fo(t,e,n,r,o,i)):!1}function Jn(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){u=n[o];var s=u[0],c=t[s],f=u[1];if(a&&u[2]){if(c===Q&&!(s in t))return!1}else{var l=new He,d=r?r(c,f,s,t,e,l):Q;if(!(d===Q?Zn(f,c,r,vt|yt,l):d))return!1}}return!0}function Qn(t){var e=typeof t;return"function"==e?t:null==t?ms:"object"==e?kf(t)?or(t[0],t[1]):rr(t):js(t)}function tr(t){return gc(Object(t))}function er(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function nr(t,e){var n=-1,r=ka(t)?Array(t.length):[];return Dc(t,function(t,o,i){r[++n]=e(t,o,i)}),r}function rr(t){var e=po(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==Q||n in Object(t))}}return function(n){return n===t||Jn(n,t,e)}}function or(t,e){return function(n){var r=Au(n,t);return r===Q&&r===e?ju(n,t):Zn(e,r,Q,vt|yt)}}function ir(t,e,n,r,o){if(t!==e){var i=kf(e)||nu(e)?Q:Iu(e);f(i||e,function(a,u){if(i&&(u=a,a=e[u]),La(a))o||(o=new He),ar(t,e,u,n,ir,r,o);else{var s=r?r(t[u],a,u+"",t,e,o):Q;s===Q&&(s=a),un(t,u,s)}})}}function ar(t,e,n,r,o,i,a){var u=t[n],s=e[n],c=a.get(s);if(c)return void un(t,n,c);var f=i?i(u,s,n+"",t,e,a):Q,l=f===Q;l&&(f=s,kf(s)||nu(s)?kf(u)?f=u:Ia(u)?f=zr(u):(l=!1,f=On(s,!i)):Za(s)||Oa(s)?Oa(u)?f=du(u):!La(u)||r&&Fa(u)?(l=!1,f=On(s,!i)):f=u:l=!1),a.set(s,f),l&&o(f,s,r,i,a),a["delete"](s),un(t,n,f)}function ur(t,e,n){var r=-1;e=y(e.length?e:Array(1),ho());var o=nr(t,function(t,n,o){var i=y(e,function(e){return e(t)});return{criteria:i,index:++r,value:t}});return k(o,function(t,e){return F(t,e,n)})}function sr(t,e){return t=Object(t),m(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function cr(t,e){var n={};return Fn(t,function(t,r){e(t,r)&&(n[r]=t)}),n}function fr(t){return function(e){return null==e?Q:e[t]}}function lr(t){return function(e){return Un(e,t)}}function dr(t,e,n,r){var o=r?O:A,i=-1,a=e.length,u=t;for(n&&(u=y(t,M(n)));++i<a;)for(var s=0,c=e[i],f=n?n(c):c;(s=o(u,f,s,r))>-1;)u!==t&&dc.call(u,s,1),dc.call(t,s,1);return t}function hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(r==n||o!=i){var i=o;if($(o))dc.call(t,o,1);else if(Oo(o,t))delete t[o];else{var a=vn(o),u=Co(t,a);null!=u&&delete u[Qo(a)]}}}return t}function pr(t,e){return t+pc(wc()*(e-t+1))}function vr(t,e,n,r){for(var o=-1,i=mc(hc((e-t)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=t,t+=n;return a}function yr(t,e,n,r){e=Oo(e,t)?[e+""]:vn(e);for(var o=-1,i=e.length,a=i-1,u=t;null!=u&&++o<i;){var s=e[o];if(La(u)){var c=n;if(o!=a){var f=u[s];c=r?r(f,s,u):Q,c===Q&&(c=null==f?$(e[o+1])?[]:{}:f)}sn(u,s,c)}u=u[s]}return t}function gr(t,e,n){var r=-1,o=t.length;0>e&&(e=-e>o?0:o+e),n=n>o?o:n,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}function mr(t,e){var n;return Dc(t,function(t,r,o){return n=e(t,r,o),!n}),!!n}function br(t,e,n){var r=0,o=t?t.length:r;if("number"==typeof e&&e===e&&St>=o){for(;o>r;){var i=r+o>>>1,a=t[i];(n?e>=a:e>a)&&null!==a?r=i+1:o=i}return o}return _r(t,e,ms,n)}function _r(t,e,n,r){e=n(e);for(var o=0,i=t?t.length:0,a=e!==e,u=null===e,s=e===Q;i>o;){var c=pc((o+i)/2),f=n(t[c]),l=f!==Q,d=f===f;if(a)var h=d||r;else h=u?d&&l&&(r||null!=f):s?d&&(r||l):null==f?!1:r?e>=f:e>f;h?o=c+1:i=c}return bc(i,Tt)}function wr(t){return Er(t)}function Er(t,e){for(var n=0,r=t.length,o=t[0],i=e?e(o):o,a=i,u=1,s=[o];++n<r;)o=t[n],i=e?e(o):o,Ea(i,a)||(a=i,s[u++]=o);return s}function xr(t,e,n){var r=-1,o=p,i=t.length,a=!0,u=[],s=u;if(n)a=!1,o=v;else if(i>=et){var c=e?null:Vc(t);if(c)return H(c);a=!1,o=We,s=new qe}else s=e?[]:u;t:for(;++r<i;){var f=t[r],l=e?e(f):f;if(a&&l===l){for(var d=s.length;d--;)if(s[d]===l)continue t;e&&s.push(l),u.push(f)}else o(s,l,n)||(s!==u&&s.push(l),u.push(f))}return u}function Ar(t,e){e=Oo(e,t)?[e+""]:vn(e),t=Co(t,e);var n=Qo(e);return null!=t&&Ou(t,n)?delete t[n]:!0}function Or(t,e,n,r){return yr(t,e,n(Un(t,e)),r)}function jr(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?gr(t,r?0:i,r?i+1:o):gr(t,r?i+1:0,r?o:i)}function kr(t,e){var n=t;return n instanceof o&&(n=n.value()),m(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function Ir(t,e,n){for(var r=-1,o=t.length;++r<o;)var i=i?g(Mn(i,t[r],e,n),Mn(t[r],i,e,n)):t[r];return i&&i.length?xr(i,e,n):[]}function Tr(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;)n(a,t[r],i>r?e[r]:Q);return a}function Sr(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function Mr(t){var e=new t.constructor(t.byteLength);return new rc(e).set(new rc(t)),e}function Cr(t){return m(W(t),i,new t.constructor)}function Pr(t){var e=new t.constructor(t.source,xe.exec(t));return e.lastIndex=t.lastIndex,e}function Br(t){return m(H(t),a,new t.constructor)}function Rr(t){return Bc?Object(Bc.call(t)):{}}function Dr(t,e){var n=e?Mr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Fr(t,e,n,r){for(var o=-1,i=t.length,a=n.length,u=-1,s=e.length,c=mc(i-a,0),f=Array(s+c),l=!r;++u<s;)f[u]=e[u];for(;++o<a;)(l||i>o)&&(f[n[o]]=t[o]);for(;c--;)f[u++]=t[o++];return f}function Gr(t,e,n,r){for(var o=-1,i=t.length,a=-1,u=n.length,s=-1,c=e.length,f=mc(i-u,0),l=Array(f+c),d=!r;++o<f;)l[o]=t[o];for(var h=o;++s<c;)l[h+s]=e[s];for(;++a<u;)(d||i>o)&&(l[h+n[a]]=t[o++]);return l}function zr(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Lr(t,e,n){return Vr(t,e,n)}function Vr(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],u=r?r(n[a],t[a],a,n,t):t[a];sn(n,a,u)}return n}function Nr(t,e){return Lr(t,$c(t),e)}function Ur(t,e){return function(n,r){var o=kf(n)?s:cn,i=e?e():{};return o(n,t,ho(r),i)}}function $r(t){return da(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:Q,a=o>2?n[2]:Q;for(i="function"==typeof i?(o--,i):Q,a&&Ao(n[0],n[1],a)&&(i=3>o?Q:i,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,i)}return e})}function qr(t,e){return function(n,r){if(null==n)return n;if(!ka(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}function Wr(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(n(i[s],s,i)===!1)break}return e}}function Kr(t,e,n){function r(){var e=this&&this!==Gn&&this instanceof r?i:t;return e.apply(o?n:this,arguments)}var o=e&it,i=Zr(t);return r}function Hr(t){return function(e){e=pu(e);var n=yn.test(e)?Z(e):Q,r=n?n[0]:e.charAt(0),o=n?n.slice(1).join(""):e.slice(1);return r[t]()+o}}function Yr(t){return function(e){return m(ps(Hu(e)),t,"")}}function Zr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=kn(t.prototype),r=t.apply(n,e);return La(r)?r:n}}function Xr(t,e,n){function r(){for(var i=arguments.length,a=Array(i),s=i,c=yo(r);s--;)a[s]=arguments[s];var f=3>i&&a[0]!==c&&a[i-1]!==c?[]:K(a,c);if(i-=f.length,n>i)return io(t,e,Qr,r.placeholder,Q,a,f,Q,Q,n-i);var l=this&&this!==Gn&&this instanceof r?o:t;return u(l,this,a)}var o=Zr(t);return r}function Jr(t){return da(function(e){e=Dn(e,1);var n=e.length,o=n,i=r.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new $s(nt);if(i&&!u&&"wrapper"==lo(a))var u=new r([],!0)}for(o=u?o:n;++o<n;){a=e[o];var s=lo(a),c="wrapper"==s?Nc(a):Q;u=c&&ko(c[0])&&c[1]==(dt|st|ft|ht)&&!c[4].length&&1==c[9]?u[lo(c[0])].apply(u,c[3]):1==a.length&&ko(a)?u[s]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&kf(r)&&r.length>=et)return u.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}})}function Qr(t,e,n,r,o,i,a,u,s,c){function f(){for(var g=arguments.length,m=g,b=Array(g);m--;)b[m]=arguments[m];if(p)var _=yo(f),w=G(b,_);if(r&&(b=Fr(b,r,o,p)),i&&(b=Gr(b,i,a,p)),g-=w,p&&c>g){var E=K(b,_);return io(t,e,Qr,f.placeholder,n,b,E,u,s,c-g)}var x=d?n:this,A=h?x[t]:t;return g=b.length,u?b=Po(b,u):v&&g>1&&b.reverse(),l&&g>s&&(b.length=s),this&&this!==Gn&&this instanceof f&&(A=y||Zr(A)),A.apply(x,b)}var l=e&dt,d=e&it,h=e&at,p=e&(st|ct),v=e&pt,y=h?Q:Zr(t);return f}function to(t,e){return function(n,r){return Hn(n,t,e(r),{})}}function eo(t){return da(function(e){return e=y(Dn(e,1),ho()),da(function(n){var r=this;return t(e,function(t){return u(t,r,n)})})})}function no(t,e,n){e=cu(e);var r=Y(t);if(!e||r>=e)return"";var o=e-r;n=n===Q?" ":n+"";var i=ns(n,hc(o/Y(n)));return yn.test(n)?Z(i).slice(0,o).join(""):i.slice(0,o)}function ro(t,e,n,r){function o(){for(var e=-1,s=arguments.length,c=-1,f=r.length,l=Array(f+s),d=this&&this!==Gn&&this instanceof o?a:t;++c<f;)l[c]=r[c];for(;s--;)l[c++]=arguments[++e];return u(d,i?n:this,l)}var i=e&it,a=Zr(t);return o}function oo(t){return function(e,n,r){return r&&"number"!=typeof r&&Ao(e,n,r)&&(n=r=Q),e=lu(e),e=e===e?e:0,n===Q?(n=e,e=0):n=lu(n)||0,r=r===Q?n>e?1:-1:lu(r)||0,vr(e,n,r,t)}}function io(t,e,n,r,o,i,a,u,s,c){var f=e&st,l=u?zr(u):Q,d=f?a:Q,h=f?Q:a,p=f?i:Q,v=f?Q:i;e|=f?ft:lt,e&=~(f?lt:ft),e&ut||(e&=~(it|at));var y=[t,e,o,p,d,v,h,l,s,c],g=n.apply(Q,y);return ko(t)&&qc(g,y),g.placeholder=r,g}function ao(t){var e=Ns[t];return function(t,n){if(t=lu(t),n=cu(n)){var r=(pu(t)+"e").split("e"),o=e(r[0]+"e"+(+r[1]+n));return r=(pu(o)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function uo(t,e,n,r,o,i,a,u){var s=e&at;if(!s&&"function"!=typeof t)throw new $s(nt);var c=r?r.length:0;if(c||(e&=~(ft|lt),r=o=Q),a=a===Q?a:mc(cu(a),0),u=u===Q?u:cu(u),c-=o?o.length:0,e&lt){var f=r,l=o;r=o=Q}var d=s?Q:Nc(t),h=[t,e,n,r,o,f,l,i,a,u];if(d&&So(h,d),t=h[0],e=h[1],n=h[2],r=h[3],o=h[4],u=h[9]=null==h[9]?s?0:t.length:mc(h[9]-c,0),!u&&e&(st|ct)&&(e&=~(st|ct)),e&&e!=it)p=e==st||e==ct?Xr(t,e,u):e!=ft&&e!=(it|ft)||o.length?Qr.apply(Q,h):ro(t,e,n,r);else var p=Kr(t,e,n);var v=d?Lc:qc;return v(p,h)}function so(t,e,n,r,o,i){var a=-1,u=o&yt,s=o&vt,c=t.length,f=e.length;if(c!=f&&!(u&&f>c))return!1;var l=i.get(t);if(l)return l==e;var d=!0;for(i.set(t,e);++a<c;){var h=t[a],p=e[a];if(r)var v=u?r(p,h,a,e,t,i):r(h,p,a,t,e,i);if(v!==Q){if(v)continue;d=!1;break}if(s){if(!_(e,function(t){return h===t||n(h,t,r,o,i)})){d=!1;break}}else if(h!==p&&!n(h,p,r,o,i)){d=!1;break}}return i["delete"](t),d}function co(t,e,n,r,o,i,a){switch(n){case Kt:return!(t.byteLength!=e.byteLength||!r(new rc(t),new rc(e)));case Pt:case Bt:return+t==+e;case Rt:return t.name==e.name&&t.message==e.message;case zt:return t!=+t?e!=+e:t==+e;case Vt:case Ut:return t==e+"";case Gt:var u=W;case Nt:var s=i&yt;if(u||(u=H),t.size!=e.size&&!s)return!1;var c=a.get(t);return c?c==e:so(u(t),u(e),r,o,i|vt,a.set(t,e));case $t:if(Bc)return Bc.call(t)==Bc.call(e)}return!1}function fo(t,e,n,r,o,i){var a=o&yt,u=ku(t),s=u.length,c=ku(e),f=c.length;if(s!=f&&!a)return!1;for(var l=s;l--;){var d=u[l];if(!(a?d in e:$n(e,d)))return!1}var h=i.get(t);if(h)return h==e;var p=!0;i.set(t,e);for(var v=a;++l<s;){d=u[l];var y=t[d],g=e[d];if(r)var m=a?r(g,y,d,e,t,i):r(y,g,d,t,e,i);if(!(m===Q?y===g||n(y,g,r,o,i):m)){p=!1;break}v||(v="constructor"==d)}if(p&&!v){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return i["delete"](t),p}function lo(t){for(var e=t.name+"",n=Tc[e],r=Hs.call(Tc,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function ho(){var t=e.iteratee||bs;return t=t===bs?Qn:t,arguments.length?t(arguments[0],arguments[1]):t}function po(t){for(var e=Du(t),n=e.length;n--;)e[n][2]=To(e[n][1]);return e}function vo(t,e){var n=t[e];return Wa(n)?n:Q}function yo(t){var n=Hs.call(e,"placeholder")?e:t;return n.placeholder}function go(t){return Xs.call(t)}function mo(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=bc(e,t+a);break;case"takeRight":t=mc(t,e-a)}}return{start:t,end:e}}function bo(t,e,n){if(null==t)return!1;var r=n(t,e);r||Oo(e)||(e=vn(e),t=Co(t,e),null!=t&&(e=Qo(e),r=n(t,e)));var o=t?t.length:Q;return r||!!o&&za(o)&&$(e,o)&&(kf(t)||tu(t)||Oa(t))}function _o(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Hs.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function wo(t){return"function"!=typeof t.constructor||Io(t)?{}:kn(ac(t))}function Eo(t,e,n){var r=t.constructor;switch(e){case Kt:return Mr(t);case Pt:case Bt:return new r(+t);case Ht:case Yt:case Zt:case Xt:case Jt:case Qt:case te:case ee:case ne:return Dr(t,n);case Gt:return Cr(t);case zt:case Ut:return new r(t);case Vt:return Pr(t);case Nt:return Br(t);case $t:return Rr(t)}}function xo(t){var e=t?t.length:Q;return za(e)&&(kf(t)||tu(t)||Oa(t))?T(e,String):null}function Ao(t,e,n){if(!La(n))return!1;var r=typeof e;return("number"==r?ka(n)&&$(e,n.length):"string"==r&&e in n)?Ea(n[e],t):!1}function Oo(t,e){return"number"==typeof t?!0:!kf(t)&&(pe.test(t)||!he.test(t)||null!=e&&t in Object(e))}function jo(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function ko(t){var n=lo(t),r=e[n];if("function"!=typeof r||!(n in o.prototype))return!1;if(t===r)return!0;var i=Nc(r);return!!i&&t===i[0]}function Io(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Ws;return t===n}function To(t){return t===t&&!La(t)}function So(t,e){var n=t[1],r=e[1],o=n|r,i=(it|at|dt)>o,a=r==dt&&n==st||r==dt&&n==ht&&t[7].length<=e[8]||r==(dt|ht)&&e[7].length<=e[8]&&n==st;if(!i&&!a)return t;r&it&&(t[2]=e[2],o|=n&it?0:ut);var u=e[3];if(u){var s=t[3];t[3]=s?Fr(s,u,e[4]):zr(u),t[4]=s?K(t[3],ot):zr(e[4])}return u=e[5],u&&(s=t[5],t[5]=s?Gr(s,u,e[6]):zr(u),t[6]=s?K(t[5],ot):zr(e[6])),u=e[7],u&&(t[7]=zr(u)),r&dt&&(t[8]=null==t[8]?e[8]:bc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Mo(t,e,n,r,o,i){return La(t)&&La(e)&&ir(t,e,Q,Mo,i.set(e,t)),t}function Co(t,e){return 1==e.length?t:Au(t,gr(e,0,-1))}function Po(t,e){for(var n=t.length,r=bc(e.length,n),o=zr(t);r--;){var i=e[r];t[r]=$(i,n)?o[i]:Q}return t}function Bo(t){var e=[];return pu(t).replace(ve,function(t,n,r,o){e.push(r?o.replace(we,"$1"):n||t)}),e}function Ro(t){if(t instanceof o)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=zr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Do(t,e){e=mc(cu(e),0);var n=t?t.length:0;if(!n||1>e)return[];for(var r=0,o=0,i=Array(hc(n/e));n>r;)i[o++]=gr(t,r,r+=e);return i}function Fo(t){for(var e=-1,n=t?t.length:0,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o}function Go(t,e,n){var r=t?t.length:0;return r?(e=n||e===Q?1:cu(e),gr(t,0>e?0:e,r)):[]}function zo(t,e,n){var r=t?t.length:0;return r?(e=n||e===Q?1:cu(e),e=r-e,gr(t,0,0>e?0:e)):[]}function Lo(t,e){return t&&t.length?jr(t,ho(e,3),!0,!0):[]}function Vo(t,e){return t&&t.length?jr(t,ho(e,3),!0):[]}function No(t,e,n,r){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&Ao(t,e,n)&&(n=0,r=o),Bn(t,e,n,r)):[]}function Uo(t,e){return t&&t.length?x(t,ho(e,3)):-1}function $o(t,e){return t&&t.length?x(t,ho(e,3),!0):-1}function qo(t){var e=t?t.length:0;return e?Dn(t,1):[]}function Wo(t){var e=t?t.length:0;return e?Dn(t,At):[]}function Ko(t,e){var n=t?t.length:0;return n?(e=e===Q?1:cu(e),Dn(t,e)):[]}function Ho(t){for(var e=-1,n=t?t.length:0,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r}function Yo(t){return t?t[0]:Q}function Zo(t,e,n){var r=t?t.length:0;return r?(n=cu(n),0>n&&(n=mc(r+n,0)),A(t,e,n)):-1}function Xo(t){return zo(t,1)}function Jo(t,e){return t?yc.call(t,e):""}function Qo(t){var e=t?t.length:0;return e?t[e-1]:Q}function ti(t,e,n){var r=t?t.length:0;if(!r)return-1;var o=r;if(n!==Q&&(o=cu(n),o=(0>o?mc(r+o,0):bc(o,r-1))+1),e!==e)return N(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1}function ei(t,e){return t&&t.length&&e&&e.length?dr(t,e):t}function ni(t,e,n){return t&&t.length&&e&&e.length?dr(t,e,ho(n)):t}function ri(t,e,n){return t&&t.length&&e&&e.length?dr(t,e,Q,n):t}function oi(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=ho(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return hr(t,o),n}function ii(t){return t?Ec.call(t):t}function ai(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Ao(t,e,n)?(e=0,n=r):(e=null==e?0:cu(e),n=n===Q?r:cu(n)),gr(t,e,n)):[]}function ui(t,e){return br(t,e)}function si(t,e,n){return _r(t,e,ho(n))}function ci(t,e){var n=t?t.length:0;if(n){var r=br(t,e);if(n>r&&Ea(t[r],e))return r}return-1}function fi(t,e){return br(t,e,!0)}function li(t,e,n){return _r(t,e,ho(n),!0)}function di(t,e){var n=t?t.length:0;if(n){var r=br(t,e,!0)-1;if(Ea(t[r],e))return r}return-1}function hi(t){return t&&t.length?wr(t):[]}function pi(t,e){return t&&t.length?Er(t,ho(e)):[]}function vi(t){return Go(t,1)}function yi(t,e,n){return t&&t.length?(e=n||e===Q?1:cu(e),gr(t,0,0>e?0:e)):[]}function gi(t,e,n){var r=t?t.length:0;return r?(e=n||e===Q?1:cu(e),e=r-e,gr(t,0>e?0:e,r)):[]}function mi(t,e){return t&&t.length?jr(t,ho(e,3),!1,!0):[]}function bi(t,e){return t&&t.length?jr(t,ho(e,3)):[]}function _i(t){return t&&t.length?xr(t):[]}function wi(t,e){return t&&t.length?xr(t,ho(e)):[]}function Ei(t,e){return t&&t.length?xr(t,Q,e):[]}function xi(t){if(!t||!t.length)return[];var e=0;return t=h(t,function(t){return Ia(t)?(e=mc(t.length,e),!0):void 0}),T(e,function(e){return y(t,fr(e))})}function Ai(t,e){if(!t||!t.length)return[];var n=xi(t);return null==e?n:y(n,function(t){return u(e,Q,t)})}function Oi(t,e){return Tr(t||[],e||[],sn)}function ji(t,e){return Tr(t||[],e||[],yr)}function ki(t){var n=e(t);return n.__chain__=!0,n}function Ii(t,e){return e(t),t}function Ti(t,e){return e(t)}function Si(){return ki(this)}function Mi(){return new r(this.value(),this.__chain__)}function Ci(t){return this.map(t).flatten()}function Pi(){this.__values__===Q&&(this.__values__=su(this.value()));var t=this.__index__>=this.__values__.length,e=t?Q:this.__values__[this.__index__++];return{done:t,value:e}}function Bi(){return this}function Ri(t){for(var e,r=this;r instanceof n;){var o=Ro(r);o.__index__=0,o.__values__=Q,e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=t,e}function Di(){var t=this.__wrapped__;if(t instanceof o){var e=t;return this.__actions__.length&&(e=new o(this)),e=e.reverse(),e.__actions__.push({func:Ti,args:[ii],thisArg:Q}),new r(e,this.__chain__)}return this.thru(ii)}function Fi(){return kr(this.__wrapped__,this.__actions__)}function Gi(t,e,n){var r=kf(t)?d:Cn;return n&&Ao(t,e,n)&&(e=Q),r(t,ho(e,3))}function zi(t,e){var n=kf(t)?h:Rn;return n(t,ho(e,3))}function Li(t,e){if(e=ho(e,3),kf(t)){var n=x(t,e);return n>-1?t[n]:Q}return E(t,e,Dc)}function Vi(t,e){if(e=ho(e,3),kf(t)){var n=x(t,e,!0);return n>-1?t[n]:Q}return E(t,e,Fc)}function Ni(t,e){return Dn(Wi(t,e),1)}function Ui(t,e){return"function"==typeof e&&kf(t)?f(t,e):Dc(t,hn(e))}function $i(t,e){return"function"==typeof e&&kf(t)?l(t,e):Fc(t,hn(e))}function qi(t,e,n,r){t=ka(t)?t:Nu(t),n=n&&!r?cu(n):0;var o=t.length;return 0>n&&(n=mc(o+n,0)),tu(t)?o>=n&&t.indexOf(e,n)>-1:!!o&&A(t,e,n)>-1}function Wi(t,e){var n=kf(t)?y:nr;return n(t,ho(e,3))}function Ki(t,e,n,r){return null==t?[]:(kf(e)||(e=null==e?[]:[e]),n=r?Q:n,kf(n)||(n=null==n?[]:[n]),ur(t,e,n))}function Hi(t,e,n){var r=kf(t)?m:j,o=arguments.length<3;return r(t,ho(e,4),n,o,Dc)}function Yi(t,e,n){var r=kf(t)?b:j,o=arguments.length<3;return r(t,ho(e,4),n,o,Fc)}function Zi(t,e){var n=kf(t)?h:Rn;return e=ho(e,3),n(t,function(t,n,r){return!e(t,n,r)})}function Xi(t){var e=ka(t)?t:Nu(t),n=e.length;return n>0?e[pr(0,n-1)]:Q}function Ji(t,e){var n=-1,r=su(t),o=r.length,i=o-1;for(e=An(cu(e),0,o);++n<e;){var a=pr(n,i),u=r[a];r[a]=r[n],r[n]=u}return r.length=e,r}function Qi(t){return Ji(t,It)}function ta(t){if(null==t)return 0;if(ka(t)){var e=t.length;return e&&tu(t)?Y(t):e}return ku(t).length}function ea(t,e,n){var r=kf(t)?_:mr;return n&&Ao(t,e,n)&&(e=Q),r(t,ho(e,3))}function na(t,e){if("function"!=typeof e)throw new $s(nt);return t=cu(t),function(){return--t<1?e.apply(this,arguments):void 0}}function ra(t,e,n){return e=n?Q:e,e=t&&null==e?t.length:e,uo(t,dt,Q,Q,Q,Q,e)}function oa(t,e){var n;if("function"!=typeof e)throw new $s(nt);return t=cu(t),function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=Q),n}}function ia(t,e,n){e=n?Q:e;var r=uo(t,st,Q,Q,Q,Q,Q,e);return r.placeholder=ia.placeholder,r}function aa(t,e,n){e=n?Q:e;var r=uo(t,ct,Q,Q,Q,Q,Q,e);return r.placeholder=aa.placeholder,r}function ua(t,e,n){function r(){p&&oc(p),f&&oc(f),y=0,c=f=h=p=v=Q}function o(e,n){n&&oc(n),f=p=v=Q,e&&(y=mf(),l=t.apply(h,c),p||f||(c=h=Q))}function i(){var t=e-(mf()-d);0>=t||t>e?o(v,f):p=lc(i,t)}function a(){return(p&&v||f&&b)&&(l=t.apply(h,c)),r(),l}function u(){o(b,p)}function s(){if(c=arguments,d=mf(),h=this,v=b&&(p||!g),m===!1)var n=g&&!p;else{y||f||g||(y=d);var r=m-(d-y),o=(0>=r||r>m)&&(g||f);o?(f&&(f=oc(f)),y=d,l=t.apply(h,c)):f||(f=lc(u,r))}return o&&p?p=oc(p):p||e===m||(p=lc(i,e)),n&&(o=!0,l=t.apply(h,c)),!o||p||f||(c=h=Q),l}var c,f,l,d,h,p,v,y=0,g=!1,m=!1,b=!0;if("function"!=typeof t)throw new $s(nt);return e=lu(e)||0,La(n)&&(g=!!n.leading,m="maxWait"in n&&mc(lu(n.maxWait)||0,e),b="trailing"in n?!!n.trailing:b),s.cancel=r,s.flush=a,s}function sa(t){return uo(t,pt)}function ca(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new $s(nt);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new ca.Cache,n}function fa(t){if("function"!=typeof t)throw new $s(nt);return function(){return!t.apply(this,arguments)}}function la(t){return oa(2,t)}function da(t,e){if("function"!=typeof t)throw new $s(nt);return e=mc(e===Q?t.length-1:cu(e),0),function(){for(var n=arguments,r=-1,o=mc(n.length-e,0),i=Array(o);++r<o;)i[r]=n[e+r];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,n[0],i);case 2:return t.call(this,n[0],n[1],i)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=i,u(t,this,a)}}function ha(t,e){if("function"!=typeof t)throw new $s(nt);return e=e===Q?0:mc(cu(e),0),da(function(n){var r=n[e],o=n.slice(0,e);return r&&g(o,r),u(t,this,o)})}function pa(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new $s(nt);return La(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ua(t,e,{leading:r,maxWait:e,trailing:o})}function va(t){return ra(t,1)}function ya(t,e){return e=null==e?ms:e,Af(e,t)}function ga(){if(!arguments.length)return[];var t=arguments[0];return kf(t)?t:[t]}function ma(t){return On(t,!1,!0)}function ba(t,e){return On(t,!1,!0,e)}function _a(t){return On(t,!0,!0)}function wa(t,e){return On(t,!0,!0,e)}function Ea(t,e){return t===e||t!==t&&e!==e}function xa(t,e){return t>e}function Aa(t,e){return t>=e}function Oa(t){return Ia(t)&&Hs.call(t,"callee")&&(!fc.call(t,"callee")||Xs.call(t)==Mt)}function ja(t){return Va(t)&&Xs.call(t)==Kt}function ka(t){return null!=t&&za(Uc(t))&&!Fa(t)}function Ia(t){return Va(t)&&ka(t)}function Ta(t){return t===!0||t===!1||Va(t)&&Xs.call(t)==Pt}function Sa(t){return Va(t)&&Xs.call(t)==Bt}function Ma(t){return!!t&&1===t.nodeType&&Va(t)&&!Za(t)}function Ca(t){if(ka(t)&&(kf(t)||tu(t)||Fa(t.splice)||Oa(t)))return!t.length;for(var e in t)if(Hs.call(t,e))return!1;return!0}function Pa(t,e){return Zn(t,e)}function Ba(t,e,n){n="function"==typeof n?n:Q;var r=n?n(t,e):Q;return r===Q?Zn(t,e,n):!!r}function Ra(t){return Va(t)?Xs.call(t)==Rt||"string"==typeof t.message&&"string"==typeof t.name:!1}function Da(t){return"number"==typeof t&&vc(t)}function Fa(t){var e=La(t)?Xs.call(t):"";return e==Dt||e==Ft}function Ga(t){return"number"==typeof t&&t==cu(t)}function za(t){return"number"==typeof t&&t>-1&&t%1==0&&Ot>=t}function La(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Va(t){return!!t&&"object"==typeof t}function Na(t){return Va(t)&&go(t)==Gt}function Ua(t,e){return t===e||Jn(t,e,po(e))}function $a(t,e,n){return n="function"==typeof n?n:Q,Jn(t,e,po(e),n)}function qa(t){return Ya(t)&&t!=+t}function Wa(t){return null==t?!1:Fa(t)?Qs.test(Ks.call(t)):Va(t)&&(U(t)?Qs:ke).test(t)}function Ka(t){return null===t}function Ha(t){return null==t}function Ya(t){return"number"==typeof t||Va(t)&&Xs.call(t)==zt}function Za(t){if(!Va(t)||Xs.call(t)!=Lt||U(t))return!1;var e=ac(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&Ks.call(n)==Zs}function Xa(t){return La(t)&&Xs.call(t)==Vt}function Ja(t){return Ga(t)&&t>=-Ot&&Ot>=t}function Qa(t){return Va(t)&&go(t)==Nt}function tu(t){return"string"==typeof t||!kf(t)&&Va(t)&&Xs.call(t)==Ut}function eu(t){return"symbol"==typeof t||Va(t)&&Xs.call(t)==$t}function nu(t){return Va(t)&&za(t.length)&&!!En[Xs.call(t)]}function ru(t){return t===Q}function ou(t){return Va(t)&&go(t)==qt}function iu(t){return Va(t)&&Xs.call(t)==Wt}function au(t,e){return e>t}function uu(t,e){return e>=t}function su(t){if(!t)return[];if(ka(t))return tu(t)?Z(t):zr(t);if(sc&&t[sc])return q(t[sc]());var e=go(t),n=e==Gt?W:e==Nt?H:Nu;return n(t)}function cu(t){if(!t)return 0===t?t:0;if(t=lu(t),t===At||t===-At){var e=0>t?-1:1;return e*jt}var n=t%1;return t===t?n?t-n:t:0}function fu(t){return t?An(cu(t),0,It):0}function lu(t){if(La(t)){var e=Fa(t.valueOf)?t.valueOf():t;t=La(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(me,"");var n=je.test(t);return n||Ie.test(t)?Sn(t.slice(2),n?2:8):Oe.test(t)?kt:+t}function du(t){return Lr(t,Iu(t))}function hu(t){return An(cu(t),-Ot,Ot)}function pu(t){if("string"==typeof t)return t;if(null==t)return"";if(eu(t))return Rc?Rc.call(t):"";var e=t+"";return"0"==e&&1/t==-At?"-0":e}function vu(t,e){var n=kn(t);return e?fn(n,e):n}function yu(t,e){return E(t,ho(e,3),Ln,!0)}function gu(t,e){return E(t,ho(e,3),Vn,!0)}function mu(t,e){return null==t?t:Gc(t,hn(e),Iu)}function bu(t,e){return null==t?t:zc(t,hn(e),Iu)}function _u(t,e){return t&&Ln(t,hn(e))}function wu(t,e){return t&&Vn(t,hn(e))}function Eu(t){return null==t?[]:Nn(t,ku(t))}function xu(t){return null==t?[]:Nn(t,Iu(t))}function Au(t,e,n){var r=null==t?Q:Un(t,e);return r===Q?n:r}function Ou(t,e){return bo(t,e,$n)}function ju(t,e){return bo(t,e,qn)}function ku(t){var e=Io(t);if(!e&&!ka(t))return tr(t);var n=xo(t),r=!!n,o=n||[],i=o.length;for(var a in t)!$n(t,a)||r&&("length"==a||$(a,i))||e&&"constructor"==a||o.push(a);return o}function Iu(t){for(var e=-1,n=Io(t),r=er(t),o=r.length,i=xo(t),a=!!i,u=i||[],s=u.length;++e<o;){var c=r[e];a&&("length"==c||$(c,s))||"constructor"==c&&(n||!Hs.call(t,c))||u.push(c)}return u}function Tu(t,e){var n={};return e=ho(e,3),Ln(t,function(t,r,o){n[e(t,r,o)]=t}),n}function Su(t,e){var n={};return e=ho(e,3),Ln(t,function(t,r,o){n[r]=e(t,r,o)}),n}function Mu(t,e){return e=ho(e),cr(t,function(t,n){return!e(t,n)})}function Cu(t,e){return null==t?{}:cr(t,ho(e))}function Pu(t,e,n){if(Oo(e,t))r=null==t?Q:t[e];else{e=vn(e);var r=Au(t,e);t=Co(t,e)}return r===Q&&(r=n),Fa(r)?r.call(t):r}function Bu(t,e,n){return null==t?t:yr(t,e,n)}function Ru(t,e,n,r){return r="function"==typeof r?r:Q,null==t?t:yr(t,e,n,r)}function Du(t){return S(t,ku(t))}function Fu(t){return S(t,Iu(t))}function Gu(t,e,n){var r=kf(t)||nu(t);if(e=ho(e,4),null==n)if(r||La(t)){var o=t.constructor;n=r?kf(t)?new o:[]:Fa(o)?kn(ac(t)):{}}else n={};return(r?f:Ln)(t,function(t,r,o){return e(n,t,r,o)}),n}function zu(t,e){return null==t?!0:Ar(t,e)}function Lu(t,e,n){return null==t?t:Or(t,e,hn(n))}function Vu(t,e,n,r){return r="function"==typeof r?r:Q,null==t?t:Or(t,e,hn(n),r)}function Nu(t){return t?C(t,ku(t)):[]}function Uu(t){return null==t?[]:C(t,Iu(t))}function $u(t,e,n){return n===Q&&(n=e,e=Q),n!==Q&&(n=lu(n),n=n===n?n:0),e!==Q&&(e=lu(e),e=e===e?e:0),An(lu(t),e,n)}function qu(t,e,n){return e=lu(e)||0,n===Q?(n=e,e=0):n=lu(n)||0,t=lu(t),Wn(t,e,n)}function Wu(t,e,n){if(n&&"boolean"!=typeof n&&Ao(t,e,n)&&(e=n=Q),n===Q&&("boolean"==typeof e?(n=e,e=Q):"boolean"==typeof t&&(n=t,t=Q)),t===Q&&e===Q?(t=0,e=1):(t=lu(t)||0,e===Q?(e=t,t=0):e=lu(e)||0),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wc();return bc(t+o*(e-t+Tn("1e-"+((o+"").length-1))),e)}return pr(t,e)}function Ku(t){return Kf(pu(t).toLowerCase())}function Hu(t){return t=pu(t),t&&t.replace(Se,z).replace(pn,"")}function Yu(t,e,n){t=pu(t),e="string"==typeof e?e:e+"";var r=t.length;return n=n===Q?r:An(cu(n),0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function Zu(t){return t=pu(t),t&&ce.test(t)?t.replace(ue,L):t}function Xu(t){return t=pu(t),t&&ge.test(t)?t.replace(ye,"\\$&"):t}function Ju(t,e,n){t=pu(t),e=cu(e);var r=Y(t);if(!e||r>=e)return t;var o=(e-r)/2,i=pc(o),a=hc(o);return no("",i,n)+t+no("",a,n)}function Qu(t,e,n){return t=pu(t),t+no(t,e,n)}function ts(t,e,n){return t=pu(t),no(t,e,n)+t}function es(t,e,n){return n||null==e?e=0:e&&(e=+e),t=pu(t).replace(me,""),_c(t,e||(Ae.test(t)?16:10))}function ns(t,e){t=pu(t),e=cu(e);var n="";if(!t||1>e||e>Ot)return n;do e%2&&(n+=t),e=pc(e/2),t+=t;while(e);return n}function rs(){var t=arguments,e=pu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function os(t,e,n){
return pu(t).split(e,n)}function is(t,e,n){return t=pu(t),n=An(cu(n),0,t.length),t.lastIndexOf(e,n)==n}function as(t,n,r){var o=e.templateSettings;r&&Ao(t,n,r)&&(n=Q),t=pu(t),n=Mf({},n,o,an);var i,a,u=Mf({},n.imports,o.imports,an),s=ku(u),c=C(u,s),f=0,l=n.interpolate||Me,d="__p += '",h=Us((n.escape||Me).source+"|"+l.source+"|"+(l===de?Ee:Me).source+"|"+(n.evaluate||Me).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++wn+"]")+"\n";t.replace(h,function(e,n,r,o,u,s){return r||(r=o),d+=t.slice(f,s).replace(Ce,V),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),u&&(a=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+e.length,e}),d+="';\n";var v=n.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(re,""):d).replace(oe,"$1").replace(ie,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Xf(function(){return Function(s,p+"return "+d).apply(Q,c)});if(y.source=d,Ra(y))throw y;return y}function us(t){return pu(t).toLowerCase()}function ss(t){return pu(t).toUpperCase()}function cs(t,e,n){if(t=pu(t),!t)return t;if(n||e===Q)return t.replace(me,"");if(e+="",!e)return t;var r=Z(t),o=Z(e);return r.slice(P(r,o),B(r,o)+1).join("")}function fs(t,e,n){if(t=pu(t),!t)return t;if(n||e===Q)return t.replace(_e,"");if(e+="",!e)return t;var r=Z(t);return r.slice(0,B(r,Z(e))+1).join("")}function ls(t,e,n){if(t=pu(t),!t)return t;if(n||e===Q)return t.replace(be,"");if(e+="",!e)return t;var r=Z(t);return r.slice(P(r,Z(e))).join("")}function ds(t,e){var n=gt,r=mt;if(La(e)){var o="separator"in e?e.separator:o;n="length"in e?cu(e.length):n,r="omission"in e?pu(e.omission):r}t=pu(t);var i=t.length;if(yn.test(t)){var a=Z(t);i=a.length}if(n>=i)return t;var u=n-Y(r);if(1>u)return r;var s=a?a.slice(0,u).join(""):t.slice(0,u);if(o===Q)return s+r;if(a&&(u+=s.length-u),Xa(o)){if(t.slice(u).search(o)){var c,f=s;for(o.global||(o=Us(o.source,pu(xe.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var l=c.index;s=s.slice(0,l===Q?u:l)}}else if(t.indexOf(o,u)!=u){var d=s.lastIndexOf(o);d>-1&&(s=s.slice(0,d))}return s+r}function hs(t){return t=pu(t),t&&se.test(t)?t.replace(ae,X):t}function ps(t,e,n){return t=pu(t),e=n?Q:e,e===Q&&(e=bn.test(t)?mn:gn),t.match(e)||[]}function vs(t){var e=t?t.length:0,n=ho();return t=e?y(t,function(t){if("function"!=typeof t[1])throw new $s(nt);return[n(t[0]),t[1]]}):[],da(function(n){for(var r=-1;++r<e;){var o=t[r];if(u(o[0],this,n))return u(o[1],this,n)}})}function ys(t){return jn(On(t,!0))}function gs(t){return function(){return t}}function ms(t){return t}function bs(t){return Qn("function"==typeof t?t:On(t,!0))}function _s(t){return rr(On(t,!0))}function ws(t,e){return or(t,On(e,!0))}function Es(t,e,n){var r=ku(e),o=Nn(e,r);null!=n||La(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Nn(e,ku(e)));var i=La(n)&&"chain"in n?n.chain:!0,a=Fa(t);return f(o,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=zr(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,g([this.value()],arguments))})}),t}function xs(){return Gn._===this&&(Gn._=Js),this}function As(){}function Os(t){return t=cu(t),function(){return arguments[t]}}function js(t){return Oo(t)?fr(t):lr(t)}function ks(t){return function(e){return null==t?Q:Un(t,e)}}function Is(t,e){if(t=cu(t),1>t||t>Ot)return[];var n=It,r=bc(t,It);e=hn(e),t-=It;for(var o=T(r,e);++n<t;)e(n);return o}function Ts(t){return kf(t)?y(t,String):Bo(t)}function Ss(t){var e=++Ys;return pu(t)+e}function Ms(t,e){var n;return t===Q&&e===Q?0:(t!==Q&&(n=t),e!==Q&&(n=n===Q?e:n+e),n)}function Cs(t){return t&&t.length?w(t,ms,xa):Q}function Ps(t,e){return t&&t.length?w(t,ho(e),xa):Q}function Bs(t){return Gs(t)/(t?t.length:0)}function Rs(t){return t&&t.length?w(t,ms,au):Q}function Ds(t,e){return t&&t.length?w(t,ho(e),au):Q}function Fs(t,e){var n;return t===Q&&e===Q?0:(t!==Q&&(n=t),e!==Q&&(n=n===Q?e:n-e),n)}function Gs(t){return t&&t.length?I(t,ms):0}function zs(t,e){return t&&t.length?I(t,ho(e)):0}t=t?zn.defaults({},t,zn.pick(Gn,_n)):Gn;var Ls=t.Date,Vs=t.Error,Ns=t.Math,Us=t.RegExp,$s=t.TypeError,qs=t.Array.prototype,Ws=t.Object.prototype,Ks=t.Function.prototype.toString,Hs=Ws.hasOwnProperty,Ys=0,Zs=Ks.call(Object),Xs=Ws.toString,Js=Gn._,Qs=Us("^"+Ks.call(Hs).replace(ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tc=Pn?t.Buffer:Q,ec=t.Reflect,nc=t.Symbol,rc=t.Uint8Array,oc=t.clearTimeout,ic=ec?ec.enumerate:Q,ac=Object.getPrototypeOf,uc=Object.getOwnPropertySymbols,sc="symbol"==typeof(sc=nc&&nc.iterator)?sc:Q,cc=Object.create,fc=Ws.propertyIsEnumerable,lc=t.setTimeout,dc=qs.splice,hc=Ns.ceil,pc=Ns.floor,vc=t.isFinite,yc=qs.join,gc=Object.keys,mc=Ns.max,bc=Ns.min,_c=t.parseInt,wc=Ns.random,Ec=qs.reverse,xc=vo(t,"Map"),Ac=vo(t,"Set"),Oc=vo(t,"WeakMap"),jc=vo(Object,"create"),kc=Oc&&new Oc,Ic=!fc.call({valueOf:1},"valueOf"),Tc={},Sc=xc?Ks.call(xc):"",Mc=Ac?Ks.call(Ac):"",Cc=Oc?Ks.call(Oc):"",Pc=nc?nc.prototype:Q,Bc=Pc?Pc.valueOf:Q,Rc=Pc?Pc.toString:Q;e.templateSettings={escape:fe,evaluate:le,interpolate:de,variable:"",imports:{_:e}};var Dc=qr(Ln),Fc=qr(Vn,!0),Gc=Wr(),zc=Wr(!0);ic&&!fc.call({valueOf:1},"valueOf")&&(er=function(t){return q(ic(t))});var Lc=kc?function(t,e){return kc.set(t,e),t}:ms,Vc=Ac&&2===new Ac([1,2]).size?function(t){return new Ac(t)}:As,Nc=kc?function(t){return kc.get(t)}:As,Uc=fr("length"),$c=uc||function(){return[]};(xc&&go(new xc)!=Gt||Ac&&go(new Ac)!=Nt||Oc&&go(new Oc)!=qt)&&(go=function(t){var e=Xs.call(t),n=e==Lt?t.constructor:null,r="function"==typeof n?Ks.call(n):"";if(r)switch(r){case Sc:return Gt;case Mc:return Nt;case Cc:return qt}return e});var qc=function(){var t=0,e=0;return function(n,r){var o=mf(),i=_t-(o-e);if(e=o,i>0){if(++t>=bt)return n}else t=0;return Lc(n,r)}}(),Wc=da(function(t,e){return kf(t)||(t=null==t?[]:[Object(t)]),e=Dn(e,1),c(t,e)}),Kc=da(function(t,e){return Ia(t)?Mn(t,Dn(e,1,!0)):[]}),Hc=da(function(t,e){var n=Qo(e);return Ia(n)&&(n=Q),Ia(t)?Mn(t,Dn(e,1,!0),ho(n)):[]}),Yc=da(function(t,e){var n=Qo(e);return Ia(n)&&(n=Q),Ia(t)?Mn(t,Dn(e,1,!0),Q,n):[]}),Zc=da(function(t){var e=y(t,dn);return e.length&&e[0]===t[0]?Kn(e):[]}),Xc=da(function(t){var e=Qo(t),n=y(t,dn);return e===Qo(n)?e=Q:n.pop(),n.length&&n[0]===t[0]?Kn(n,ho(e)):[]}),Jc=da(function(t){var e=Qo(t),n=y(t,dn);return e===Qo(n)?e=Q:n.pop(),n.length&&n[0]===t[0]?Kn(n,Q,e):[]}),Qc=da(ei),tf=da(function(t,e){e=y(Dn(e,1),String);var n=ln(t,e);return hr(t,e.sort(D)),n}),ef=da(function(t){return xr(Dn(t,1,!0))}),nf=da(function(t){var e=Qo(t);return Ia(e)&&(e=Q),xr(Dn(t,1,!0),ho(e))}),rf=da(function(t){var e=Qo(t);return Ia(e)&&(e=Q),xr(Dn(t,1,!0),Q,e)}),of=da(function(t,e){return Ia(t)?Mn(t,e):[]}),af=da(function(t){return Ir(h(t,Ia))}),uf=da(function(t){var e=Qo(t);return Ia(e)&&(e=Q),Ir(h(t,Ia),ho(e))}),sf=da(function(t){var e=Qo(t);return Ia(e)&&(e=Q),Ir(h(t,Ia),Q,e)}),cf=da(xi),ff=da(function(t){var e=t.length,n=e>1?t[e-1]:Q;return n="function"==typeof n?(t.pop(),n):Q,Ai(t,n)}),lf=da(function(t){t=Dn(t,1);var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return ln(e,t)};return!(e>1||this.__actions__.length)&&i instanceof o&&$(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Ti,args:[a],thisArg:Q}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Q),t})):this.thru(a)}),df=Ur(function(t,e,n){Hs.call(t,n)?++t[n]:t[n]=1}),hf=Ur(function(t,e,n){Hs.call(t,n)?t[n].push(e):t[n]=[e]}),pf=da(function(t,e,n){var r=-1,o="function"==typeof e,i=Oo(e),a=ka(t)?Array(t.length):[];return Dc(t,function(t){var s=o?e:i&&null!=t?t[e]:Q;a[++r]=s?u(s,t,n):Yn(t,e,n)}),a}),vf=Ur(function(t,e,n){t[n]=e}),yf=Ur(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),gf=da(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ao(t,e[0],e[1])?e=[]:n>2&&Ao(e[0],e[1],e[2])&&(e.length=1),ur(t,Dn(e,1),[])}),mf=Ls.now,bf=da(function(t,e,n){var r=it;if(n.length){var o=K(n,yo(bf));r|=ft}return uo(t,r,e,n,o)}),_f=da(function(t,e,n){var r=it|at;if(n.length){var o=K(n,yo(_f));r|=ft}return uo(e,r,t,n,o)}),wf=da(function(t,e){return In(t,1,e)}),Ef=da(function(t,e,n){return In(t,lu(e)||0,n)}),xf=da(function(t,e){e=y(Dn(e,1),ho());var n=e.length;return da(function(r){for(var o=-1,i=bc(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return u(t,this,r)})}),Af=da(function(t,e){var n=K(e,yo(Af));return uo(t,ft,Q,e,n)}),Of=da(function(t,e){var n=K(e,yo(Of));return uo(t,lt,Q,e,n)}),jf=da(function(t,e){return uo(t,ht,Q,Q,Q,Dn(e,1))}),kf=Array.isArray,If=tc?function(t){return t instanceof tc}:gs(!1),Tf=$r(function(t,e){if(Ic||Io(e)||ka(e))return void Lr(e,ku(e),t);for(var n in e)Hs.call(e,n)&&sn(t,n,e[n])}),Sf=$r(function(t,e){if(Ic||Io(e)||ka(e))return void Lr(e,Iu(e),t);for(var n in e)sn(t,n,e[n])}),Mf=$r(function(t,e,n,r){Vr(e,Iu(e),t,r)}),Cf=$r(function(t,e,n,r){Vr(e,ku(e),t,r)}),Pf=da(function(t,e){return ln(t,Dn(e,1))}),Bf=da(function(t){return t.push(Q,an),u(Mf,Q,t)}),Rf=da(function(t){return t.push(Q,Mo),u(Lf,Q,t)}),Df=to(function(t,e,n){t[e]=n},gs(ms)),Ff=to(function(t,e,n){Hs.call(t,e)?t[e].push(n):t[e]=[n]},ho),Gf=da(Yn),zf=$r(function(t,e,n){ir(t,e,n)}),Lf=$r(function(t,e,n,r){ir(t,e,n,r)}),Vf=da(function(t,e){return null==t?{}:(e=y(Dn(e,1),String),sr(t,Mn(Iu(t),e)))}),Nf=da(function(t,e){return null==t?{}:sr(t,Dn(e,1))}),Uf=Yr(function(t,e,n){return e=e.toLowerCase(),t+(n?Ku(e):e)}),$f=Yr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),qf=Yr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Wf=Hr("toLowerCase"),Kf=Hr("toUpperCase"),Hf=Yr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Yf=Yr(function(t,e,n){return t+(n?" ":"")+Ku(e)}),Zf=Yr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Xf=da(function(t,e){try{return u(t,Q,e)}catch(n){return Ra(n)?n:new Vs(n)}}),Jf=da(function(t,e){return f(Dn(e,1),function(e){t[e]=bf(t[e],t)}),t}),Qf=Jr(),tl=Jr(!0),el=da(function(t,e){return function(n){return Yn(n,t,e)}}),nl=da(function(t,e){return function(n){return Yn(t,n,e)}}),rl=eo(y),ol=eo(d),il=eo(_),al=oo(),ul=oo(!0),sl=ao("ceil"),cl=ao("floor"),fl=ao("round");return e.prototype=n.prototype,e.prototype.constructor=e,r.prototype=kn(n.prototype),r.prototype.constructor=r,o.prototype=kn(n.prototype),o.prototype.constructor=o,Be.prototype=jc?jc(null):Ws,ze.prototype.clear=Le,ze.prototype["delete"]=Ve,ze.prototype.get=Ne,ze.prototype.has=Ue,ze.prototype.set=$e,qe.prototype.push=Ke,He.prototype.clear=Ye,He.prototype["delete"]=Ze,He.prototype.get=Xe,He.prototype.has=Je,He.prototype.set=Qe,ca.Cache=ze,e.after=na,e.ary=ra,e.assign=Tf,e.assignIn=Sf,e.assignInWith=Mf,e.assignWith=Cf,e.at=Pf,e.before=oa,e.bind=bf,e.bindAll=Jf,e.bindKey=_f,e.castArray=ga,e.chain=ki,e.chunk=Do,e.compact=Fo,e.concat=Wc,e.cond=vs,e.conforms=ys,e.constant=gs,e.countBy=df,e.create=vu,e.curry=ia,e.curryRight=aa,e.debounce=ua,e.defaults=Bf,e.defaultsDeep=Rf,e.defer=wf,e.delay=Ef,e.difference=Kc,e.differenceBy=Hc,e.differenceWith=Yc,e.drop=Go,e.dropRight=zo,e.dropRightWhile=Lo,e.dropWhile=Vo,e.fill=No,e.filter=zi,e.flatMap=Ni,e.flatten=qo,e.flattenDeep=Wo,e.flattenDepth=Ko,e.flip=sa,e.flow=Qf,e.flowRight=tl,e.fromPairs=Ho,e.functions=Eu,e.functionsIn=xu,e.groupBy=hf,e.initial=Xo,e.intersection=Zc,e.intersectionBy=Xc,e.intersectionWith=Jc,e.invert=Df,e.invertBy=Ff,e.invokeMap=pf,e.iteratee=bs,e.keyBy=vf,e.keys=ku,e.keysIn=Iu,e.map=Wi,e.mapKeys=Tu,e.mapValues=Su,e.matches=_s,e.matchesProperty=ws,e.memoize=ca,e.merge=zf,e.mergeWith=Lf,e.method=el,e.methodOf=nl,e.mixin=Es,e.negate=fa,e.nthArg=Os,e.omit=Vf,e.omitBy=Mu,e.once=la,e.orderBy=Ki,e.over=rl,e.overArgs=xf,e.overEvery=ol,e.overSome=il,e.partial=Af,e.partialRight=Of,e.partition=yf,e.pick=Nf,e.pickBy=Cu,e.property=js,e.propertyOf=ks,e.pull=Qc,e.pullAll=ei,e.pullAllBy=ni,e.pullAllWith=ri,e.pullAt=tf,e.range=al,e.rangeRight=ul,e.rearg=jf,e.reject=Zi,e.remove=oi,e.rest=da,e.reverse=ii,e.sampleSize=Ji,e.set=Bu,e.setWith=Ru,e.shuffle=Qi,e.slice=ai,e.sortBy=gf,e.sortedUniq=hi,e.sortedUniqBy=pi,e.split=os,e.spread=ha,e.tail=vi,e.take=yi,e.takeRight=gi,e.takeRightWhile=mi,e.takeWhile=bi,e.tap=Ii,e.throttle=pa,e.thru=Ti,e.toArray=su,e.toPairs=Du,e.toPairsIn=Fu,e.toPath=Ts,e.toPlainObject=du,e.transform=Gu,e.unary=va,e.union=ef,e.unionBy=nf,e.unionWith=rf,e.uniq=_i,e.uniqBy=wi,e.uniqWith=Ei,e.unset=zu,e.unzip=xi,e.unzipWith=Ai,e.update=Lu,e.updateWith=Vu,e.values=Nu,e.valuesIn=Uu,e.without=of,e.words=ps,e.wrap=ya,e.xor=af,e.xorBy=uf,e.xorWith=sf,e.zip=cf,e.zipObject=Oi,e.zipObjectDeep=ji,e.zipWith=ff,e.extend=Sf,e.extendWith=Mf,Es(e,e),e.add=Ms,e.attempt=Xf,e.camelCase=Uf,e.capitalize=Ku,e.ceil=sl,e.clamp=$u,e.clone=ma,e.cloneDeep=_a,e.cloneDeepWith=wa,e.cloneWith=ba,e.deburr=Hu,e.endsWith=Yu,e.eq=Ea,e.escape=Zu,e.escapeRegExp=Xu,e.every=Gi,e.find=Li,e.findIndex=Uo,e.findKey=yu,e.findLast=Vi,e.findLastIndex=$o,e.findLastKey=gu,e.floor=cl,e.forEach=Ui,e.forEachRight=$i,e.forIn=mu,e.forInRight=bu,e.forOwn=_u,e.forOwnRight=wu,e.get=Au,e.gt=xa,e.gte=Aa,e.has=Ou,e.hasIn=ju,e.head=Yo,e.identity=ms,e.includes=qi,e.indexOf=Zo,e.inRange=qu,e.invoke=Gf,e.isArguments=Oa,e.isArray=kf,e.isArrayBuffer=ja,e.isArrayLike=ka,e.isArrayLikeObject=Ia,e.isBoolean=Ta,e.isBuffer=If,e.isDate=Sa,e.isElement=Ma,e.isEmpty=Ca,e.isEqual=Pa,e.isEqualWith=Ba,e.isError=Ra,e.isFinite=Da,e.isFunction=Fa,e.isInteger=Ga,e.isLength=za,e.isMap=Na,e.isMatch=Ua,e.isMatchWith=$a,e.isNaN=qa,e.isNative=Wa,e.isNil=Ha,e.isNull=Ka,e.isNumber=Ya,e.isObject=La,e.isObjectLike=Va,e.isPlainObject=Za,e.isRegExp=Xa,e.isSafeInteger=Ja,e.isSet=Qa,e.isString=tu,e.isSymbol=eu,e.isTypedArray=nu,e.isUndefined=ru,e.isWeakMap=ou,e.isWeakSet=iu,e.join=Jo,e.kebabCase=$f,e.last=Qo,e.lastIndexOf=ti,e.lowerCase=qf,e.lowerFirst=Wf,e.lt=au,e.lte=uu,e.max=Cs,e.maxBy=Ps,e.mean=Bs,e.min=Rs,e.minBy=Ds,e.noConflict=xs,e.noop=As,e.now=mf,e.pad=Ju,e.padEnd=Qu,e.padStart=ts,e.parseInt=es,e.random=Wu,e.reduce=Hi,e.reduceRight=Yi,e.repeat=ns,e.replace=rs,e.result=Pu,e.round=fl,e.runInContext=J,e.sample=Xi,e.size=ta,e.snakeCase=Hf,e.some=ea,e.sortedIndex=ui,e.sortedIndexBy=si,e.sortedIndexOf=ci,e.sortedLastIndex=fi,e.sortedLastIndexBy=li,e.sortedLastIndexOf=di,e.startCase=Yf,e.startsWith=is,e.subtract=Fs,e.sum=Gs,e.sumBy=zs,e.template=as,e.times=Is,e.toInteger=cu,e.toLength=fu,e.toLower=us,e.toNumber=lu,e.toSafeInteger=hu,e.toString=pu,e.toUpper=ss,e.trim=cs,e.trimEnd=fs,e.trimStart=ls,e.truncate=ds,e.unescape=hs,e.uniqueId=Ss,e.upperCase=Zf,e.upperFirst=Kf,e.each=Ui,e.eachRight=$i,e.first=Yo,Es(e,function(){var t={};return Ln(e,function(n,r){Hs.call(e.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),e.VERSION=tt,f(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),f(["drop","take"],function(t,e){o.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new o(this);n=n===Q?1:mc(cu(n),0);var i=this.clone();return r?i.__takeCount__=bc(n,i.__takeCount__):i.__views__.push({size:bc(n,It),type:t+(i.__dir__<0?"Right":"")}),i},o.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),f(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==wt||n==xt;o.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ho(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),f(["head","last"],function(t,e){var n="take"+(e?"Right":"");o.prototype[t]=function(){return this[n](1).value()[0]}}),f(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");o.prototype[t]=function(){return this.__filtered__?new o(this):this[n](1)}}),o.prototype.compact=function(){return this.filter(ms)},o.prototype.find=function(t){return this.filter(t).head()},o.prototype.findLast=function(t){return this.reverse().find(t)},o.prototype.invokeMap=da(function(t,e){return"function"==typeof t?new o(this):this.map(function(n){return Yn(n,t,e)})}),o.prototype.reject=function(t){return t=ho(t,3),this.filter(function(e){return!t(e)})},o.prototype.slice=function(t,e){t=cu(t);var n=this;return n.__filtered__&&(t>0||0>e)?new o(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==Q&&(e=cu(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},o.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},o.prototype.toArray=function(){return this.take(It)},Ln(o.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),a=/^(?:head|last)$/.test(n),u=e[a?"take"+("last"==n?"Right":""):n],s=a||/^find/.test(n);u&&(e.prototype[n]=function(){var n=this.__wrapped__,c=a?[1]:arguments,f=n instanceof o,l=c[0],d=f||kf(n),h=function(t){var n=u.apply(e,g([t],c));return a&&p?n[0]:n};d&&i&&"function"==typeof l&&1!=l.length&&(f=d=!1);var p=this.__chain__,v=!!this.__actions__.length,y=s&&!p,m=f&&!v;if(!s&&d){n=m?n:new o(this);var b=t.apply(n,c);return b.__actions__.push({func:Ti,args:[h],thisArg:Q}),new r(b,p)}return y&&m?t.apply(this,c):(b=this.thru(h),y?a?b.value()[0]:b.value():b)})}),f(["pop","push","shift","sort","splice","unshift"],function(t){var n=qs[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return o&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Ln(o.prototype,function(t,n){var r=e[n];if(r){var o=r.name+"",i=Tc[o]||(Tc[o]=[]);i.push({name:n,func:r})}}),Tc[Qr(Q,at).name]=[{name:"wrapper",func:Q}],o.prototype.clone=R,o.prototype.reverse=Te,o.prototype.value=Pe,e.prototype.at=lf,e.prototype.chain=Si,e.prototype.commit=Mi,e.prototype.flatMap=Ci,e.prototype.next=Pi,e.prototype.plant=Ri,e.prototype.reverse=Di,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Fi,sc&&(e.prototype[sc]=Bi),e}var Q,tt="4.6.1",et=200,nt="Expected a function",rt="__lodash_hash_undefined__",ot="__lodash_placeholder__",it=1,at=2,ut=4,st=8,ct=16,ft=32,lt=64,dt=128,ht=256,pt=512,vt=1,yt=2,gt=30,mt="...",bt=150,_t=16,wt=1,Et=2,xt=3,At=1/0,Ot=9007199254740991,jt=1.7976931348623157e308,kt=NaN,It=4294967295,Tt=It-1,St=It>>>1,Mt="[object Arguments]",Ct="[object Array]",Pt="[object Boolean]",Bt="[object Date]",Rt="[object Error]",Dt="[object Function]",Ft="[object GeneratorFunction]",Gt="[object Map]",zt="[object Number]",Lt="[object Object]",Vt="[object RegExp]",Nt="[object Set]",Ut="[object String]",$t="[object Symbol]",qt="[object WeakMap]",Wt="[object WeakSet]",Kt="[object ArrayBuffer]",Ht="[object Float32Array]",Yt="[object Float64Array]",Zt="[object Int8Array]",Xt="[object Int16Array]",Jt="[object Int32Array]",Qt="[object Uint8Array]",te="[object Uint8ClampedArray]",ee="[object Uint16Array]",ne="[object Uint32Array]",re=/\b__p \+= '';/g,oe=/\b(__p \+=) '' \+/g,ie=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ae=/&(?:amp|lt|gt|quot|#39|#96);/g,ue=/[&<>"'`]/g,se=RegExp(ae.source),ce=RegExp(ue.source),fe=/<%-([\s\S]+?)%>/g,le=/<%([\s\S]+?)%>/g,de=/<%=([\s\S]+?)%>/g,he=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,ye=/[\\^$.*+?()[\]{}|]/g,ge=RegExp(ye.source),me=/^\s+|\s+$/g,be=/^\s+/,_e=/\s+$/,we=/\\(\\)?/g,Ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/\w*$/,Ae=/^0x/i,Oe=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,ke=/^\[object .+?Constructor\]$/,Ie=/^0o[0-7]+$/i,Te=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Me=/($^)/,Ce=/['\n\r\u2028\u2029\\]/g,Pe="\\ud800-\\udfff",Be="\\u0300-\\u036f\\ufe20-\\ufe23",Re="\\u20d0-\\u20f0",De="\\u2700-\\u27bf",Fe="a-z\\xdf-\\xf6\\xf8-\\xff",Ge="\\xac\\xb1\\xd7\\xf7",ze="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Le="\\u2018\\u2019\\u201c\\u201d",Ve=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="A-Z\\xc0-\\xd6\\xd8-\\xde",Ue="\\ufe0e\\ufe0f",$e=Ge+ze+Le+Ve,qe="["+Pe+"]",We="["+$e+"]",Ke="["+Be+Re+"]",He="\\d+",Ye="["+De+"]",Ze="["+Fe+"]",Xe="[^"+Pe+$e+He+De+Fe+Ne+"]",Je="\\ud83c[\\udffb-\\udfff]",Qe="(?:"+Ke+"|"+Je+")",tn="[^"+Pe+"]",en="(?:\\ud83c[\\udde6-\\uddff]){2}",nn="[\\ud800-\\udbff][\\udc00-\\udfff]",rn="["+Ne+"]",on="\\u200d",an="(?:"+Ze+"|"+Xe+")",un="(?:"+rn+"|"+Xe+")",sn=Qe+"?",cn="["+Ue+"]?",fn="(?:"+on+"(?:"+[tn,en,nn].join("|")+")"+cn+sn+")*",ln=cn+sn+fn,dn="(?:"+[Ye,en,nn].join("|")+")"+ln,hn="(?:"+[tn+Ke+"?",Ke,en,nn,qe].join("|")+")",pn=RegExp(Ke,"g"),vn=RegExp(Je+"(?="+Je+")|"+hn+ln,"g"),yn=RegExp("["+on+Pe+Be+Re+Ue+"]"),gn=/[a-zA-Z0-9]+/g,mn=RegExp([rn+"?"+Ze+"+(?="+[We,rn,"$"].join("|")+")",un+"+(?="+[We,rn+an,"$"].join("|")+")",rn+"?"+an+"+",rn+"+",He,dn].join("|"),"g"),bn=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wn=-1,En={};En[Ht]=En[Yt]=En[Zt]=En[Xt]=En[Jt]=En[Qt]=En[te]=En[ee]=En[ne]=!0,En[Mt]=En[Ct]=En[Kt]=En[Pt]=En[Bt]=En[Rt]=En[Dt]=En[Gt]=En[zt]=En[Lt]=En[Vt]=En[Nt]=En[Ut]=En[qt]=!1;var xn={};xn[Mt]=xn[Ct]=xn[Kt]=xn[Pt]=xn[Bt]=xn[Ht]=xn[Yt]=xn[Zt]=xn[Xt]=xn[Jt]=xn[Gt]=xn[zt]=xn[Lt]=xn[Vt]=xn[Nt]=xn[Ut]=xn[$t]=xn[Qt]=xn[te]=xn[ee]=xn[ne]=!0,xn[Rt]=xn[Dt]=xn[qt]=!1;var An={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},On={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},jn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},kn={"function":!0,object:!0},In={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tn=parseFloat,Sn=parseInt,Mn=kn[typeof e]&&e&&!e.nodeType?e:Q,Cn=kn[typeof t]&&t&&!t.nodeType?t:Q,Pn=Cn&&Cn.exports===Mn?Mn:Q,Bn=R(Mn&&Cn&&"object"==typeof o&&o),Rn=R(kn[typeof self]&&self),Dn=R(kn[typeof window]&&window),Fn=R(kn[typeof this]&&this),Gn=Bn||Dn!==(Fn&&Fn.window)&&Dn||Rn||Fn||Function("return this")(),zn=J();(Dn||Rn||{})._=zn,r=function(){return zn}.call(e,n,e,t),!(r!==Q&&(t.exports=r))}).call(this)}).call(e,n(317)(t),function(){return this}())},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e=(0,f["default"])({memoize:!1},e);var n=function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=r,a=["memoized",i],u=h.get(t,i);if(u)return u;if(e.memoize){var c=h.get(t,a);if(c)return s["default"].resolve(c)}var f=function(){h.del(t,i)},l=t.apply(this,r),d=l.then(function(n){return e.memoize&&h.set(t,a,n),f(),n},function(t){throw f(),t});return h.set(t,i,d),d};return n.__reusePromise__origFn=t,n.__reusePromise__clear=function(){o.clear(t)},n}function i(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];void 0==t?h.clear():h.del(t.__reusePromise__origFn||t)}function a(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(e,n,r){return r.value=o(r.value,t),r}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(396),s=r(u),c=n(392),f=r(c),l=n(322),d=r(l);e["default"]=o,e.clear=i,e.decorator=a;var h=function(){function t(t){return(0,d["default"])(t)}function e(t,e,n){return t[u]==e&&t[s]==n}function n(t,n){for(var r=0,o=f.length;o>r;r++){var i=f[r];if(e(i,t,n))return r}return-1}function r(e,r){var o=t(r),i=n(e,o);return f[i]?f[i][c]:null}function o(e,r,o){var i=t(r),a=n(e,i);if(a>-1)f[a][c]=o;else{var l=[];l[u]=e,l[s]=i,l[c]=o,f.push(l)}return o}function i(e,r){if(void 0===r)for(var o=f.length-1;o>=0;o--){var i=f[o];i[u]==e&&f.splice(o,1)}else{var a=t(r),s=n(e,a);s>-1&&f.splice(s,1)}}function a(){f.length=0}var u=0,s=1,c=2,f=[];return{get:r,set:o,del:i,clear:a}}();a.clear=i,o.clear=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WEB_CODE=function(t){return t()},e.NODE_CODE=function(t){return t()}},function(t,e){"use strict";t.exports={}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={Roster:n(458),Users:n(460),Groups:n(461),Organizations:n(462),Messages:n(463),Metadata:n(465)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var i=(0,c["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var o=(0,c["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(322),u=r(a),s=n(325),c=r(s),f=n(359),l=r(f),d=n(413),h=r(d),p=n(421),v=r(p),y=n(443),g=r(y),m=n(422),b=r(m),_=n(423),w=r(_),E=n(446),x=r(E),A=n(447),O=r(A),j=n(459),k=r(j),I=n(453),T=r(I),S=["user","distributionList"],M=function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,w["default"])(e,[{key:"findAll",value:function(){var t=(0,v["default"])(h["default"].mark(function e(){var t;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.httpClient.get("/roster");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t,n,r){var a,u;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(r));case 12:if(T["default"].includes(S,t)){e.next=14;break}return e.abrupt("return");case 14:return a={},r&&(a["TT-X-Organization-Key"]=r),u=this.host.typeNSByModelName(t),e.next=19,this.httpClient.post("/roster",{headers:a,data:{entity:n,type:u}});case 19:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t,n,r){var a,u;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(r));case 12:if(T["default"].includes(S,t)){e.next=14;break}return e.abrupt("return");case 14:return a={},r&&(a["TT-X-Organization-Key"]=r),u=this.host.typeNSByModelName(t),e.next=19,this.httpClient.del("/roster/:counterPartyId",{headers:a,urlParams:{counterPartyId:n},data:{type:u}});case 19:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}(k["default"]);e["default"]=M,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(392),i=r(o),a=n(422),u=r(a),s=n(290),c=r(s),f=function l(t,e){(0,u["default"])(this,l),(0,i["default"])(this,e),this.config=t.config,this.host=t,this.httpClient=t.httpClient};e["default"]=f,(0,i["default"])(f.prototype,c["default"].prototype),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var i=(0,c["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){
if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var o=(0,c["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(322),u=r(a),s=n(325),c=r(s),f=n(359),l=r(f),d=n(413),h=r(d),p=n(421),v=r(p),y=n(443),g=r(y),m=n(422),b=r(m),_=n(423),w=r(_),E=n(446),x=r(E),A=n(447),O=r(A),j=n(459),k=r(j),I=n(453),T=(r(I),function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,w["default"])(e,[{key:"find",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t){var n;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.get("/user/:id",{urlParams:{id:t}});case 7:return n=e.sent,e.abrupt("return",n.data);case 11:if(e.prev=11,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,11]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(k["default"]));e["default"]=T,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var i=(0,c["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var o=(0,c["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(322),u=r(a),s=n(325),c=r(s),f=n(359),l=r(f),d=n(413),h=r(d),p=n(421),v=r(p),y=n(443),g=r(y),m=n(422),b=r(m),_=n(423),w=r(_),E=n(446),x=r(E),A=n(447),O=r(A),j=n(459),k=r(j),I=n(453),T=(r(I),function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,w["default"])(e,[{key:"create",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t){var n,r,o,i,a,u,s=t.name,c=(t.avatarFile,t.replayHistory),f=void 0===c?!0:c,l=t.memberIds,d=void 0===l?[]:l,p=t.organizationId;return h["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},p&&(n["TT-X-Organization-Key"]=p),r={name:s,replay_history:f,members:d},t.next=5,this.httpClient.post("/group",{headers:n,data:r});case 5:return o=t.sent,i=o.getHeader("TT-X-Group-Token"),a=o.getHeader("TT-X-Group-Avatar"),u={id:i,avatarUrl:a,name:s,memberIds:d,organizationId:p},t.abrupt("return",u);case 10:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t,n){var r,o,i=n.name,a=void 0===i?void 0:i,u=(n.avatarFile,n.replayHistory),s=void 0===u?void 0:u,c=n.memberIds,f=void 0===c?[]:c;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},"undefined"!=typeof a&&(r.name=a),"undefined"!=typeof f&&(r.members=f),"undefined"!=typeof s&&(r.replay_history=s),e.next=6,this.httpClient.post("/group/:id",{urlParams:{id:t},data:r});case 6:return o=e.sent,e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t){var n;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.get("/group/:id",{urlParams:{id:t}});case 7:return n=e.sent,e.abrupt("return",n.data);case 11:if(e.prev=11,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,11]])}));return function(e){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t){return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.del("/group/:id",{urlParams:{id:t}});case 7:return e.abrupt("return",!0);case 10:if(e.prev=10,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status&&403!=e.t0.response.status){e.next=16;break}return e.abrupt("return",!1);case 16:throw e.t0;case 17:case"end":return e.stop()}},e,this,[[4,10]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(k["default"]));e["default"]=T,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var i=(0,c["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var o=(0,c["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(322),u=r(a),s=n(325),c=r(s),f=n(359),l=r(f),d=n(413),h=r(d),p=n(421),v=r(p),y=n(443),g=r(y),m=n(422),b=r(m),_=n(423),w=r(_),E=n(446),x=r(E),A=n(447),O=r(A),j=n(459),k=r(j),I=n(453),T=(r(I),function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,w["default"])(e,[{key:"find",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t,n){var r;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 8:return e.prev=8,e.next=11,this.httpClient.get("/user/:userId/organization/:id",{urlParams:{userId:t,id:n}});case 11:return r=e.sent,e.abrupt("return",r.data);case 15:if(e.prev=15,e.t0=e["catch"](8),!e.t0.response||404!=e.t0.response.status){e.next=21;break}return e.abrupt("return",null);case 21:throw e.t0;case 22:case"end":return e.stop()}},e,this,[[8,15]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findAllOfUser",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t){var n;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.get("/user/:userId/organization",{urlParams:{userId:t}});case 7:return n=e.sent,e.abrupt("return",n.data);case 11:if(e.prev=11,e.t0=e["catch"](4),!e.t0.response||404!=e.t0.response.status){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,11]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(k["default"]));e["default"]=T,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,c["default"])(t);if(!Array.isArray(t)){var i=(0,u["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,h["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,c["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,c["default"])(t);if(!Array.isArray(t)){var o=(0,u["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,h["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,c["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(325),u=r(a),s=n(359),c=r(s),f=n(413),l=r(f),d=n(322),h=r(d),p=n(464),v=r(p),y=n(421),g=r(y),m=n(443),b=r(m),_=n(422),w=r(_),E=n(423),x=r(E),A=n(446),O=r(A),j=n(447),k=r(j),I=n(459),T=r(I),S=function(t){function e(){return(0,w["default"])(this,e),(0,O["default"])(this,(0,b["default"])(e).apply(this,arguments))}return(0,k["default"])(e,t),(0,x["default"])(e,[{key:"send",value:function(){var t=(0,g["default"])(l["default"].mark(function e(t){var n,r,a,u,s=t.counterPartyId,c=t.body,f=t.senderOrganizationId,d=t.recipientOrganizationId,p=t.attachment,y=t.metadata,g=t.localId,m=arguments;return l["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=m[0]&&"string"==typeof m[0].counterPartyId&&"string"==typeof m[0].body&&"string"==typeof m[0].senderOrganizationId&&"string"==typeof m[0].recipientOrganizationId&&(null==m[0].attachment||m[0].attachment instanceof Object||null==m[0].attachment||"string"==typeof m[0].attachment)&&(null==m[0].metadata||m[0].metadata instanceof Object)&&"string"==typeof m[0].localId){t.next=2;break}throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ counterPartyId: string;\n  body: string;\n  senderOrganizationId: string;\n  recipientOrganizationId: string;\n  attachment: ?Object | ?string;\n  metadata: ?Object;\n  localId: string;\n}\n\nGot:\n"+i(m[0]));case 2:if(null!=m[0]&&"string"==typeof m[0].counterPartyId&&"string"==typeof m[0].body&&"string"==typeof m[0].senderOrganizationId&&"string"==typeof m[0].recipientOrganizationId&&(null==m[0].attachment||m[0].attachment instanceof Object||null==m[0].attachment||"string"==typeof m[0].attachment)&&(null==m[0].metadata||m[0].metadata instanceof Object)&&"string"==typeof m[0].localId){t.next=4;break}throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ counterPartyId: string;\n  body: string;\n  senderOrganizationId: string;\n  recipientOrganizationId: string;\n  attachment: ?Object | ?string;\n  metadata: ?Object;\n  localId: string;\n}\n\nGot:\n"+o(m[0]));case 4:return d||(d=f),n={recipient:s,body:c},y&&(n.data=y.map(function(t){return(0,v["default"])({},t,{payload:(0,h["default"])(t.payload)})})),f&&(n.sender_organization=f),d&&(n.recipient_organization=d),r={},p&&(r.attachment=p),t.next=13,this.httpClient.post("/message",{data:n,files:r,requestId:g});case 13:return a=t.sent,u={serverId:a.getHeader("TT-X-Message-Id"),ttl:a.getHeader("TT-X-Msg-Ttl")},t.abrupt("return",u);case 16:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=(0,g["default"])(l["default"].mark(function e(t){return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:return e.prev=4,e.next=7,this.httpClient.del("/message/:id",{urlParams:{id:t}});case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e["catch"](4),e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,this,[[4,10]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(T["default"]);e["default"]=S,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(392),i=r(o);e["default"]=i["default"]||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var i=(0,c["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var o=(0,c["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(322),u=r(a),s=n(325),c=r(s),f=n(359),l=r(f),d=n(413),h=r(d),p=n(421),v=r(p),y=n(443),g=r(y),m=n(422),b=r(m),_=n(423),w=r(_),E=n(446),x=r(E),A=n(447),O=r(A),j=n(459),k=r(j),I=n(453),T=r(I),S=function(t){function e(){return(0,b["default"])(this,e),(0,x["default"])(this,(0,g["default"])(e).apply(this,arguments))}return(0,O["default"])(e,t),(0,w["default"])(e,[{key:"update",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t,n,r){return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if(n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 8:if(n instanceof Object){e.next=10;break}throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+o(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(r));case 12:return e.next=14,this.httpClient.post("/metadata/:id",{urlParams:{id:t},data:n,headers:{"TT-X-Organization-Key":r}});case 14:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t,n){var r;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 8:return e.next=10,this.httpClient.get("/metadata/:id",{urlParams:{id:t},headers:{"TT-X-Organization-Key":n}});case 10:return r=e.sent,e.abrupt("return",r.data);case 12:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findMulti",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t,n){var r,a;return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+i(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 4:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t})){e.next=6;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+o(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(n));case 8:return e.next=10,this.httpClient.post("/metadata_bulk",{data:{entities:t},headers:{"TT-X-Organization-Key":n}});case 10:return r=e.sent,a=T["default"].zipObject(t,r.data),e.abrupt("return",a);case 13:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()}]),e}(k["default"]);e["default"]=S,t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={Users:n(467),EventRouter:n(473),Events:n(475),Messages:n(484),Groups:n(516),Organizations:n(517),Conversations:n(524),Presence:n(525),Metadata:n(526),Search:n(535)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(!Array.isArray(t)){var o=(0,h["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,l["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,v["default"])(s))?s.v:void 0}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,v["default"])(t);if(!Array.isArray(t)){var o=(0,h["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,l["default"])(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,v["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f=n(322),l=r(f),d=n(325),h=r(d),p=n(359),v=r(p),y=n(468),g=r(y),m=n(396),b=r(m),_=n(413),w=r(_),E=n(421),x=r(E),A=n(443),O=r(A),j=n(422),k=r(j),I=n(423),T=r(I),S=n(446),M=r(S),C=n(447),P=r(C),B=n(440),R=r(B),D=n(453),F=r(D),G=n(471),z=r(G),L=n(472),V=r(L),N=n(441),U=r(N),$=n(454),q=new z["default"].MD5,W=(u=(0,$.decorator)(),s=(0,$.decorator)(),c=function(t){function e(){return(0,k["default"])(this,e),(0,M["default"])(this,(0,O["default"])(e).apply(this,arguments))}return(0,P["default"])(e,t),(0,T["default"])(e,[{key:"signIn",value:function(){var t=(0,x["default"])(w["default"].mark(function e(t,n){var r,o,u,s,c,f=arguments.length<=2||void 0===arguments[2]?{udid:void 0}:arguments[2];return w["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return r={Authorization:this.getSignInAuthHeader(t,n)},o={user_id:t,password:n,push_routing:this.config.pushAgent,version:this.config.clientVersion,device_id:f.udid},e.next=12,this.httpClient.post("/login",{headers:r,data:o});case 12:return u=e.sent,s=this.host.models.User.inject(u.data.user),c=u.data.auth,e.abrupt("return",{user:s,auth:c});case 16:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getSignInAuthHeader",value:function(t,e){if("string"!=typeof t)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof t)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return this.constructor.getSignInAuthHeader(this.config.productKey,t,e)}},{key:"signUp",value:function(){var t=(0,x["default"])(w["default"].mark(function e(){var t,n,r,o,i,a,u,s,c,f,l,d,h,p,v,y=arguments.length<=0||void 0===arguments[0]?{udid:void 0,email:void 0,password:void 0,countryCode:void 0,version:void 0}:arguments[0];return w["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.signUpHashKey,n=this.config.signUpHashSalt,r=y.udid,o=[t,n,r].join(":"),i=q.hex(o),a=[i.substr(0,2),i.substr(i.length-2)].join(""),u=[this.config.productKey,t,n,r,a].join(":"),s=(0,R["default"])(u),c="XMPP-Anonymous "+s,f={Authorization:c},l={primary_email:y.email,unique_id:y.email,password:y.password,push_routing:this.config.pushAgent,product:this.config.productKey,country_code:y.countryCode,device_id:y.udid,version:this.config.clientVersion},e.next=13,this.httpClient.post("/signup",{headers:f,data:l});case 13:return d=e.sent,h=this.host.models.User.inject(d.data.user),p=d.data.auth,v={user:h,auth:p},this.host.emit("signUp",v),e.abrupt("return",v);case 19:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"signOut",value:function(){var t=(0,x["default"])(w["default"].mark(function e(){
return w["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpClient.post("/logout"));case 1:case"end":return t.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"me",value:function(){var t=(0,x["default"])(w["default"].mark(function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return w["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.host.isSignedIn()){e.next=2;break}return e.abrupt("return",b["default"].reject(new U["default"].NotSignedInError));case 2:return e.abrupt("return",this.find(this.host.getCurrentUser().id,t));case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,x["default"])(w["default"].mark(function e(t){var n,r,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return w["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(o=F["default"].defaults(o,{ignoreNotFound:!1,bypassCache:!1}),this.host.requireUser(),n=null,o.bypassCache){e.next=11;break}if(n=this.host.models.User.get(t),!n||n.$temporary){e.next=11;break}return e.abrupt("return",n);case 11:return e.next=13,this.host.api.users.find(t);case 13:if(r=e.sent,!r){e.next=19;break}n=this.host.models.User.inject(r),delete n.$temporary,e.next=21;break;case 19:if(o.ignoreNotFound){e.next=21;break}throw new U["default"].NotFoundError(this.host.models.User.name,t);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.User.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.User.getMulti(t)}}],[{key:"getSignInAuthHeader",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "productKey" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "productKey" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "password" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=[t,e,n].join(":"),o=(0,R["default"])(r),u="XMPP-Simple "+o;return u}}]),e}(V["default"]),o(c.prototype,"me",[u],(0,g["default"])(c.prototype,"me"),c.prototype),o(c.prototype,"find",[s],(0,g["default"])(c.prototype,"find"),c.prototype),c);e["default"]=W,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(469),__esModule:!0}},function(t,e,n){n(470);var r=n(324).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(333),o=n(390).f;n(345)("getOwnPropertyDescriptor",function(){return function(t,e){return o(r(t),e)}})},function(t,e,n){var r;(function(o){!function(){function i(t){var e,n,r,o="",i=-1;if(t&&t.length)for(r=t.length;(i+=1)<r;)e=t.charCodeAt(i),n=r>i+1?t.charCodeAt(i+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),i+=1),127>=e?o+=String.fromCharCode(e):2047>=e?o+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o}function a(t){var e,n,r,o,i,a,u=[];if(e=n=r=o=i=0,t&&t.length)for(a=t.length,t+="";a>e;)r=t.charCodeAt(e),n+=1,128>r?(u[n]=String.fromCharCode(r),e+=1):r>191&&224>r?(o=t.charCodeAt(e+1),u[n]=String.fromCharCode((31&r)<<6|63&o),e+=2):(o=t.charCodeAt(e+1),i=t.charCodeAt(e+2),u[n]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),e+=3);return u.join("")}function u(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function s(t,e){return t<<e|t>>>32-e}function c(t,e){for(var n,r=e?"0123456789ABCDEF":"0123456789abcdef",o="",i=0,a=t.length;a>i;i+=1)n=t.charCodeAt(i),o+=r.charAt(n>>>4&15)+r.charAt(15&n);return o}function f(t){var e,n=32*t.length,r="";for(e=0;n>e;e+=8)r+=String.fromCharCode(t[e>>5]>>>24-e%32&255);return r}function l(t){var e,n=32*t.length,r="";for(e=0;n>e;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function d(t){var e,n=8*t.length,r=Array(t.length>>2),o=r.length;for(e=0;o>e;e+=1)r[e]=0;for(e=0;n>e;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return r}function h(t){var e,n=8*t.length,r=Array(t.length>>2),o=r.length;for(e=0;o>e;e+=1)r[e]=0;for(e=0;n>e;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return r}function p(t,e){var n,r,o,i,a,u,s,c,f=e.length,l=Array();for(u=Array(Math.ceil(t.length/2)),i=u.length,n=0;i>n;n+=1)u[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);for(;u.length>0;){for(a=Array(),o=0,n=0;n<u.length;n+=1)o=(o<<16)+u[n],r=Math.floor(o/f),o-=r*f,(a.length>0||r>0)&&(a[a.length]=r);l[l.length]=o,u=a}for(s="",n=l.length-1;n>=0;n--)s+=e.charAt(l[n]);for(c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),n=s.length;c>n;n+=1)s=e[0]+s;return s}function v(t,e){var n,r,o,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="",u=t.length;for(e=e||"=",n=0;u>n;n+=3)for(o=t.charCodeAt(n)<<16|(u>n+1?t.charCodeAt(n+1)<<8:0)|(u>n+2?t.charCodeAt(n+2):0),r=0;4>r;r+=1)a+=8*n+6*r>8*t.length?e:i.charAt(o>>>6*(3-r)&63);return a}var y;y={VERSION:"1.0.5",Base64:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="=",n=!0;this.encode=function(r){var o,a,u,s="",c=r.length;for(e=e||"=",r=n?i(r):r,o=0;c>o;o+=3)for(u=r.charCodeAt(o)<<16|(c>o+1?r.charCodeAt(o+1)<<8:0)|(c>o+2?r.charCodeAt(o+2):0),a=0;4>a;a+=1)s+=8*o+6*a>8*c?e:t.charAt(u>>>6*(3-a)&63);return s},this.decode=function(r){var o,i,u,s,c,f,l,d,h,p,v="",y=[];if(!r)return r;o=p=0,r=r.replace(new RegExp("\\"+e,"gi"),"");do c=t.indexOf(r.charAt(o+=1)),f=t.indexOf(r.charAt(o+=1)),l=t.indexOf(r.charAt(o+=1)),d=t.indexOf(r.charAt(o+=1)),h=c<<18|f<<12|l<<6|d,i=h>>16&255,u=h>>8&255,s=255&h,p+=1,64===l?y[p]=String.fromCharCode(i):64===d?y[p]=String.fromCharCode(i,u):y[p]=String.fromCharCode(i,u,s);while(o<r.length);return v=y.join(""),v=n?a(v):v},this.setPad=function(t){return e=t||e,this},this.setTab=function(e){return t=e||t,this},this.setUTF8=function(t){return"boolean"==typeof t&&(n=t),this}},CRC32:function(t){var e,n,r,o=0,a=0,u=0;for(t=i(t),e=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o=-1^o,n=0,r=t.length;r>n;n+=1)u=255&(o^t.charCodeAt(n)),a="0x"+e.substr(9*u,8),o=o>>>8^a;return(-1^o)>>>0},MD5:function(t){function e(t){return t=b?i(t):t,l(r(d(t),8*t.length))}function n(t,e){var n,o,a,u,s;for(t=b?i(t):t,e=b?i(e):e,n=d(t),n.length>16&&(n=r(n,8*t.length)),o=Array(16),a=Array(16),s=0;16>s;s+=1)o[s]=909522486^n[s],a[s]=1549556828^n[s];return u=r(o.concat(d(e)),512+8*e.length),l(r(a.concat(u),640))}function r(t,e){var n,r,o,i,s,c=1732584193,l=-271733879,d=-1732584194,p=271733878;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,n=0;n<t.length;n+=16)r=c,o=l,i=d,s=p,c=a(c,l,d,p,t[n+0],7,-680876936),p=a(p,c,l,d,t[n+1],12,-389564586),d=a(d,p,c,l,t[n+2],17,606105819),l=a(l,d,p,c,t[n+3],22,-1044525330),c=a(c,l,d,p,t[n+4],7,-176418897),p=a(p,c,l,d,t[n+5],12,1200080426),d=a(d,p,c,l,t[n+6],17,-1473231341),l=a(l,d,p,c,t[n+7],22,-45705983),c=a(c,l,d,p,t[n+8],7,1770035416),p=a(p,c,l,d,t[n+9],12,-1958414417),d=a(d,p,c,l,t[n+10],17,-42063),l=a(l,d,p,c,t[n+11],22,-1990404162),c=a(c,l,d,p,t[n+12],7,1804603682),p=a(p,c,l,d,t[n+13],12,-40341101),d=a(d,p,c,l,t[n+14],17,-1502002290),l=a(l,d,p,c,t[n+15],22,1236535329),c=f(c,l,d,p,t[n+1],5,-165796510),p=f(p,c,l,d,t[n+6],9,-1069501632),d=f(d,p,c,l,t[n+11],14,643717713),l=f(l,d,p,c,t[n+0],20,-373897302),c=f(c,l,d,p,t[n+5],5,-701558691),p=f(p,c,l,d,t[n+10],9,38016083),d=f(d,p,c,l,t[n+15],14,-660478335),l=f(l,d,p,c,t[n+4],20,-405537848),c=f(c,l,d,p,t[n+9],5,568446438),p=f(p,c,l,d,t[n+14],9,-1019803690),d=f(d,p,c,l,t[n+3],14,-187363961),l=f(l,d,p,c,t[n+8],20,1163531501),c=f(c,l,d,p,t[n+13],5,-1444681467),p=f(p,c,l,d,t[n+2],9,-51403784),d=f(d,p,c,l,t[n+7],14,1735328473),l=f(l,d,p,c,t[n+12],20,-1926607734),c=h(c,l,d,p,t[n+5],4,-378558),p=h(p,c,l,d,t[n+8],11,-2022574463),d=h(d,p,c,l,t[n+11],16,1839030562),l=h(l,d,p,c,t[n+14],23,-35309556),c=h(c,l,d,p,t[n+1],4,-1530992060),p=h(p,c,l,d,t[n+4],11,1272893353),d=h(d,p,c,l,t[n+7],16,-155497632),l=h(l,d,p,c,t[n+10],23,-1094730640),c=h(c,l,d,p,t[n+13],4,681279174),p=h(p,c,l,d,t[n+0],11,-358537222),d=h(d,p,c,l,t[n+3],16,-722521979),l=h(l,d,p,c,t[n+6],23,76029189),c=h(c,l,d,p,t[n+9],4,-640364487),p=h(p,c,l,d,t[n+12],11,-421815835),d=h(d,p,c,l,t[n+15],16,530742520),l=h(l,d,p,c,t[n+2],23,-995338651),c=y(c,l,d,p,t[n+0],6,-198630844),p=y(p,c,l,d,t[n+7],10,1126891415),d=y(d,p,c,l,t[n+14],15,-1416354905),l=y(l,d,p,c,t[n+5],21,-57434055),c=y(c,l,d,p,t[n+12],6,1700485571),p=y(p,c,l,d,t[n+3],10,-1894986606),d=y(d,p,c,l,t[n+10],15,-1051523),l=y(l,d,p,c,t[n+1],21,-2054922799),c=y(c,l,d,p,t[n+8],6,1873313359),p=y(p,c,l,d,t[n+15],10,-30611744),d=y(d,p,c,l,t[n+6],15,-1560198380),l=y(l,d,p,c,t[n+13],21,1309151649),c=y(c,l,d,p,t[n+4],6,-145523070),p=y(p,c,l,d,t[n+11],10,-1120210379),d=y(d,p,c,l,t[n+2],15,718787259),l=y(l,d,p,c,t[n+9],21,-343485551),c=u(c,r),l=u(l,o),d=u(d,i),p=u(p,s);return Array(c,l,d,p)}function o(t,e,n,r,o,i){return u(s(u(u(e,t),u(r,i)),o),n)}function a(t,e,n,r,i,a,u){return o(e&n|~e&r,t,e,i,a,u)}function f(t,e,n,r,i,a,u){return o(e&r|n&~r,t,e,i,a,u)}function h(t,e,n,r,i,a,u){return o(e^n^r,t,e,i,a,u)}function y(t,e,n,r,i,a,u){return o(n^(e|~r),t,e,i,a,u)}var g=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,m=t&&"string"==typeof t.pad?t.pda:"=",b=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t,b),g)},this.b64=function(t){return v(e(t),m)},this.any=function(t,n){return p(e(t,b),n)},this.raw=function(t){return e(t,b)},this.hex_hmac=function(t,e){return c(n(t,e),g)},this.b64_hmac=function(t,e){return v(n(t,e),m)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(g=t),this},this.setPad=function(t){return m=t||m,this},this.setUTF8=function(t){return"boolean"==typeof t&&(b=t),this}},SHA1:function(t){function e(t){return t=y?i(t):t,f(r(h(t),8*t.length))}function n(t,e){var n,o,a,u,s;for(t=y?i(t):t,e=y?i(e):e,n=h(t),n.length>16&&(n=r(n,8*t.length)),o=Array(16),a=Array(16),u=0;16>u;u+=1)o[u]=909522486^n[u],a[u]=1549556828^n[u];return s=r(o.concat(h(e)),512+8*e.length),f(r(a.concat(s),672))}function r(t,e){var n,r,i,c,f,l,d,h,p=Array(80),v=1732584193,y=-271733879,g=-1732584194,m=271733878,b=-1009589776;for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,n=0;n<t.length;n+=16){for(c=v,f=y,l=g,d=m,h=b,r=0;80>r;r+=1)16>r?p[r]=t[n+r]:p[r]=s(p[r-3]^p[r-8]^p[r-14]^p[r-16],1),i=u(u(s(v,5),o(r,y,g,m)),u(u(b,p[r]),a(r))),b=m,m=g,g=s(y,30),y=v,v=i;v=u(v,c),y=u(y,f),g=u(g,l),m=u(m,d),b=u(b,h)}return Array(v,y,g,m,b)}function o(t,e,n,r){return 20>t?e&n|~e&r:40>t?e^n^r:60>t?e&n|e&r|n&r:e^n^r}function a(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}var l=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,d=t&&"string"==typeof t.pad?t.pda:"=",y=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t,y),l)},this.b64=function(t){return v(e(t,y),d)},this.any=function(t,n){return p(e(t,y),n)},this.raw=function(t){return e(t,y)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),d)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(l=t),this},this.setPad=function(t){return d=t||d,this},this.setUTF8=function(t){return"boolean"==typeof t&&(y=t),this}},SHA256:function(t){function e(t,e){return t=e?i(t):t,f(m(h(t),8*t.length))}function n(t,e){t=E?i(t):t,e=E?i(e):e;var n,r=0,o=h(t),a=Array(16),u=Array(16);for(o.length>16&&(o=m(o,8*t.length));16>r;r+=1)a[r]=909522486^o[r],u[r]=1549556828^o[r];return n=m(a.concat(h(e)),512+8*e.length),f(m(u.concat(n),768))}function r(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}function l(t){return r(t,2)^r(t,13)^r(t,22)}function d(t){return r(t,6)^r(t,11)^r(t,25)}function y(t){return r(t,7)^r(t,18)^o(t,3)}function g(t){return r(t,17)^r(t,19)^o(t,10)}function m(t,e){var n,r,o,i,c,f,h,p,v,m,_,w,E=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],x=new Array(64);for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,v=0;v<t.length;v+=16){for(n=E[0],r=E[1],o=E[2],i=E[3],c=E[4],f=E[5],h=E[6],p=E[7],m=0;64>m;m+=1)16>m?x[m]=t[m+v]:x[m]=u(u(u(g(x[m-2]),x[m-7]),y(x[m-15])),x[m-16]),_=u(u(u(u(p,d(c)),a(c,f,h)),b[m]),x[m]),w=u(l(n),s(n,r,o)),p=h,h=f,f=c,c=u(i,_),i=o,o=r,r=n,n=u(_,w);E[0]=u(n,E[0]),E[1]=u(r,E[1]),E[2]=u(o,E[2]),E[3]=u(i,E[3]),E[4]=u(c,E[4]),E[5]=u(f,E[5]),E[6]=u(h,E[6]),E[7]=u(p,E[7])}return E}var b,_=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,w=t&&"string"==typeof t.pad?t.pda:"=",E=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t,E))},this.b64=function(t){return v(e(t,E),w)},this.any=function(t,n){return p(e(t,E),n)},this.raw=function(t){return e(t,E)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),w)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(_=t),this},this.setPad=function(t){return w=t||w,this},this.setUTF8=function(t){return"boolean"==typeof t&&(E=t),this},b=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(t){function e(t){return t=w?i(t):t,f(r(h(t),8*t.length))}function n(t,e){t=w?i(t):t,e=w?i(e):e;var n,o=0,a=h(t),u=Array(32),s=Array(32);for(a.length>32&&(a=r(a,8*t.length));32>o;o+=1)u[o]=909522486^a[o],s[o]=1549556828^a[o];return n=r(u.concat(h(e)),1024+8*e.length),f(r(s.concat(n),1536))}function r(t,e){var n,r,i,c=new Array(80),f=new Array(16),h=[new o(1779033703,-205731576),new o(-1150833019,-2067093701),new o(1013904242,-23791573),new o(-1521486534,1595750129),new o(1359893119,-1377402159),new o(-1694144372,725511199),new o(528734635,-79577749),new o(1541459225,327033209)],p=new o(0,0),v=new o(0,0),b=new o(0,0),_=new o(0,0),w=new o(0,0),E=new o(0,0),x=new o(0,0),A=new o(0,0),O=new o(0,0),j=new o(0,0),k=new o(0,0),I=new o(0,0),T=new o(0,0),S=new o(0,0),M=new o(0,0),C=new o(0,0),P=new o(0,0);for(void 0===m&&(m=[new o(1116352408,-685199838),new o(1899447441,602891725),new o(-1245643825,-330482897),new o(-373957723,-2121671748),new o(961987163,-213338824),new o(1508970993,-1241133031),new o(-1841331548,-1357295717),new o(-1424204075,-630357736),new o(-670586216,-1560083902),new o(310598401,1164996542),new o(607225278,1323610764),new o(1426881987,-704662302),new o(1925078388,-226784913),new o(-2132889090,991336113),new o(-1680079193,633803317),new o(-1046744716,-815192428),new o(-459576895,-1628353838),new o(-272742522,944711139),new o(264347078,-1953704523),new o(604807628,2007800933),new o(770255983,1495990901),new o(1249150122,1856431235),new o(1555081692,-1119749164),new o(1996064986,-2096016459),new o(-1740746414,-295247957),new o(-1473132947,766784016),new o(-1341970488,-1728372417),new o(-1084653625,-1091629340),new o(-958395405,1034457026),new o(-710438585,-1828018395),new o(113926993,-536640913),new o(338241895,168717936),new o(666307205,1188179964),new o(773529912,1546045734),new o(1294757372,1522805485),new o(1396182291,-1651133473),new o(1695183700,-1951439906),new o(1986661051,1014477480),new o(-2117940946,1206759142),new o(-1838011259,344077627),new o(-1564481375,1290863460),new o(-1474664885,-1136513023),new o(-1035236496,-789014639),new o(-949202525,106217008),new o(-778901479,-688958952),new o(-694614492,1432725776),new o(-200395387,1467031594),new o(275423344,851169720),new o(430227734,-1194143544),new o(506948616,1363258195),new o(659060556,-544281703),new o(883997877,-509917016),new o(958139571,-976659869),new o(1322822218,-482243893),new o(1537002063,2003034995),new o(1747873779,-692930397),new o(1955562222,1575990012),new o(2024104815,1125592928),new o(-2067236844,-1578062990),new o(-1933114872,442776044),new o(-1866530822,593698344),new o(-1538233109,-561857047),new o(-1090935817,-1295615723),new o(-965641998,-479046869),new o(-903397682,-366583396),new o(-779700025,566280711),new o(-354779690,-840897762),new o(-176337025,-294727304),new o(116418474,1914138554),new o(174292421,-1563912026),new o(289380356,-1090974290),new o(460393269,320620315),new o(685471733,587496836),new o(852142971,1086792851),new o(1017036298,365543100),new o(1126000580,-1676669620),new o(1288033470,-885112138),new o(1501505948,-60457430),new o(1607167915,987167468),new o(1816402316,1246189591)]),r=0;80>r;r+=1)c[r]=new o(0,0);for(t[e>>5]|=128<<24-(31&e),t[(e+128>>10<<5)+31]=e,i=t.length,r=0;i>r;r+=32){for(a(b,h[0]),a(_,h[1]),a(w,h[2]),a(E,h[3]),a(x,h[4]),a(A,h[5]),a(O,h[6]),a(j,h[7]),n=0;16>n;n+=1)c[n].h=t[r+2*n],c[n].l=t[r+2*n+1];for(n=16;80>n;n+=1)u(M,c[n-2],19),s(C,c[n-2],29),l(P,c[n-2],6),I.l=M.l^C.l^P.l,I.h=M.h^C.h^P.h,u(M,c[n-15],1),u(C,c[n-15],8),l(P,c[n-15],7),k.l=M.l^C.l^P.l,k.h=M.h^C.h^P.h,y(c[n],I,c[n-7],k,c[n-16]);for(n=0;80>n;n+=1)T.l=x.l&A.l^~x.l&O.l,T.h=x.h&A.h^~x.h&O.h,u(M,x,14),u(C,x,18),s(P,x,9),I.l=M.l^C.l^P.l,I.h=M.h^C.h^P.h,u(M,b,28),s(C,b,2),s(P,b,7),k.l=M.l^C.l^P.l,k.h=M.h^C.h^P.h,S.l=b.l&_.l^b.l&w.l^_.l&w.l,S.h=b.h&_.h^b.h&w.h^_.h&w.h,g(p,j,I,T,m[n],c[n]),d(v,k,S),a(j,O),a(O,A),a(A,x),d(x,E,p),a(E,w),a(w,_),a(_,b),d(b,p,v);d(h[0],h[0],b),d(h[1],h[1],_),d(h[2],h[2],w),d(h[3],h[3],E),d(h[4],h[4],x),d(h[5],h[5],A),d(h[6],h[6],O),d(h[7],h[7],j)}for(r=0;8>r;r+=1)f[2*r]=h[r].h,f[2*r+1]=h[r].l;return f}function o(t,e){this.h=t,this.l=e}function a(t,e){t.h=e.h,t.l=e.l}function u(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n|e.l<<32-n}function s(t,e,n){t.l=e.h>>>n|e.l<<32-n,t.h=e.l>>>n|e.h<<32-n}function l(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n}function d(t,e,n){var r=(65535&e.l)+(65535&n.l),o=(e.l>>>16)+(n.l>>>16)+(r>>>16),i=(65535&e.h)+(65535&n.h)+(o>>>16),a=(e.h>>>16)+(n.h>>>16)+(i>>>16);t.l=65535&r|o<<16,t.h=65535&i|a<<16}function y(t,e,n,r,o){var i=(65535&e.l)+(65535&n.l)+(65535&r.l)+(65535&o.l),a=(e.l>>>16)+(n.l>>>16)+(r.l>>>16)+(o.l>>>16)+(i>>>16),u=(65535&e.h)+(65535&n.h)+(65535&r.h)+(65535&o.h)+(a>>>16),s=(e.h>>>16)+(n.h>>>16)+(r.h>>>16)+(o.h>>>16)+(u>>>16);t.l=65535&i|a<<16,t.h=65535&u|s<<16}function g(t,e,n,r,o,i){var a=(65535&e.l)+(65535&n.l)+(65535&r.l)+(65535&o.l)+(65535&i.l),u=(e.l>>>16)+(n.l>>>16)+(r.l>>>16)+(o.l>>>16)+(i.l>>>16)+(a>>>16),s=(65535&e.h)+(65535&n.h)+(65535&r.h)+(65535&o.h)+(65535&i.h)+(u>>>16),c=(e.h>>>16)+(n.h>>>16)+(r.h>>>16)+(o.h>>>16)+(i.h>>>16)+(s>>>16);t.l=65535&a|u<<16,t.h=65535&s|c<<16}var m,b=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,_=t&&"string"==typeof t.pad?t.pda:"=",w=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return c(e(t))},this.b64=function(t){return v(e(t),_)},this.any=function(t,n){return p(e(t),n)},this.raw=function(t){return e(t,w)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),_)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(b=t),this},this.setPad=function(t){return _=t||_,this},this.setUTF8=function(t){return"boolean"==typeof t&&(w=t),this}},RMD160:function(t){function e(t){return t=g?i(t):t,r(o(d(t),8*t.length))}function n(t,e){t=g?i(t):t,e=g?i(e):e;var n,a,u=d(t),s=Array(16),c=Array(16);for(u.length>16&&(u=o(u,8*t.length)),n=0;16>n;n+=1)s[n]=909522486^u[n],c[n]=1549556828^u[n];return a=o(s.concat(d(e)),512+8*e.length),r(o(c.concat(a),672))}function r(t){var e,n="",r=32*t.length;for(e=0;r>e;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function o(t,e){var n,r,o,i,c,d,h,p,v,y,g,E,x,A,O=1732584193,j=4023233417,k=2562383102,I=271733878,T=3285377520;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,i=t.length,o=0;i>o;o+=16){for(c=y=O,d=g=j,h=E=k,p=x=I,v=A=T,r=0;79>=r;r+=1)n=u(c,a(r,d,h,p)),n=u(n,t[o+m[r]]),n=u(n,f(r)),n=u(s(n,_[r]),v),c=v,v=p,p=s(h,10),h=d,d=n,n=u(y,a(79-r,g,E,x)),n=u(n,t[o+b[r]]),n=u(n,l(r)),n=u(s(n,w[r]),A),y=A,A=x,x=s(E,10),E=g,g=n;n=u(j,u(h,x)),j=u(k,u(p,A)),k=u(I,u(v,y)),I=u(T,u(c,g)),T=u(O,u(d,E)),O=n}return[O,j,k,I,T]}function a(t,e,n,r){return t>=0&&15>=t?e^n^r:t>=16&&31>=t?e&n|~e&r:t>=32&&47>=t?(e|~n)^r:t>=48&&63>=t?e&r|n&~r:t>=64&&79>=t?e^(n|~r):"rmd160_f: j out of range"}function f(t){return t>=0&&15>=t?0:t>=16&&31>=t?1518500249:t>=32&&47>=t?1859775393:t>=48&&63>=t?2400959708:t>=64&&79>=t?2840853838:"rmd160_K1: j out of range"}function l(t){return t>=0&&15>=t?1352829926:t>=16&&31>=t?1548603684:t>=32&&47>=t?1836072691:t>=48&&63>=t?2053994217:t>=64&&79>=t?0:"rmd160_K2: j out of range"}var h=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,y=t&&"string"==typeof t.pad?t.pda:"=",g=t&&"boolean"==typeof t.utf8?t.utf8:!0,m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],w=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(t){return c(e(t,g))},this.b64=function(t){return v(e(t,g),y)},this.any=function(t,n){return p(e(t,g),n)},this.raw=function(t){return e(t,g)},this.hex_hmac=function(t,e){return c(n(t,e))},this.b64_hmac=function(t,e){return v(n(t,e),y)},this.any_hmac=function(t,e,r){return p(n(t,e),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(h=t),this},this.setPad=function(t){return"undefined"!=typeof t&&(y=t),this},this.setUTF8=function(t){return"boolean"==typeof t&&(g=t),this}}},function(i,a){var u=!1;u=e,e&&"object"==typeof o&&o&&o===o.global&&(i=o),r=function(){return y}.call(e,n,e,t),!(r!==a&&(t.exports=r))}(this)}()}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(392),i=r(o),a=n(422),u=r(a),s=n(423),c=r(s),f=n(290),l=r(f),d=function(){function t(e,n){(0,u["default"])(this,t),(0,i["default"])(this,n),this.host=e,this.config=e.config,this.httpClient=e.httpClient}return(0,c["default"])(t,[{key:"_resolveModelId",value:function(t){return"string"==typeof t?t:t.serverId?t.serverId:t.id?t.id:null}},{key:"_resolveEntity",value:function(t,e){for(var n=0;n<e.length;n++){var r=e[n],o=this.host.modelsByEntityType[r].get(t);if(o)return o}return null}},{key:"_resolveEntityType",value:function(t,e){var n=this._resolveEntity(t,e);return n?n.$entityType:null}},{key:"mounted",value:function(){}},{key:"dispose",value:function(){}}]),t}();e["default"]=d,(0,i["default"])(d.prototype,l["default"].prototype),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(474),i=r(o),a=n(422),u=r(a),s=n(423),c=r(s),f=n(453),l=r(f),d=function(){function t(e){var n=this;(0,u["default"])(this,t),this.EVENTS={client_advisory:function(t){switch(t.advisory.name){case"replay_start":this.host.reactToAdvisoryEvent("replayStart",{replayMessageCount:t.advisory.replay_message_count});break;case"replay_stop":this.host.reactToAdvisoryEvent("replayStop")}},"message|group_message":function(t){this.host.conversations.reactToIncomingMessageEvent(t)},"message:status|group:message:status":function(t){this.host.messages.reactToMessageStatusEvent(t)},friends:function(t){this.host.conversations.reactToFriendsEvent(t)},presence:function(t){this.host.presence.reactToPresenceEvent(t)},"push:credentials:requested":function(t){},bang:function(t){this.host.groups.reactToBangEvent(t)},update:function(t){var e=t.type,n=(0,i["default"])(t,["type"]);this.host.injectModel(n,e)},"account:settings":function(t){},"message:is_typing":function(t){},"push:credentials":function(t){},remote_wipe:function(t){},validated:function(t){},conversation_mute:function(t){}},this.host=e;var r=[];l["default"].each(this.EVENTS,function(t,e){e.includes("|")&&(r.push(e),e.split("|").forEach(function(e){return n.EVENTS[e]=t}))}),r.forEach(function(t){return delete n.EVENTS[t]})}return(0,c["default"])(t,[{key:"emit",value:function(t){this.EVENTS[t.type]?this.EVENTS[t.type].call(this,t.data):this.logger&&this.logger.error("unhandled event: "+t.type,t.data)}}]),t}();e["default"]=d,t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var i,a,u,s,c,f,l=n(468),d=r(l),h=n(428),p=r(h),v=n(325),y=r(v),g=n(413),m=r(g),b=n(396),_=r(b),w=n(421),E=r(w),x=n(443),A=r(x),O=n(422),j=r(O),k=n(423),I=r(k),T=n(446),S=r(T),M=n(447),C=r(M),P=n(472),B=r(P),R=n(476),D=r(R),F=n(453),G=r(F),z=n(483),L=r(z),V=(i=L["default"]["private"],a=L["default"]["private"],u=L["default"]["private"],s=L["default"]["private"],(0,L["default"])((f=function(t){function e(t,n){(0,j["default"])(this,e);var r=(0,S["default"])(this,(0,A["default"])(e).call(this,t,n));return r._throtelled_flushQueuedAcks=G["default"].throttle(r._flushQueuedAcks.bind(r),r.config.flushAckInterval,{leading:!1}),r}return(0,C["default"])(e,t),(0,I["default"])(e,[{key:"mounted",value:function(){this._queuedAcks=[],this._statsByEventType={}}},{key:"dispose",value:function(){this._queuedAcks=null,this._statsByEventType=null,this._throtelled_flushQueuedAcks.cancel&&this._throtelled_flushQueuedAcks.cancel()}},{key:"connect",value:function(){var t=(0,E["default"])(m["default"].mark(function e(){var t,n=this;return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.host.requireUser(),!this.eventSource){e.next=4;break}return this.logger.warn("already connected"),e.abrupt("return");case 4:return t=this.config.baseUrl+"/events",this.logger.info("connecting events"),this.eventSource=new D["default"](t,{headers:{Authorization:this.httpClient.getAuthHeader(),"TT-X-Features":this.config.eventsFeatures}}),e.abrupt("return",new _["default"](function(t,e){var r=void 0;n.eventSource.addEventListener("open",function(){n.logger.info("open"),r=!0,t()}),n.eventSource.addEventListener("message",n._onEvent.bind(n)),n.eventSource.addEventListener("error",function(t){r||e(),n._onError(t)}),n.eventSource.addEventListener("close",function(){n.logger.info("close")})}));case 8:case"end":
return e.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.eventSource&&this.eventSource.close(),this.eventSource=null}},{key:"reconnect",value:function(){this.eventSource&&this.disconnect(),this.connect()}},{key:"_onEvent",value:function(t){var e=this,n=t.data;if(n.includes("\n"))return void n.split("\n").forEach(function(t){return e._onEvent({data:t})});var r=n;try{n=JSON.parse(r)}catch(o){throw this.logger.error("error parsing ",r),o}var i=n.event_id,a=(0,y["default"])(n.event)[0],u=a.replace("tigertext:iq:",""),s=n.event[a];this._statsByEventType[u]||(this._statsByEventType[u]={count:0}),this._statsByEventType[u].count++,this.logger.info("incoming",u,s);var c=new this.host.models.Event(i,u,s,{_origData:r});try{this.host.eventRouter.emit(c),this.emit("event",c),this.config.autoAckEvents&&this.__queueAck(i)}catch(o){throw this.logger.error("error in event "+u,o,o.stack,{data:s}),o}}},{key:"_onError",value:function(t){var e=this;this.logger.warn("error",t,t.message||"",t.status||""),this.disconnect(),this.config.eventsAutoReconnect&&setTimeout(function(){e.connect()},this.config.eventsAutoReconnectDelay)}},{key:"__queueAck",value:function(t){var e;t=G["default"].arrayWrap(t),(e=this._queuedAcks).push.apply(e,(0,p["default"])(t)),t.length>=this.config.flushAckMaxEvents?(this.logger.log("reached "+this.config.flushAckMaxEvents+" -- flushing"),this._flushQueuedAcks()):this._throtelled_flushQueuedAcks()}},{key:"_flushQueuedAcks",value:function(){this._queuedAcks.length>0&&(this.ack(this._queuedAcks),this._queuedAcks.length=0)}},{key:"ack",value:function(){var t=(0,E["default"])(m["default"].mark(function e(t){return m["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),t=G["default"].arrayWrap(t),this.logger.log("ack",t),e.prev=3,e.next=6,this.httpClient.post("/events/ack",{data:{events:t}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),this.logger.warn("some events not acked",t);case 11:case"end":return e.stop()}},e,this,[[3,8]])}));return function(e){return t.apply(this,arguments)}}()}]),e}(B["default"]),o(f.prototype,"_onEvent",[i],(0,d["default"])(f.prototype,"_onEvent"),f.prototype),o(f.prototype,"_onError",[a],(0,d["default"])(f.prototype,"_onError"),f.prototype),o(f.prototype,"__queueAck",[u],(0,d["default"])(f.prototype,"__queueAck"),f.prototype),o(f.prototype,"_flushQueuedAcks",[s],(0,d["default"])(f.prototype,"_flushQueuedAcks"),f.prototype),c=f))||c);e["default"]=V,t.exports=e["default"]},function(t,e,n){(function(e){function r(t){return Object.getPrototypeOf(t)===Object.prototype}function o(t,n){function c(){v!==o.CLOSED&&(v=o.CONNECTING,h("error",new i("error")),E&&(t=E,E=null),setTimeout(function(){v===o.CONNECTING&&d()},y.reconnectInterval))}function d(){var a=s(t),u="https:"==a.protocol;if(a.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},m&&(a.headers["Last-Event-ID"]=m),n&&n.headers&&r(n.headers))for(var _ in n.headers){var w=n.headers[_];w&&(a.headers[_]=w)}if(a.rejectUnauthorized=!(n&&0==n.rejectUnauthorized),n&&n.proxy){var x=s(n.proxy);a.path=t,a.headers.Host=a.host,a.hostname=x.hostname,a.host=x.host,a.port=x.port}g=(u?f:l).request(a,function(n){if(301==n.statusCode||307==n.statusCode)return n.headers.location?(307==n.statusCode&&(E=t),t=n.headers.location,void e.nextTick(d)):void h("error",new i("error",{status:n.statusCode}));if(200===n.statusCode){v=o.OPEN,n.on("close",c),n.on("end",c),h("open",new i("open"));var r="";n.on("data",function(t){r+=t;for(var e=0,n=r.length;n>e;){b&&("\n"===r[e]&&++e,b=!1);for(var o,i=-1,a=-1,u=e;0>i&&n>u;++u)o=r[u],":"===o?0>a&&(a=u-e):"\r"===o?(b=!0,i=u-e):"\n"===o&&(i=u-e);if(0>i)break;p(r,e,a,i),e+=i+1}e===n?r="":e>0&&(r=r.slice(e))})}else if(h("error",new i("error",{status:n.statusCode})),204==n.statusCode)return y.close()}),g.on("error",c),g.setNoDelay&&g.setNoDelay(!0),g.end()}function h(){y.listeners(arguments[0]).length>0&&y.emit.apply(y,arguments)}function p(e,n,r,o){if(0===o){if(_.length>0){var i=w||"message";h(i,new a(i,{data:_.slice(0,-1),lastEventId:m,origin:u(t)})),_=""}w=void 0}else if(r>0){var s=0>r,c=0,f=e.slice(n,n+(s?o:r));c=s?o:" "!==e[n+r+1]?r+1:r+2,n+=c;var l=o-c,d=e.slice(n,n+l);if("data"===f)_+=d+"\n";else if("event"===f)w=d;else if("id"===f)m=d;else if("retry"===f){var p=parseInt(d,10);Number.isNaN(p)||(y.reconnectInterval=p)}}}var v=o.CONNECTING;Object.defineProperty(this,"readyState",{get:function(){return v}}),Object.defineProperty(this,"url",{get:function(){return t}});var y=this;y.reconnectInterval=1e3;var g,m="";n&&n.headers&&r(n.headers)&&n.headers["Last-Event-ID"]&&(m=n.headers["Last-Event-ID"],delete n.headers["Last-Event-ID"]);var b=!1,_="",w="",E=null;d(),this.close=function(){v!=o.CLOSED&&(v=o.CLOSED,g.abort&&g.abort(),g.xhr&&g.xhr.abort&&g.xhr.abort())}}function i(t,e){if(Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0}),e)for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}function a(t,e){Object.defineProperty(this,"type",{writable:!1,value:t,enumerable:!0});for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:e[n],enumerable:!0})}var u=n(477),s=n(315).parse,c=n(290),f=n(482),l=n(289),d=n(312);t.exports=o,d.inherits(o,c.EventEmitter),o.prototype.constructor=o,["open","error","message"].forEach(function(t){Object.defineProperty(o.prototype,"on"+t,{get:function(){var e=this.listeners(t)[0];return e?e._listener?e._listener:e:void 0},set:function(e){this.removeAllListeners(t),this.addEventListener(t,e)}})}),Object.defineProperty(o,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(o,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(o,"CLOSED",{enumerable:!0,value:2}),o.prototype.addEventListener=function(t,e){"function"==typeof e&&(e._listener=e,this.on(t,e))}}).call(e,n(282))},function(t,e,n){"use strict";function r(t){return"string"==typeof t&&(t=o(t)),t.protocol&&t.hostname?(t.protocol+"//"+t.host).toLowerCase():"null"}var o=n(478);r.same=function(t,e){return r(t)===r(e)},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var c,f,l,d,h=u.test(t),p=typeof e,v=this,y=0;for("object"!==p&&"string"!==p&&(n=e,e=null),n&&"function"!=typeof n&&(n=a.parse),e=i(e);y<s.length;y++)f=s[y],c=f[0],d=f[1],c!==c?v[d]=t:"string"==typeof c?~(l=t.indexOf(c))&&("number"==typeof f[2]?(v[d]=t.slice(0,l),t=t.slice(l+f[2])):(v[d]=t.slice(l),t=t.slice(0,l))):(l=c.exec(t))&&(v[d]=l[1],t=t.slice(0,t.length-l[0].length)),v[d]=v[d]||(f[3]||"port"===d&&h?e[d]||"":""),f[4]&&(v[d]=v[d].toLowerCase());n&&(v.query=n(v.query)),o(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.href=v.toString()}var o=n(479),i=n(480),a=n(481),u=/^\/(?!\/)/,s=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(t,e,n){var r=this;return"query"===t?("string"==typeof e&&e.length&&(e=(n||a.parse)(e)),r[t]=e):"port"===t?(r[t]=e,o(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="")):"hostname"===t?(r[t]=e,r.port&&(e+=":"+r.port),r.host=e):"host"===t?(r[t]=e,/\:\d+/.test(e)&&(e=e.split(":"),r.hostname=e[0],r.port=e[1])):r[t]=e,r.href=r.toString(),r},r.prototype.toString=function(t){t&&"function"==typeof t||(t=a.stringify);var e,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,e="object"==typeof n.query?t(n.query):n.query,e&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r},r.qs=a,r.location=i,t.exports=r},function(t,e){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){(function(e){"use strict";var r,o={hash:1,query:1};t.exports=function(t){t=t||e.location||{},r=r||n(478);var i,a={},u=typeof t;if("blob:"===t.protocol)a=new r(unescape(t.pathname),{});else if("string"===u){a=new r(t,{});for(i in o)delete a[i]}else if("object"===u)for(i in t)i in o||(a[i]=t[i]);return a}}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){for(var e,n=/([^=?&]+)=([^&]*)/g,r={};e=n.exec(t);r[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return r}function r(t,e){e=e||"";var n=[];"string"!=typeof e&&(e="?");for(var r in t)o.call(t,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""}var o=Object.prototype.hasOwnProperty;e.stringify=r,e.parse=n},function(t,e,n){var r=n(289),o=t.exports;for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.request=function(t,e){return t||(t={}),t.scheme="https",r.request.call(this,t,e)}},function(t,e){"use strict";function n(t){function e(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var u=new(Function.prototype.bind.apply(t,[null].concat(r))),s={},c={},f=!0,l=!1,d=void 0;try{for(var h,p=function(){var t=h.value,e=a.has(t);if(e)return"continue";var r=n[t];s[t]={get:function(){return c[t]||(c[t]=r.bind(u))},set:function(e){c[t]=e.bind(u),u[t]=e}}},v=o[Symbol.iterator]();!(f=(h=v.next()).done);f=!0)p()}catch(y){l=!0,d=y}finally{try{!f&&v["return"]&&v["return"]()}finally{if(l)throw d}}Object.defineProperties(this,s)}var n=t.prototype,o=Object.getOwnPropertyNames(n);for(var i in n)o.push(i);var a=new Set(r.filter(function(e){return e.target===t}).map(function(t){return t.name}));return e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var r=[];n["private"]=function(t,e){r.push({target:t.constructor,name:e})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,z["default"])(t);if(!Array.isArray(t)){var o=(0,F["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,R["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,z["default"])(s))?s.v:void 0}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,z["default"])(t);if(!Array.isArray(t)){var o=(0,F["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,R["default"])(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,z["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l,d,h,p,v,y,g,m,b,_,w,E,x,A,O,j,k,I,T,S,M,C,P,B=n(322),R=r(B),D=n(325),F=r(D),G=n(359),z=r(G),L=n(468),V=r(L),N=n(485),U=r(N),$=n(360),q=r($),W=n(396),K=r(W),H=n(392),Y=r(H),Z=n(413),X=r(Z),J=n(464),Q=r(J),tt=n(421),et=r(tt),nt=n(443),rt=r(nt),ot=n(422),it=r(ot),at=n(423),ut=r(at),st=n(446),ct=r(st),ft=n(447),lt=r(ft),dt=n(472),ht=r(dt),pt=n(453),vt=r(pt),yt=n(454),gt=n(483),mt=r(gt),bt=n(488),_t=r(bt),wt=n(504),Et=n(514),xt=r(Et),At=n(441),Ot=r(At),jt=n(515),kt=r(jt),It=(u=mt["default"]["private"],s=mt["default"]["private"],c=mt["default"]["private"],f=mt["default"]["private"],l=mt["default"]["private"],d=mt["default"]["private"],h=mt["default"]["private"],p=mt["default"]["private"],v=(0,yt.decorator)(),y=mt["default"]["private"],g=mt["default"]["private"],m=mt["default"]["private"],b=mt["default"]["private"],_=mt["default"]["private"],w=mt["default"]["private"],E=mt["default"]["private"],x=mt["default"]["private"],A=(0,yt.decorator)(),O=mt["default"]["private"],j=(0,yt.decorator)({memoize:!0}),k=(0,yt.decorator)(),I=mt["default"]["private"],T=mt["default"]["private"],S=mt["default"]["private"],M=(0,yt.decorator)(),(0,mt["default"])((P=function(t){function e(){var t;(0,it["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,ct["default"])(this,(t=(0,rt["default"])(e)).call.apply(t,[this].concat(r)));return i._throtelled_flushQueueMessageStatuses=i.config.flushSetMessageStatusInterval?vt["default"].throttle(i.__flushQueueMessageStatuses,i.config.flushSetMessageStatusInterval,{leading:!1}):i.__flushQueueMessageStatuses,i}return(0,lt["default"])(e,t),(0,ut["default"])(e,[{key:"mounted",value:function(){this._queuedMessageStatuses={deliveredIds:[],readIds:[]}}},{key:"dispose",value:function(){this._queuedMessageStatuses=null,yt.decorator.clear(this.downloadAttachmentURL)}},{key:"sendToConversation",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n){var r,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "conversationId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if(null==o||o instanceof Object){e.next=6;break}throw new TypeError('Value of argument "options" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+a(o));case 6:if("string"==typeof t||t instanceof Object){e.next=8;break}throw new TypeError('Value of argument "conversationId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 10:if(null==o||o instanceof Object){e.next=12;break}throw new TypeError('Value of argument "options" violates contract.\n\nExpected:\n?Object\n\nGot:\n'+i(o));case 12:t=this._resolveModelId(t),r=this.host.conversations.getById(t),r||xt["default"].raise("conversationId","not-found","Conversation not found"),e.t0=r.counterPartyType,e.next="user"===e.t0?18:"group"===e.t0?19:20;break;case 18:return e.abrupt("return",this.sendToUser(r.counterPartyId,n,(0,Q["default"])({},o,{organizationId:r.organizationId})));case 19:return e.abrupt("return",this.sendToGroup(r.counterPartyId,n,(0,Q["default"])({},o,{organizationId:r.organizationId})));case 20:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"sendToUser",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n){var r,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=o.organizationId,s=o.senderOrganizationId,c=o.recipientOrganizationId,f=o.metadata,l=o.attachmentFiles,d=o.attachmentFile;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:if(u?(s&&xt["default"].raise("senderOrganizationId","invalid","Cannot set senderOrganizationId if organizationId is set"),c&&xt["default"].raise("recipientOrganizationId","invalid","Cannot set recipientOrganizationId if organizationId is set"),s=c=u):s?c||(c=s):this.host.config.defaultOrganizationId?s=c=this.host.config.defaultOrganizationId:xt["default"].raise("senderOrganizationId or organizationId","required","Message is sent in the context of an organization. Provide `senderOrganizationId` or `organizationId` or set a default one with client.setDefaultOrganization(...)"),l=this.__validateAttachments(l||d),t=this._resolveModelId(t),this.host.users.getById(t)){e.next=24;break}return e.prev=12,e.next=15,this.host.users.find(t);case 15:r=e.sent,t=r.id,e.next=24;break;case 19:if(e.prev=19,e.t0=e["catch"](12),e.t0.code===Ot["default"].NotFoundError.CODE){e.next=23;break}throw e.t0;case 23:return e.abrupt("return",this.__sendToUnknownUser(t,n,{organizationId:u,senderOrganizationId:s,recipientOrganizationId:c,metadata:f,attachmentFiles:l}));case 24:return e.abrupt("return",this.__send("user",t,n,{senderOrganizationId:s,recipientOrganizationId:c,metadata:f,attachmentFiles:l}));case 25:case"end":return e.stop()}},e,this,[[12,19]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"__sendToUnknownUser",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n){var r,o,u,s,c,f,l=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=(l.organizationId,l.senderOrganizationId),h=l.recipientOrganizationId,p=l.metadata,v=l.attachmentFiles;return l.attachmentFile,X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return r=_t["default"].v4(),p&&(p=this.__normalizeMetadata(p)),h||(h=d),o=this.__getNextSortNumber(),e.next=14,this.host.api.messages.send({counterPartyId:t,body:n,senderOrganizationId:d,recipientOrganizationId:h,metadata:p,localId:r,attachment:v&&v[0]});case 14:return u=e.sent,e.next=17,this.host.users.find(t);case 17:return s=e.sent,c=this.host.conversations.ensureConversation("user",s.id,d),f=this.host.models.Message.inject({id:u.serverId,conversationId:c.id,counterParty:s,body:n,senderOrganizationId:d,recipientOrganizationId:h,sortNumber:o,createdAt:new Date,senderId:this.host.getCurrentUser().id,direction:wt.MessageDirection.OUTGOING,senderStatus:wt.MessageSenderStatus.SENT,recipientStatus:wt.MessageRecipientStatus.NEW,serverId:null,metadata:p,ttl:u.ttl}),v&&this.__setMessageAttachments(f,v),this.host.emit("message:sending",f),this.host.emit("message:sent",f),e.abrupt("return",f);case 24:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"sendToGroup",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n){var r,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=o.organizationId,s=o.metadata,c=o.attachmentFiles,f=o.attachmentFile;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return t=this._resolveModelId(t),r=this.host.models.Group.get(t),r?u=r.organizationId:u||(this.host.config.defaultOrganizationId?u=this.host.config.defaultOrganizationId:xt["default"].raise("organizationId","required","Message is sent in the context of an organization. Provide `organizationId` or set a default one with client.setDefaultOrganization(...)")),c=this.__validateAttachments(c||f),e.abrupt("return",this.__send("group",t,n,{senderOrganizationId:u,metadata:s,attachmentFiles:c}));case 13:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"sendToNewGroup",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n){var r,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=o.organizationId,s=o.groupName,c=o.groupMetadata,f=o.metadata,l=o.attachmentFiles,d=o.attachmentFile;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "userIds" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=6;break}throw new TypeError('Value of argument "userIds" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return t=t.map(this._resolveModelId.bind(this)),0==t.length&&xt["default"].raise("userIds","required"),u||(this.host.config.defaultOrganizationId?u=this.host.config.defaultOrganizationId:xt["default"].raise("organizationId","required","Message is sent in the context of an organization. Provide `organizationId` or set a default one with client.setDefaultOrganization(...)")),e.next=13,this.__prepareGroupForUsers(u,t,s,{groupMetadata:c});case 13:return r=e.sent,e.abrupt("return",this.sendToGroup(r,n,{organizationId:u,metadata:f,attachmentFiles:l,attachmentFile:d}));case 15:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"__validateAttachments",value:function(t){return t=vt["default"].arrayWrap(t),!vt["default"].isEmpty(t)&&t.length>1&&xt["default"].raise("attachmentFiles","invalid","currently only a single attachment is supported"),t}},{key:"__normalizeMetadata",value:function(t){return t?vt["default"].arrayWrap(t).map(function(t){return(0,Q["default"])({mimetype:"application/json"},t)}):null}},{key:"__getNextSortNumber",value:function(){var t=(0,vt["default"])(this.host.models.Message.getAll()).orderBy(["sortNumber"],["desc"]).first(),e=t?t.sortNumber:0,n=e+1e-6;return n}},{key:"__send",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n,r,o){var u,s,c,f,l,d=o.senderOrganizationId,h=o.recipientOrganizationId,p=o.metadata,v=o.attachmentFiles,y=arguments;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if(null!=y[3]&&"string"==typeof y[3].senderOrganizationId&&(null==y[3].recipientOrganizationId||"string"==typeof y[3].recipientOrganizationId)&&(null==y[3].metadata||Array.isArray(y[3].metadata)&&y[3].metadata.every(function(t){return t instanceof Object})||null==y[3].metadata||y[3].metadata instanceof Object)&&(null==y[3].attachmentFiles||Array.isArray(y[3].attachmentFiles)&&y[3].attachmentFiles.every(function(t){return"string"==typeof t||t instanceof Object}))){e.next=8;break}throw new TypeError("Value of argument 3 violates contract.\n\nExpected:\n{ senderOrganizationId: string;\n  recipientOrganizationId: ?string;\n  metadata: ?Array<Object> | ?Object;\n  attachmentFiles: ?Array<string | Object>;\n}\n\nGot:\n"+a(y[3]));case 8:if("string"==typeof t){e.next=10;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 10:if("string"==typeof n){e.next=12;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 12:if("string"==typeof r){e.next=14;break}throw new TypeError('Value of argument "body" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 14:if(null!=y[3]&&"string"==typeof y[3].senderOrganizationId&&(null==y[3].recipientOrganizationId||"string"==typeof y[3].recipientOrganizationId)&&(null==y[3].metadata||Array.isArray(y[3].metadata)&&y[3].metadata.every(function(t){return t instanceof Object})||null==y[3].metadata||y[3].metadata instanceof Object)&&(null==y[3].attachmentFiles||Array.isArray(y[3].attachmentFiles)&&y[3].attachmentFiles.every(function(t){return"string"==typeof t||t instanceof Object}))){e.next=16;break}throw new TypeError("Value of argument 3 violates contract.\n\nExpected:\n{ senderOrganizationId: string;\n  recipientOrganizationId: ?string;\n  metadata: ?Array<Object> | ?Object;\n  attachmentFiles: ?Array<string | Object>;\n}\n\nGot:\n"+i(y[3]));case 16:return this.host.requireUser(),xt["default"].oneOf("counterPartyType",t,["user","group"]),xt["default"].notEmpty("counterPartyId",n),p&&(p=this.__normalizeMetadata(p)),h||(h=d),u=this.__getNextSortNumber(),s=this.host.conversations.ensureConversation(t,n,d),c=this.host.models.Message.createInstance({id:_t["default"].v4(),conversationId:s.id,counterPartyId:n,counterPartyType:t,body:r,senderOrganizationId:d,recipientOrganizationId:h,sortNumber:u,createdAt:new Date,senderId:this.host.getCurrentUser().id,direction:wt.MessageDirection.OUTGOING,senderStatus:wt.MessageSenderStatus.SENDING,$synced:!1,serverId:null,metadata:p}),"group"==t?(c.groupId=n,c.recipientStatus=wt.MessageRecipientStatus.NA):(c.recipientId=n,c.recipientStatus=wt.MessageRecipientStatus.NEW),v&&this.__setMessageAttachments(c,v),this.host.models.Message.inject(c),this.host.emit("message:sending",c),e.next=30,this.host.api.messages.send({counterPartyId:n,body:r,senderOrganizationId:d,recipientOrganizationId:h,metadata:p,attachment:v&&v[0],localId:c.id});case 30:if(f=e.sent,(0,Y["default"])(c,{serverId:f.serverId,ttl:f.ttl,senderStatus:wt.MessageSenderStatus.SENT,$synced:!0}),"group"!=t){e.next=38;break}if(c.group&&!c.group.$temporary){e.next=36;break}return e.next=36,this.host.groups.find(c.groupId,{includeMembers:!0,bypassCache:!0});case 36:e.next=44;break;case 38:if(c.recipient&&!c.recipient.$temporary){e.next=44;break}return e.next=41,this.host.users.find(c.recipientId,{bypassCache:!0});case 41:l=e.sent,c.recipientId=l.id,c.counterPartyId=l.id;case 44:return this.host.models.Message.inject(c),this.host.emit("message:sent",c),e.abrupt("return",c);case 47:case"end":return e.stop()}},e,this)}));return function(e,n,r,o){return t.apply(this,arguments)}}()},{key:"__setMessageAttachments",value:function(t,e){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!Array.isArray(e)||!e.every(function(t){return"string"==typeof t||t instanceof Object}))throw new TypeError('Value of argument "attachmentFiles" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+a(e));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));if(!Array.isArray(e)||!e.every(function(t){return"string"==typeof t||t instanceof Object}))throw new TypeError('Value of argument "attachmentFiles" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+i(e));t.attachments=e.map(this.__generateAttachmentDescriptor.bind(this))}},{key:"__generateAttachmentDescriptor",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "attachment" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "attachment" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));var e=void 0;return!function(){t instanceof File||t instanceof Blob||xt["default"].raise("attachment","invalid","attachment (File or Blob) is invalid");var n=new FileReader;n.addEventListener("load",function(){e.localPath=n.result,e.isLoading=!1},!1),n.readAsDataURL(t),e={name:t.name,size:t.size,contentType:t.type,isLoading:!0}}(),e}},{key:"__prepareGroupForUsers",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n,r,o){var i,a,u=this,s=o.groupMetadata;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[this.host.getCurrentUser()].concat(n.map(function(t){return u.host.models.User.get(t)}).filter(Boolean)),r||(r=i.map(function(t){return t.displayName}).filter(Boolean).join(", ")||"Group"),e.next=4,this.host.groups.create({organizationId:t,name:r,replayHistory:!0,memberIds:n,metadata:s});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(e,n,r,o){return t.apply(this,arguments)}}()},{key:"onMessageRecalled",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));this.host.requireUser();var e=this._getMessageByServerId(t);e&&this._deleteLocalMessage(e)}},{key:"_deleteLocalMessage",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));this.host.models.Message.eject(t);
}},{key:"recall",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n,r;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object | string[] | Object[]\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object | string[] | Object[]\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),n=vt["default"].arrayWrap(t),r=n.map(this.__recallSingle.bind(this)),e.next=9,K["default"].all(r);case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"__recallSingle",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:if(n=this._resolveMessage(t),!n){e.next=17;break}if(n.senderId==this.host.getCurrentUser().id){e.next=8;break}throw new Ot["default"].PermissionDeniedError(n,n.serverId,"recall");case 8:if(n.$synced!==!1){e.next=12;break}this._deleteLocalMessage(n),e.next=15;break;case 12:return e.next=14,this.host.api.messages.destroy(n.serverId);case 14:this._deleteLocalMessage(n);case 15:e.next=19;break;case 17:return e.next=19,this.host.api.messages.destroy(t);case 19:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"reactToMessageStatusEvent",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=t.client_id,n=t.is_recalled;n?this.onMessageRecalled(e):this.__setMessageStatusPerRecipientFromServerData(e,vt["default"].pick(t,["status","account_id","timestamp"]))&&this.__touchMessage(e)}},{key:"__setMessageStatusPerRecipientFromServerData",value:function(t,e){if("string"!=typeof t)throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if(!(e instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(e));if("string"!=typeof t)throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if(!(e instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(e));var n=wt.MessageRecipientStatus.resolve(e.status),r=e.account_id,o=e.timestamp;return this.setRecipientMessageStatus(t,r,n,o)}},{key:"setRecipientMessageStatus",value:function(t,e,n,r){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if(!(null==r||"string"==typeof r||null==r||r instanceof Date))throw new TypeError('Value of argument "createdAt" violates contract.\n\nExpected:\n?string | ?Date\n\nGot:\n'+a(r));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "messageServerId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));if(!(null==r||"string"==typeof r||null==r||r instanceof Date))throw new TypeError('Value of argument "createdAt" violates contract.\n\nExpected:\n?string | ?Date\n\nGot:\n'+i(r));var o=this._getMessageByServerId(t);if(o){n=wt.MessageRecipientStatus.resolve(n),this._setSingleUserMessageRecipientMessageStatus(o,n);var u=vt["default"].find(o.statusesPerRecipient,{userId:e});if(!u||this.__canChangeRecipientStatus(u.status,n)){var s=o.id+":"+e;return this.host.models.MessageStatusPerRecipient.inject({id:s,messageId:o.id,userId:e,status:n,createdAt:r})}}}},{key:"__touchMessage",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));var e=this._resolveMessage(t);this.host.models.Message.inject({id:e.id})}},{key:"_resolveMessage",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));return this.host.models.Message.is(t)?t:this.host.models.Message.get(t)||this._getMessageByServerId(t)}},{key:"_getMessageByServerId",value:function(t){if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));if(!("string"==typeof t||t instanceof Object))throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));return this.host.models.Message.is(t)?t:(0,vt["default"])(this.host.models.Message.getAll()).find({serverId:t})}},{key:"_setSingleUserMessageRecipientMessageStatus",value:function(t,e){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "recipientStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));this.__canChangeRecipientStatus(t.recipientStatus,e)&&this.host.models.Message.inject({id:t.id,recipientStatus:e})}},{key:"__canChangeRecipientStatus",value:function(t,e){if("string"!=typeof t)throw new TypeError('Value of argument "fromStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "toStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof t)throw new TypeError('Value of argument "fromStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "toStatus" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));return t===e?!1:t!==wt.MessageRecipientStatus.READ||e!=wt.MessageRecipientStatus.DELIVERED}},{key:"find",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n,r,o,u,s;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.next=7,this.httpClient.get("/message/:id",{urlParams:{id:t}});case 7:return n=e.sent,r=n.data,o=n.data.recipient_token,e.next=12,this.__lookupCounterParty(o);case 12:if(u=e.sent,!u){e.next=17;break}r.counterParty=u,e.next=18;break;case 17:return e.abrupt("return",null);case 18:return s=this.host.models.Message.inject(r),e.next=21,this.findStatusesPerRecipient(s);case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.Message.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Message.getMulti(t)}},{key:"__lookupCounterParty",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n,r,o,u,s,c,f,l,d,h,p,v,y,g,m,b;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(r=[{model:this.host.models.User,finder:(n=this.host.users).find.bind(n)},{model:this.host.models.Group,finder:(n=this.host.groups).find.bind(n)}],r&&("function"==typeof r[q["default"]]||Array.isArray(r))){e.next=7;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+i(r));case 7:if(r&&("function"==typeof r[q["default"]]||Array.isArray(r))){e.next=9;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+a(r));case 9:o=!0,u=!1,s=void 0,e.prev=12,c=(0,U["default"])(r);case 14:if(o=(f=c.next()).done){e.next=22;break}if(l=f.value.model,d=l.get(t),!d){e.next=19;break}return e.abrupt("return",d);case 19:o=!0,e.next=14;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](12),u=!0,s=e.t0;case 28:e.prev=28,e.prev=29,!o&&c["return"]&&c["return"]();case 31:if(e.prev=31,!u){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:if(r&&("function"==typeof r[q["default"]]||Array.isArray(r))){e.next=38;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+i(r));case 38:if(r&&("function"==typeof r[q["default"]]||Array.isArray(r))){e.next=40;break}throw new TypeError("Expected counterPartyTypesAndFinders to be iterable, got "+a(r));case 40:h=!0,p=!1,v=void 0,e.prev=43,y=(0,U["default"])(r);case 45:if(h=(g=y.next()).done){e.next=62;break}return m=g.value.finder,e.prev=47,e.next=50,m(t);case 50:if(b=e.sent,!b){e.next=53;break}return e.abrupt("return",b);case 53:e.next=59;break;case 55:if(e.prev=55,e.t1=e["catch"](47),e.t1.code==Ot["default"].NotFoundError.CODE){e.next=59;break}throw e.t1;case 59:h=!0,e.next=45;break;case 62:e.next=68;break;case 64:e.prev=64,e.t2=e["catch"](43),p=!0,v=e.t2;case 68:e.prev=68,e.prev=69,!h&&y["return"]&&y["return"]();case 71:if(e.prev=71,!p){e.next=74;break}throw v;case 74:return e.finish(71);case 75:return e.finish(68);case 76:return e.abrupt("return",null);case 77:case"end":return e.stop()}},e,this,[[12,24,28,36],[29,,31,35],[43,64,68,76],[47,55],[69,,71,75]])}));return function(e){return t.apply(this,arguments)}}()},{key:"downloadAttachmentURL",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n){var r,o;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||"number"==typeof n){e.next=4;break}throw new TypeError('Value of argument "attachmentId" violates contract.\n\nExpected:\nstring | number\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||"number"==typeof n){e.next=8;break}throw new TypeError('Value of argument "attachmentId" violates contract.\n\nExpected:\nstring | number\n\nGot:\n'+i(n));case 8:return r=this._resolveMessage(t),n=n.toString(),e.next=13,this.httpClient.downloadImageAndGetURL("/message/"+r.serverId+"/attachment/"+n);case 13:return o=e.sent,e.abrupt("return",o);case 17:throw new Error("On Node.js use `downloadImageToFile`");case 18:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"downloadAttachmentToFile",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t,n,r){var o;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||"number"==typeof n){e.next=4;break}throw new TypeError('Value of argument "attachmentId" violates contract.\n\nExpected:\nstring | number\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "dest" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t||t instanceof Object){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 8:if("string"==typeof n||"number"==typeof n){e.next=10;break}throw new TypeError('Value of argument "attachmentId" violates contract.\n\nExpected:\nstring | number\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "dest" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:e.next=21;break;case 17:return o=e.sent,e.abrupt("return",o);case 21:throw new Error("On Node.js use `downloadImageToFile`");case 22:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "serverId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.next=7,this.httpClient["delete"]("/message/:id",{urlParams:{id:t}});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getMessageCount",value:function(){return this.host.models.Message.getAll().length}},{key:"getTotalUnreadCount",value:function(){return vt["default"].sumBy(this.host.models.Conversation.getAll(),"unreadCount")}},{key:"markAsRead",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.queue,o=void 0===r?!0:r;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+i(t));case 4:if(t=(0,vt["default"])(t).chain().arrayWrap().map(this._resolveModelId.bind(this)).uniq().value(),!o){e.next=9;break}return e.abrupt("return",this.__queueMessageStatuses({readIds:t}));case 9:return e.abrupt("return",this.__setMessagesStatus({readIds:t}));case 10:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"markAsDelivered",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.queue,o=void 0===r?!0:r;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object||Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring | Object | Array<string | Object>\n\nGot:\n'+i(t));case 4:if(t=(0,vt["default"])(t).chain().arrayWrap().map(this._resolveModelId.bind(this)).uniq().value(),!o){e.next=9;break}return e.abrupt("return",this.__queueMessageStatuses({deliveredIds:t}));case 9:return e.abrupt("return",this.__setMessagesStatus({deliveredIds:t}));case 10:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"markAsReceived",value:function(){var t=(0,et["default"])(X["default"].mark(function e(){var t=arguments;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.markAsDelivered.apply(this,t));case 1:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"__queueMessageStatuses",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n,r=t.deliveredIds,o=t.readIds,u=arguments;return X["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=u[0]&&(null==u[0].deliveredIds||Array.isArray(u[0].deliveredIds)&&u[0].deliveredIds.every(function(t){return"string"==typeof t}))&&(null==u[0].readIds||Array.isArray(u[0].readIds)&&u[0].readIds.every(function(t){return"string"==typeof t}))){t.next=2;break}throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ deliveredIds: ?Array<string>;\n  readIds: ?Array<string>;\n}\n\nGot:\n"+a(u[0]));case 2:if(null!=u[0]&&(null==u[0].deliveredIds||Array.isArray(u[0].deliveredIds)&&u[0].deliveredIds.every(function(t){return"string"==typeof t}))&&(null==u[0].readIds||Array.isArray(u[0].readIds)&&u[0].readIds.every(function(t){return"string"==typeof t}))){t.next=4;break}throw new TypeError("Value of argument 0 violates contract.\n\nExpected:\n{ deliveredIds: ?Array<string>;\n  readIds: ?Array<string>;\n}\n\nGot:\n"+i(u[0]));case 4:if(r&&(this._queuedMessageStatuses.deliveredIds=vt["default"].union(this._queuedMessageStatuses.deliveredIds,r)),o&&(this._queuedMessageStatuses.readIds=vt["default"].union(this._queuedMessageStatuses.readIds,o)),n=this._queuedMessageStatuses.deliveredIds.length+this._queuedMessageStatuses.readIds.length,!(n>=this.config.flushMessageMaxCount)){t.next=12;break}return this.logger.log("reached "+this.config.flushMessageMaxCount+" -- flushing"),t.abrupt("return",this.__flushQueueMessageStatuses());case 12:this._throtelled_flushQueueMessageStatuses();case 13:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"__flushQueueMessageStatuses",value:function(){var t=this._queuedMessageStatuses.deliveredIds.length+this._queuedMessageStatuses.readIds.length;t>0&&(this.__setMessagesStatus(this._queuedMessageStatuses),this._queuedMessageStatuses.deliveredIds=[],this._queuedMessageStatuses.readIds=[])}},{key:"__setMessagesStatus",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n,r,o,i=this,a=t.deliveredIds,u=void 0===a?[]:a,s=t.readIds,c=void 0===s?[]:s;return X["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.host.requireUser(),u=(0,vt["default"])(u).chain().map(this._resolveModelId.bind(this)).uniq().value(),c=(0,vt["default"])(c).chain().map(this._resolveModelId.bind(this)).uniq().value(),n=u.map(this._resolveMessage).filter(Boolean),r=c.map(this._resolveMessage).filter(Boolean),c=vt["default"].difference(c,(0,vt["default"])(r).filter(function(t){return t.recipientStatus===wt.MessageRecipientStatus.READ||t.recipientStatus==wt.MessageRecipientStatus.TO_BE_READ}).map("id").value()),u=vt["default"].difference(u,c,(0,vt["default"])(n).filter(function(t){return t.recipientStatus===wt.MessageRecipientStatus.DELIVERED||t.recipientStatus===wt.MessageRecipientStatus.READ||t.recipientStatus==wt.MessageRecipientStatus.TO_BE_READ}).map("id").value()),o={},u.length&&(o.delivered=u),c.length&&(o.read=c,r.forEach(function(t){return i.host.models.Message.inject({id:t.id,recipientStatus:wt.MessageRecipientStatus.TO_BE_READ})})),!vt["default"].isEmpty(o.delivered)||!vt["default"].isEmpty(o.read)){t.next=12;break}return t.abrupt("return",!1);case 12:return t.next=14,this.httpClient.post("/message/status",{data:o});case 14:c.length&&(o.read=c,r.forEach(function(t){return i.host.models.Message.inject({id:t.id,recipientStatus:wt.MessageRecipientStatus.READ})})),u.length&&n.forEach(function(t){return i.host.models.Message.inject({id:t.id,recipientStatus:wt.MessageRecipientStatus.DELIVERED})});case 16:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findStatusesPerRecipient",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){var n,r,o,u,s=this;return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:if(this.host.requireUser(),n=this._resolveMessage(t)){e.next=8;break}return e.abrupt("return",null);case 8:e.t0=n.counterPartyType,e.next="group"===e.t0?11:"user"===e.t0?21:23;break;case 11:return e.next=13,this.httpClient.get("/message/:id/status",{urlParams:{id:n.serverId}});case 13:if(r=e.sent,o=r.data,!o.is_recalled){e.next=18;break}return this.onMessageRecalled(n.serverId),e.abrupt("return");case 18:return u=o.statuses.map(function(t){return s.__setMessageStatusPerRecipientFromServerData(n.serverId,t)}).some(function(t){return t}),u&&this.__touchMessage(n),e.abrupt("break",23);case 21:return this.setRecipientMessageStatus(n.serverId,n.counterPartyId,n.recipientStatus,null)&&this.__touchMessage(n),e.abrupt("break",23);case 23:return e.abrupt("return",n.statusesPerRecipient);case 24:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"startTyping",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.abrupt("return",this.httpClient.post("/message/typing",{data:{recipient:t}}));case 6:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"endTyping",value:function(){var t=(0,et["default"])(X["default"].mark(function e(t){return X["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "recipientId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),e.abrupt("return",this.httpClient["delete"]("/message/typing/:recipientId",{urlParams:{recipientId:t}}));case 6:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(ht["default"]),o(P.prototype,"__sendToUnknownUser",[u],(0,V["default"])(P.prototype,"__sendToUnknownUser"),P.prototype),o(P.prototype,"__validateAttachments",[s],(0,V["default"])(P.prototype,"__validateAttachments"),P.prototype),o(P.prototype,"__normalizeMetadata",[c],(0,V["default"])(P.prototype,"__normalizeMetadata"),P.prototype),o(P.prototype,"__getNextSortNumber",[f],(0,V["default"])(P.prototype,"__getNextSortNumber"),P.prototype),o(P.prototype,"__send",[l],(0,V["default"])(P.prototype,"__send"),P.prototype),o(P.prototype,"__setMessageAttachments",[d],(0,V["default"])(P.prototype,"__setMessageAttachments"),P.prototype),o(P.prototype,"__generateAttachmentDescriptor",[h],(0,V["default"])(P.prototype,"__generateAttachmentDescriptor"),P.prototype),o(P.prototype,"__prepareGroupForUsers",[p,v],(0,V["default"])(P.prototype,"__prepareGroupForUsers"),P.prototype),o(P.prototype,"_deleteLocalMessage",[y],(0,V["default"])(P.prototype,"_deleteLocalMessage"),P.prototype),o(P.prototype,"__recallSingle",[g],(0,V["default"])(P.prototype,"__recallSingle"),P.prototype),o(P.prototype,"__setMessageStatusPerRecipientFromServerData",[m],(0,V["default"])(P.prototype,"__setMessageStatusPerRecipientFromServerData"),P.prototype),o(P.prototype,"__touchMessage",[b],(0,V["default"])(P.prototype,"__touchMessage"),P.prototype),o(P.prototype,"_resolveMessage",[_,kt["default"]],(0,V["default"])(P.prototype,"_resolveMessage"),P.prototype),o(P.prototype,"_getMessageByServerId",[w],(0,V["default"])(P.prototype,"_getMessageByServerId"),P.prototype),o(P.prototype,"_setSingleUserMessageRecipientMessageStatus",[E],(0,V["default"])(P.prototype,"_setSingleUserMessageRecipientMessageStatus"),P.prototype),o(P.prototype,"__canChangeRecipientStatus",[x],(0,V["default"])(P.prototype,"__canChangeRecipientStatus"),P.prototype),o(P.prototype,"find",[A],(0,V["default"])(P.prototype,"find"),P.prototype),o(P.prototype,"__lookupCounterParty",[O],(0,V["default"])(P.prototype,"__lookupCounterParty"),P.prototype),o(P.prototype,"downloadAttachmentURL",[j],(0,V["default"])(P.prototype,"downloadAttachmentURL"),P.prototype),o(P.prototype,"destroy",[k],(0,V["default"])(P.prototype,"destroy"),P.prototype),o(P.prototype,"__queueMessageStatuses",[I],(0,V["default"])(P.prototype,"__queueMessageStatuses"),P.prototype),o(P.prototype,"__flushQueueMessageStatuses",[T,kt["default"]],(0,V["default"])(P.prototype,"__flushQueueMessageStatuses"),P.prototype),o(P.prototype,"__setMessagesStatus",[S],(0,V["default"])(P.prototype,"__setMessagesStatus"),P.prototype),o(P.prototype,"findStatusesPerRecipient",[M],(0,V["default"])(P.prototype,"findStatusesPerRecipient"),P.prototype),C=P))||C);e["default"]=It,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(486),__esModule:!0}},function(t,e,n){n(375),n(362),t.exports=n(487)},function(t,e,n){var r=n(351),o=n(404);t.exports=n(324).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r;(function(o){!function(i){"use strict";function a(){var t=i.crypto||i.msCrypto;if(!d&&t&&t.getRandomValues)try{var e=new Uint8Array(16);v=d=function(){return t.getRandomValues(e),e},d()}catch(n){}if(!d){var r=new Array(16);h=d=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function u(){try{var t=n(489).randomBytes;p=d=t&&function(){return t(16)},d()}catch(e){}}function s(t,e,n){var r=e&&n||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>o&&(e[r+o++]=m[t])});16>o;)e[r+o++]=0;return e}function c(t,e){var n=e||0,r=g;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function f(t,e,n){var r=e&&n||0,o=e||[];t=t||{};var i=null!=t.clockseq?t.clockseq:E,a=null!=t.msecs?t.msecs:(new Date).getTime(),u=null!=t.nsecs?t.nsecs:A+1,s=a-x+(u-A)/1e4;if(0>s&&null==t.clockseq&&(i=i+1&16383),(0>s||a>x)&&null==t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=a,A=u,E=i,a+=122192928e5;var f=(1e4*(268435455&a)+u)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var l=a/4294967296*1e4&268435455;o[r++]=l>>>8&255,o[r++]=255&l,o[r++]=l>>>24&15|16,o[r++]=l>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var d=t.node||w,h=0;6>h;h++)o[r+h]=d[h];return e?e:c(o)}function l(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new y(16):null,t=null),t=t||{};var o=t.random||(t.rng||d)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;16>i;i++)e[r+i]=o[i];return e||c(o)}var d,h,p,v;i?a():u();for(var y="function"==typeof o?o:Array,g=[],m={},b=0;256>b;b++)g[b]=(b+256).toString(16).substr(1),m[g[b]]=b;var _=d(),w=[1|_[0],_[1],_[2],_[3],_[4],_[5]],E=16383&(_[6]<<8|_[7]),x=0,A=0,O=l;O.v1=f,O.v4=l,O.parse=s,O.unparse=c,O.BufferClass=y,O._rng=d,O._mathRNG=h,O._nodeRNG=p,O._whatwgRNG=v,"undefined"!=typeof t&&t.exports?t.exports=O:(r=function(){return O}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)))}("undefined"!=typeof window?window:null)}).call(e,n(297).Buffer)},function(t,e,n){(function(t){function r(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(t,e){for(var n in t)e(t[n],n)}var i=n(490);e.createHash=n(492),e.createHmac=n(501),e.randomBytes=function(e,n){if(!n||!n.call)return new t(i(e));try{n.call(this,void 0,new t(i(e)))}catch(r){n(r)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var a=n(502)(e);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync,o(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){r("sorry,",t,"is not implemented yet")}})}).call(e,n(297).Buffer)},function(t,e,n){(function(e,r){!function(){var o=("undefined"==typeof window?e:window)||{};_crypto=o.crypto||o.msCrypto||n(491),t.exports=function(t){if(_crypto.getRandomValues){var e=new r(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),n(297).Buffer)},function(t,e){},function(t,e,n){(function(e){function r(t){return function(){var n=[],r={update:function(t,r){return e.isBuffer(t)||(t=new e(t,r)),n.push(t),this},digest:function(r){var o=e.concat(n),i=t(o);return n=null,r?i.toString(r):i}};return r}}var o=n(493),i=r(n(498)),a=r(n(500));t.exports=function(t){
return"md5"===t?new i:"rmd160"===t?new a:o(t)}}).call(e,n(297).Buffer)},function(t,e,n){var e=t.exports=function(t){var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n},r=n(297).Buffer,o=n(494)(r);e.sha1=n(495)(r,o),e.sha256=n(496)(r,o),e.sha512=n(497)(r,o)},function(t,e){t.exports=function(t){function e(e,n){this._block=new t(e),this._finalSize=n,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,n){"string"==typeof e&&(n=n||"utf8",e=new t(e,n));for(var r=this._len+=e.length,o=this._s=this._s||0,i=0,a=this._block;r>o;){for(var u=Math.min(e.length,i+this._blockSize-o%this._blockSize),s=u-i,c=0;s>c;c++)a[o%this._blockSize+c]=e[c+i];o+=s,i+=s,o%this._blockSize===0&&this._update(a)}return this._s=o,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var n=this._update(this._block)||this._hash();return t?n.toString(t):n},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,n){var r=n(312).inherits;t.exports=function(t,e){function n(){return p.length?p.pop().init():this instanceof n?(this._w=h,e.call(this,64,56),this._h=null,void this.init()):new n}function o(t,e,n,r){return 20>t?e&n|~e&r:40>t?e^n^r:60>t?e&n|e&r|n&r:e^n^r}function i(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function a(t,e){return t+e|0}function u(t,e){return t<<e|t>>>32-e}var s=0,c=4,f=8,l=12,d=16,h=new("undefined"==typeof Int32Array?Array:Int32Array)(80),p=[];return r(n,e),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},n.prototype._POOL=p,n.prototype._update=function(t){var e,n,r,s,c,f,l,d,h,p;e=f=this._a,n=l=this._b,r=d=this._c,s=h=this._d,c=p=this._e;for(var v=this._w,y=0;80>y;y++){var g=v[y]=16>y?t.readInt32BE(4*y):u(v[y-3]^v[y-8]^v[y-14]^v[y-16],1),m=a(a(u(e,5),o(y,n,r,s)),a(a(c,g),i(y)));c=s,s=r,r=u(n,30),n=e,e=m}this._a=a(e,f),this._b=a(n,l),this._c=a(r,d),this._d=a(s,h),this._e=a(c,p)},n.prototype._hash=function(){p.length<100&&p.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,s),e.writeInt32BE(0|this._b,c),e.writeInt32BE(0|this._c,f),e.writeInt32BE(0|this._d,l),e.writeInt32BE(0|this._e,d),e},n}},function(t,e,n){var r=n(312).inherits;t.exports=function(t,e){function n(){this.init(),this._w=h,e.call(this,64,56)}function o(t,e){return t>>>e|t<<32-e}function i(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function u(t,e,n){return t&e^t&n^e&n}function s(t){return o(t,2)^o(t,13)^o(t,22)}function c(t){return o(t,6)^o(t,11)^o(t,25)}function f(t){return o(t,7)^o(t,18)^i(t,3)}function l(t){return o(t,17)^o(t,19)^i(t,10)}var d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=new Array(64);return r(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,r,o,i,h,p,v,y,g,m=this._w;e=0|this._a,n=0|this._b,r=0|this._c,o=0|this._d,i=0|this._e,h=0|this._f,p=0|this._g,v=0|this._h;for(var b=0;64>b;b++){var _=m[b]=16>b?t.readInt32BE(4*b):l(m[b-2])+m[b-7]+f(m[b-15])+m[b-16];y=v+c(i)+a(i,h,p)+d[b]+_,g=s(e)+u(e,n,r),v=p,p=h,h=i,i=o+y,o=r,r=n,n=e,e=y+g}this._a=e+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=i+this._e|0,this._f=h+this._f|0,this._g=p+this._g|0,this._h=v+this._h|0},n.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},n}},function(t,e,n){var r=n(312).inherits;t.exports=function(t,e){function n(){this.init(),this._w=s,e.call(this,128,112)}function o(t,e,n){return t>>>n|e<<32-n}function i(t,e,n){return t&e^~t&n}function a(t,e,n){return t&e^t&n^e&n}var u=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);return r(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,r,s,c,f,l,d,h,p,v,y,g,m,b,_,w=this._w;e=0|this._a,n=0|this._b,r=0|this._c,s=0|this._d,c=0|this._e,f=0|this._f,l=0|this._g,d=0|this._h,h=0|this._al,p=0|this._bl,v=0|this._cl,y=0|this._dl,g=0|this._el,m=0|this._fl,b=0|this._gl,_=0|this._hl;for(var E=0;80>E;E++){var x,A,O=2*E;if(16>E)x=w[O]=t.readInt32BE(4*O),A=w[O+1]=t.readInt32BE(4*O+4);else{var j=w[O-30],k=w[O-30+1],I=o(j,k,1)^o(j,k,8)^j>>>7,T=o(k,j,1)^o(k,j,8)^o(k,j,7);j=w[O-4],k=w[O-4+1];var S=o(j,k,19)^o(k,j,29)^j>>>6,M=o(k,j,19)^o(j,k,29)^o(k,j,6),C=w[O-14],P=w[O-14+1],B=w[O-32],R=w[O-32+1];A=T+P,x=I+C+(T>>>0>A>>>0?1:0),A+=M,x=x+S+(M>>>0>A>>>0?1:0),A+=R,x=x+B+(R>>>0>A>>>0?1:0),w[O]=x,w[O+1]=A}var D=a(e,n,r),F=a(h,p,v),G=o(e,h,28)^o(h,e,2)^o(h,e,7),z=o(h,e,28)^o(e,h,2)^o(e,h,7),L=o(c,g,14)^o(c,g,18)^o(g,c,9),V=o(g,c,14)^o(g,c,18)^o(c,g,9),N=u[O],U=u[O+1],$=i(c,f,l),q=i(g,m,b),W=_+V,K=d+L+(_>>>0>W>>>0?1:0);W+=q,K=K+$+(q>>>0>W>>>0?1:0),W+=U,K=K+N+(U>>>0>W>>>0?1:0),W+=A,K=K+x+(A>>>0>W>>>0?1:0);var H=z+F,Y=G+D+(z>>>0>H>>>0?1:0);d=l,_=b,l=f,b=m,f=c,m=g,g=y+W|0,c=s+K+(y>>>0>g>>>0?1:0)|0,s=r,y=v,r=n,v=p,n=e,p=h,h=W+H|0,e=K+Y+(W>>>0>h>>>0?1:0)|0}this._al=this._al+h|0,this._bl=this._bl+p|0,this._cl=this._cl+v|0,this._dl=this._dl+y|0,this._el=this._el+g|0,this._fl=this._fl+m|0,this._gl=this._gl+b|0,this._hl=this._hl+_|0,this._a=this._a+e+(this._al>>>0<h>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+r+(this._cl>>>0<v>>>0?1:0)|0,this._d=this._d+s+(this._dl>>>0<y>>>0?1:0)|0,this._e=this._e+c+(this._el>>>0<g>>>0?1:0)|0,this._f=this._f+f+(this._fl>>>0<m>>>0?1:0)|0,this._g=this._g+l+(this._gl>>>0<b>>>0?1:0)|0,this._h=this._h+d+(this._hl>>>0<_>>>0?1:0)|0},n.prototype._hash=function(){function e(t,e,r){n.writeInt32BE(t,r),n.writeInt32BE(e,r+4)}var n=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),n},n}},function(t,e,n){function r(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,o=-1732584194,f=271733878,l=0;l<t.length;l+=16){var d=n,h=r,p=o,v=f;n=i(n,r,o,f,t[l+0],7,-680876936),f=i(f,n,r,o,t[l+1],12,-389564586),o=i(o,f,n,r,t[l+2],17,606105819),r=i(r,o,f,n,t[l+3],22,-1044525330),n=i(n,r,o,f,t[l+4],7,-176418897),f=i(f,n,r,o,t[l+5],12,1200080426),o=i(o,f,n,r,t[l+6],17,-1473231341),r=i(r,o,f,n,t[l+7],22,-45705983),n=i(n,r,o,f,t[l+8],7,1770035416),f=i(f,n,r,o,t[l+9],12,-1958414417),o=i(o,f,n,r,t[l+10],17,-42063),r=i(r,o,f,n,t[l+11],22,-1990404162),n=i(n,r,o,f,t[l+12],7,1804603682),f=i(f,n,r,o,t[l+13],12,-40341101),o=i(o,f,n,r,t[l+14],17,-1502002290),r=i(r,o,f,n,t[l+15],22,1236535329),n=a(n,r,o,f,t[l+1],5,-165796510),f=a(f,n,r,o,t[l+6],9,-1069501632),o=a(o,f,n,r,t[l+11],14,643717713),r=a(r,o,f,n,t[l+0],20,-373897302),n=a(n,r,o,f,t[l+5],5,-701558691),f=a(f,n,r,o,t[l+10],9,38016083),o=a(o,f,n,r,t[l+15],14,-660478335),r=a(r,o,f,n,t[l+4],20,-405537848),n=a(n,r,o,f,t[l+9],5,568446438),f=a(f,n,r,o,t[l+14],9,-1019803690),o=a(o,f,n,r,t[l+3],14,-187363961),r=a(r,o,f,n,t[l+8],20,1163531501),n=a(n,r,o,f,t[l+13],5,-1444681467),f=a(f,n,r,o,t[l+2],9,-51403784),o=a(o,f,n,r,t[l+7],14,1735328473),r=a(r,o,f,n,t[l+12],20,-1926607734),n=u(n,r,o,f,t[l+5],4,-378558),f=u(f,n,r,o,t[l+8],11,-2022574463),o=u(o,f,n,r,t[l+11],16,1839030562),r=u(r,o,f,n,t[l+14],23,-35309556),n=u(n,r,o,f,t[l+1],4,-1530992060),f=u(f,n,r,o,t[l+4],11,1272893353),o=u(o,f,n,r,t[l+7],16,-155497632),r=u(r,o,f,n,t[l+10],23,-1094730640),n=u(n,r,o,f,t[l+13],4,681279174),f=u(f,n,r,o,t[l+0],11,-358537222),o=u(o,f,n,r,t[l+3],16,-722521979),r=u(r,o,f,n,t[l+6],23,76029189),n=u(n,r,o,f,t[l+9],4,-640364487),f=u(f,n,r,o,t[l+12],11,-421815835),o=u(o,f,n,r,t[l+15],16,530742520),r=u(r,o,f,n,t[l+2],23,-995338651),n=s(n,r,o,f,t[l+0],6,-198630844),f=s(f,n,r,o,t[l+7],10,1126891415),o=s(o,f,n,r,t[l+14],15,-1416354905),r=s(r,o,f,n,t[l+5],21,-57434055),n=s(n,r,o,f,t[l+12],6,1700485571),f=s(f,n,r,o,t[l+3],10,-1894986606),o=s(o,f,n,r,t[l+10],15,-1051523),r=s(r,o,f,n,t[l+1],21,-2054922799),n=s(n,r,o,f,t[l+8],6,1873313359),f=s(f,n,r,o,t[l+15],10,-30611744),o=s(o,f,n,r,t[l+6],15,-1560198380),r=s(r,o,f,n,t[l+13],21,1309151649),n=s(n,r,o,f,t[l+4],6,-145523070),f=s(f,n,r,o,t[l+11],10,-1120210379),o=s(o,f,n,r,t[l+2],15,718787259),r=s(r,o,f,n,t[l+9],21,-343485551),n=c(n,d),r=c(r,h),o=c(o,p),f=c(f,v)}return Array(n,r,o,f)}function o(t,e,n,r,o,i){return c(f(c(c(e,t),c(r,i)),o),n)}function i(t,e,n,r,i,a,u){return o(e&n|~e&r,t,e,i,a,u)}function a(t,e,n,r,i,a,u){return o(e&r|n&~r,t,e,i,a,u)}function u(t,e,n,r,i,a,u){return o(e^n^r,t,e,i,a,u)}function s(t,e,n,r,i,a,u){return o(n^(e|~r),t,e,i,a,u)}function c(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function f(t,e){return t<<e|t>>>32-e}var l=n(499);t.exports=function(t){return l.hash(t,r,16)}},function(t,e,n){(function(e){function n(t,n){if(t.length%i!==0){var r=t.length+(i-t.length%i);t=e.concat([t,a],r)}for(var o=[],u=n?t.readInt32BE:t.readInt32LE,s=0;s<t.length;s+=i)o.push(u.call(t,s));return o}function r(t,n,r){for(var o=new e(n),i=r?o.writeInt32BE:o.writeInt32LE,a=0;a<t.length;a++)i.call(o,t[a],4*a,!0);return o}function o(t,o,i,a){e.isBuffer(t)||(t=new e(t));var s=o(n(t,a),t.length*u);return r(s,i,a)}var i=4,a=new e(i);a.fill(0);var u=8;t.exports={hash:o}}).call(e,n(297).Buffer)},function(t,e,n){(function(e){function n(t,e,n){return t^e^n}function r(t,e,n){return t&e|~t&n}function o(t,e,n){return(t|~e)^n}function i(t,e,n){return t&n|e&~n}function a(t,e,n){return t^(e|~n)}function u(t,e){return t<<e|t>>>32-e}function s(t){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var r=v(t),o=8*t.length,i=8*t.length;r[o>>>5]|=128<<24-o%32,r[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);for(var a=0;a<r.length;a+=16)g(n,r,a);for(var a=0;5>a;a++){var u=n[a];n[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=y(n);return new e(s)}t.exports=s;var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],v=function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},y=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},g=function(t,e,s){for(var v=0;16>v;v++){var y=s+v,g=e[y];e[y]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}var m,b,_,w,E,x,A,O,j,k;x=m=t[0],A=b=t[1],O=_=t[2],j=w=t[3],k=E=t[4];for(var I,v=0;80>v;v+=1)I=m+e[s+c[v]]|0,I+=16>v?n(b,_,w)+h[0]:32>v?r(b,_,w)+h[1]:48>v?o(b,_,w)+h[2]:64>v?i(b,_,w)+h[3]:a(b,_,w)+h[4],I=0|I,I=u(I,l[v]),I=I+E|0,m=E,E=w,w=u(_,10),_=b,b=I,I=x+e[s+f[v]]|0,I+=16>v?a(A,O,j)+p[0]:32>v?i(A,O,j)+p[1]:48>v?o(A,O,j)+p[2]:64>v?r(A,O,j)+p[3]:n(A,O,j)+p[4],I=0|I,I=u(I,d[v]),I=I+k|0,x=k,k=j,j=u(O,10),O=A,A=I;I=t[1]+_+j|0,t[1]=t[2]+w+k|0,t[2]=t[3]+E+x|0,t[3]=t[4]+m+A|0,t[4]=t[0]+b+O|0,t[0]=I}}).call(e,n(297).Buffer)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);this._opad=s,this._alg=t;var a="sha512"===t?128:64;n=this._key=e.isBuffer(n)?n:new e(n),n.length>a?n=o(t).update(n).digest():n.length<a&&(n=e.concat([n,i],a));for(var u=this._ipad=new e(a),s=this._opad=new e(a),c=0;a>c;c++)u[c]=54^n[c],s[c]=92^n[c];this._hash=o(t).update(u)}var o=n(492),i=new e(128);i.fill(0),t.exports=r,r.prototype.update=function(t,e){return this._hash.update(t,e),this},r.prototype.digest=function(t){var e=this._hash.digest();return o(this._alg).update(this._opad).update(e).digest(t)}}).call(e,n(297).Buffer)},function(t,e,n){var r=n(503);t.exports=function(t,e){e=e||{};var n=r(t);return e.pbkdf2=n.pbkdf2,e.pbkdf2Sync=n.pbkdf2Sync,e}},function(t,e,n){(function(e){t.exports=function(t){function n(t,e,n,o,i,a){if("function"==typeof i&&(a=i,i=void 0),"function"!=typeof a)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var u;try{u=r(t,e,n,o,i)}catch(s){return a(s)}a(void 0,u)})}function r(n,r,o,i,a){if("number"!=typeof o)throw new TypeError("Iterations not a number");if(0>o)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(0>i)throw new TypeError("Bad key length");a=a||"sha1",e.isBuffer(n)||(n=new e(n)),e.isBuffer(r)||(r=new e(r));var u,s,c,f=1,l=new e(i),d=new e(r.length+4);r.copy(d,0,0,r.length);for(var h=1;f>=h;h++){d.writeUInt32BE(h,r.length);var p=t.createHmac(a,n).update(d).digest();if(!u&&(u=p.length,c=new e(u),f=Math.ceil(i/u),s=i-(f-1)*u,i>(Math.pow(2,32)-1)*u))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,u);for(var v=1;o>v;v++){p=t.createHmac(a,n).update(p).digest();for(var y=0;u>y;y++)c[y]^=p[y]}var g=(h-1)*u,m=h==f?s:u;c.copy(l,g,0,m)}return l}return{pbkdf2:n,pbkdf2Sync:r}}}).call(e,n(297).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={MessageRecipientStatus:n(505),MessageSenderStatus:n(510),MessageDirection:n(511),PresenceStatus:n(512),GroupType:n(513)},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(453),i=r(o),a=n(506),u=r(a),s=new u["default"]({READ:{serverKey:"Read"},TO_BE_READ:{serverKey:"ToBeRead"},DELIVERED:{serverKey:"Delivered"},RECEIVED_ON_CLIENT:{serverKey:"ReceivedOnClient"},NEW:{serverKey:"New"},NA:{key:"NA"}}),c=i["default"].reduce(s.entries,function(t,e){return t[e.key]=e.serverKey,t},{}),f=i["default"].invert(c);s.fromServer=function(t){return f[t]},s.toServer=function(t){return c[t]||f[t]},s.resolve=function(t){return this.isValid(t)?t:this.fromServer(t)},e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(507),i=r(o),a=n(464),u=r(a),s=n(422),c=r(s),f=n(423),l=r(f),d=function(){function t(e){(0,c["default"])(this,t),Array.isArray(e)&&(e=e.reduce(function(t,e){return t[e]={},t},{})),this.keys=[],this.entries=[],this.entriesByKey={};for(var n in e){this[n]=n;var r=(0,u["default"])({key:n},e[n]);this.entriesByKey[n]=r,this.entries.push(r),this.keys.push(n)}(0,i["default"])(this.keys),(0,i["default"])(this.entries),(0,i["default"])(this.entriesByKey)}return(0,l["default"])(t,[{key:"resolve",value:function(t){return t}},{key:"isValid",value:function(t){return!!this.entriesByKey[t]}}]),t}();e["default"]=d,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(508),__esModule:!0}},function(t,e,n){n(509),t.exports=n(324).Object.freeze},function(t,e,n){var r=n(352),o=n(382).onFreeze;n(345)("freeze",function(t){return function(e){return t&&r(e)?t(o(e)):e}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(506),i=r(o),a=new i["default"](["SENDING","SENT","FAILED","NEW","NA"]);e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(506),i=r(o),a=new i["default"](["INCOMING","OUTGOING"]);e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(453),i=r(o),a=n(506),u=r(a),s=new u["default"]({UNKNOWN:{serverKey:"unknown"},AVAILABLE:{serverKey:"available"},UNAVAILABLE:{serverKey:"unavailable"}}),c=i["default"].reduce(s.entries,function(t,e){return t[e.key]=e.serverKey,t},{}),f=i["default"].invert(c);s.fromServer=function(t){return f[t]},s.resolve=function(t){return this.isValid(t)?t:this.fromServer(t)},e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(506),i=r(o),a=new i["default"](["GROUP","ROOM","DISTRIBUTION_LIST"]);e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(325),i=r(o),a=n(451),u=r(a),s={isOneOf:function(t,e,n){return n.includes(e)},isNotEmpty:function(t,e){return!!e},raise:function(t){var e=arguments.length<=1||void 0===arguments[1]?"invalid":arguments[1],n=arguments[2];throw new u["default"](t,e,n)}};(0,i["default"])(s).forEach(function(t){var e=t.replace(/^is([A-Z])/,function(t,e){return e.toLowerCase()}),n=s[t];s[e]=function(t,e,r){for(var o=arguments.length,i=Array(o>3?o-3:0),a=3;o>a;a++)i[a-3]=arguments[a];n.apply(void 0,[t,e,r].concat(i))||s.raise(t,void 0,r)}}),e["default"]=s,t.exports=e["default"]},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return 1===e.length?r.apply(void 0,e):o.apply(void 0,e)}function r(t){var e=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?e=Reflect.ownKeys(t.prototype):(e=Object.getOwnPropertyNames(t.prototype),"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t.prototype)))),e.forEach(function(e){if("constructor"!==e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);"function"==typeof n.value&&Object.defineProperty(t.prototype,e,o(t,e,n))}}),t}function o(t,e,n){var r=n.value;if("function"!=typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+typeof r);return{configurable:!0,get:function(){if(this===t.prototype||this.hasOwnProperty(e))return r;var n=r.bind(this);return Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),n}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,_["default"])(t);if(!Array.isArray(t)){var o=(0,m["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,y["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,_["default"])(s))?s.v:void 0}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,_["default"])(t);if(!Array.isArray(t)){var o=(0,m["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,y["default"])(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,_["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l,d,h,p,v=n(322),y=r(v),g=n(325),m=r(g),b=n(359),_=r(b),w=n(468),E=r(w),x=n(464),A=r(x),O=n(396),j=r(O),k=n(428),I=r(k),T=n(413),S=r(T),M=n(421),C=r(M),P=n(443),B=r(P),R=n(422),D=r(R),F=n(423),G=r(F),z=n(446),L=r(z),V=n(447),N=r(V),U=n(472),$=r(U),q=n(441),W=r(q),K=n(453),H=r(K),Y=n(454),Z=n(483),X=r(Z),J=(u=(0,Y.decorator)(),s=(0,Y.decorator)({memoize:!0}),c=(0,Y.decorator)(),f=X["default"]["private"],l=X["default"]["private"],d=X["default"]["private"],(0,X["default"])((p=function(t){function e(){return(0,D["default"])(this,e),(0,L["default"])(this,(0,B["default"])(e).apply(this,arguments))}return(0,N["default"])(e,t),(0,G["default"])(e,[{key:"dispose",value:function(){Y.decorator.clear(this.findAll)}},{key:"create",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n,r,o=t.organizationId,i=t.name,a=t.avatarFile,u=t.replayHistory,s=void 0===u?!0:u,c=t.memberIds,f=void 0===c?[]:c,l=t.metadata;return S["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.host.requireUser(),o){t.next=3;break}throw new W["default"].ValidationError("organizationId","required");case 3:return f=f.map(this._resolveModelId.bind(this)),f.includes(this.host.getCurrentUser().id)||f.unshift(this.host.getCurrentUser().id),t.next=7,this.host.api.groups.create({name:i,avatarFile:a,replayHistory:s,memberIds:f,organizationId:o});case 7:if(n=t.sent,r=this.host.models.Group.inject(n),!l){t.next=12;break}return t.next=12,this.host.metadata.update(r.id,l,o);case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){var r,o=n.name,u=n.avatarFile,s=n.replayHistory,c=n.memberIds,f=n.metadata;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),t=this._resolveModelId(t),c.includes(this.host.getCurrentUser().id)||c.unshift(this.host.getCurrentUser().id),e.next=9,this.host.api.groups.update(t,{name:o,avatarFile:u,replayHistory:s,memberIds:c});case 9:if(r=this.host.models.Group.inject({id:t,name:o,replayHistory:s,memberIds:c}),!f){e.next=13;break}return e.next=13,this.host.metadata.update(t,f,r.organizationId);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n,r,o,u=this,s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(s=H["default"].defaults(s,{ignoreNotFound:!1,bypassCache:!1,includeMembers:!1,includeMetadata:!1}),this.host.requireUser(),n=null,s.bypassCache){e.next=11;break}if(n=this.host.models.Group.get(t),!n){e.next=11;break}return e.abrupt("return",n);case 11:return e.next=13,this.host.api.groups.find(t);case 13:if(r=e.sent,!r){e.next=19;break}n=this.host.models.Group.inject(r),delete n.$temporary,e.next=21;break;case 19:if(s.ignoreNotFound){e.next=21;break}throw new W["default"].NotFoundError(this.host.models.Group.name,t);case 21:if(!n){e.next=28;break}if(o=[],s.includeMetadata&&o.push(this.host.metadata.find(t,n.organizationId)),s.includeMembers&&o.push.apply(o,(0,I["default"])(n.memberIds.map(function(t){return u.host.users.find(t,{ignoreNotFound:!0})}))),!(o.length>0)){e.next=28;break}return e.next=28,j["default"].all(o);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=(0,C["default"])(S["default"].mark(function e(){var t,n,r,o,i,a=this,u=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],s=u.includeMembers,c=void 0===s?!1:s,f=u.includeMetadata,l=void 0===f?!1:f;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.host.models.Organization.getAll(),0!=t.length){e.next=5;break}return e.next=4,this.host.organizations.findAll();case 4:t=e.sent;case 5:return e.next=7,this.host.search.query({types:["group"],organizationIds:t.map(function(t){return t.id}),query:{displayName:""},includeMetadata:l});case 7:if(n=e.sent,r=n.map(function(t){return t.entity}),!c){e.next=16;break}if(o=[],i=(0,H["default"])(r).map("memberIds").flatten().uniq().value(),o.push.apply(o,(0,I["default"])(i.map(function(t){return a.host.users.find(t,{ignoreNotFound:!0})}))),!(o.length>0)){e.next=16;break}return e.next=16,j["default"].all(o);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findAllWithSpecificMembers",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){var r;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(t));case 2:if("string"==typeof n||n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(n));case 4:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=6;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(t));case 6:if("string"==typeof n||n instanceof Object){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(n));case 8:if(n=this._resolveModelId(n),t=H["default"].arrayWrap(t).map(this._resolveModelId.bind(this)),H["default"].contain(t,this.host.getCurrentUser().id),r=this.__findAllLocalWithSpecificMembers(t,n),0!==r.length){e.next=16;break}return e.next=15,this.findAll();case 15:r=this.__findAllLocalWithSpecificMembers(t,n);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"ensureMembers",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n=this;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "group" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));case 2:if(t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "group" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));case 4:t.memberIds.forEach(function(t){var e;n.host.models.User.ensureEntityOrCreateTemporaryAndFind({id:t,displayName:"Loading..."},{finder:(e=n.host.users).find.bind(e)})});case 5:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));
if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.Group.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Group.getMulti(t)}},{key:"__findAllLocalWithSpecificMembers",value:function(t,e){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));var n=this.host.models.Group.getAll(),r=H["default"].filter(n,function(n){return n.organizationId==e&&0==H["default"].xor(n.memberIds,t).length});return r}},{key:"destroy",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),t=this._resolveModelId(t),e.next=8,this.host.api.groups.destroy(t);case 8:if(n=e.sent){e.next=11;break}throw new W["default"].NotFoundError(this.host.models.Group.name,t);case 11:return this.host.models.Group.eject(t),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findAllMemberIds",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t){var n;return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 4:return this.host.requireUser(),t=this._resolveModelId(t),e.next=8,this.httpClient.get("/group/:id/members",{urlParams:{id:t}});case 8:return n=e.sent,e.abrupt("return",n.data);case 10:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addMembers",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=8;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(n));case 8:return this.host.requireUser(),t=this._resolveModelId(t),n=H["default"].arrayWrap(n).map(this._resolveModelId.bind(this)),e.next=13,this.httpClient.post("/group/:id/members",{urlParams:{id:t},data:{members:n}});case 13:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeMembers",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=4;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||Array.isArray(n)&&n.every(function(t){return"string"==typeof t})||Array.isArray(n)&&n.every(function(t){return t instanceof Object})){e.next=8;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(n));case 8:return this.host.requireUser(),t=this._resolveModelId(t),n=H["default"].arrayWrap(n).map(this._resolveModelId.bind(this)),e.next=13,this.httpClient.post("/group/:id/members/remove",{urlParams:{id:t},data:{members:n}});case 13:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"addMember",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||n instanceof Object){e.next=8;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.addMembers(t,[n]));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeMember",value:function(){var t=(0,C["default"])(S["default"].mark(function e(t,n){return S["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n||n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n||n instanceof Object){e.next=8;break}throw new TypeError('Value of argument "memberId" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.removeMembers(t,[n]));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"reactToBangEvent",value:function(t){switch(t.event){case"added":this.__addedToGroup(t);break;case"removed":this.__removedFromGroup(t)}}},{key:"__addedToGroup",value:function(t){var e=t.caller_entity,n=t.subject_entity,r=t.target_entity;if(e&&e.token&&r&&r.token&&n&&n.token){var o=this.host.injectModel(e),i=this.host.injectModel(n),a=this.host.injectModel((0,A["default"])({organizationId:t.organization_id},r)),u=H["default"].map([o,i],"id");a.memberIds=H["default"].contain.apply(H["default"],[a.memberIds||[]].concat((0,I["default"])(u)))}}},{key:"__removedFromGroup",value:function(t){var e=t.subject_entity,n=t.target_entity;if(n&&n.token&&e&&e.token){var r=this.host.models.Group.get(n.token),o=e.token;r&&r.memberIds&&(r.memberIds=H["default"].pull(r.memberIds,o))}}}]),e}($["default"]),o(p.prototype,"find",[u],(0,E["default"])(p.prototype,"find"),p.prototype),o(p.prototype,"findAll",[s],(0,E["default"])(p.prototype,"findAll"),p.prototype),o(p.prototype,"findAllWithSpecificMembers",[c],(0,E["default"])(p.prototype,"findAllWithSpecificMembers"),p.prototype),o(p.prototype,"__findAllLocalWithSpecificMembers",[f],(0,E["default"])(p.prototype,"__findAllLocalWithSpecificMembers"),p.prototype),o(p.prototype,"__addedToGroup",[l],(0,E["default"])(p.prototype,"__addedToGroup"),p.prototype),o(p.prototype,"__removedFromGroup",[d],(0,E["default"])(p.prototype,"__removedFromGroup"),p.prototype),h=p))||h);e["default"]=J,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,m["default"])(t);if(!Array.isArray(t)){var o=(0,y["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,p["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,m["default"])(s))?s.v:void 0}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,m["default"])(t);if(!Array.isArray(t)){var o=(0,y["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,p["default"])(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,m["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l,d,h=n(322),p=r(h),v=n(325),y=r(v),g=n(359),m=r(g),b=n(468),_=r(b),w=n(464),E=r(w),x=n(413),A=r(x),O=n(421),j=r(O),k=n(443),I=r(k),T=n(422),S=r(T),M=n(423),C=r(M),P=n(446),B=r(P),R=n(447),D=r(R),F=n(472),G=r(F),z=n(454),L=n(441),V=r(L),N=n(453),U=r(N),$=n(518),q=r($),W=n(519),K=r(W),H=n(515),Y=r(H),Z=n(483),X=r(Z),J=(u=(0,z.decorator)({memoize:!0}),s=(0,z.decorator)(),c=X["default"]["private"],f=X["default"]["private"],(0,X["default"])((d=function(t){function e(){return(0,S["default"])(this,e),(0,B["default"])(this,(0,I["default"])(e).apply(this,arguments))}return(0,D["default"])(e,t),(0,C["default"])(e,[{key:"mounted",value:function(){this.host.models.Conversation.on("afterInject",this._onConversationChange),this.host.models.Conversation.on("afterEject",this._onConversationChange)}},{key:"dispose",value:function(){this.host.models.Conversation.off("afterInject",this._onConversationChange),this.host.models.Conversation.off("afterEject",this._onConversationChange),z.decorator.clear(this.findAll)}},{key:"create",value:function(){var t=(0,j["default"])(A["default"].mark(function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{name:void 0,ttl:void 0,dor:void 0,allowPublicGroups:void 0,pinLock:void 0,settingsRestricted:void 0,autologoutTime:void 0,lifecycleCallback:void 0,groupLifespan:void 0,welcomeEmailSettings:void 0}:arguments[0];return A["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),e.abrupt("return",this.httpClient.post("/organization",{data:n}).then(function(e){var r=e.getHeader("TT-X-Organization-Key"),o=t.host.models.Organization.inject({id:r,name:n.name});return o}));case 2:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,j["default"])(A["default"].mark(function e(){var t,n=this,r=arguments.length<=0||void 0===arguments[0]?{id:void 0,name:void 0,ttl:void 0,dor:void 0,allowPublicGroups:void 0,pinLock:void 0,settingsRestricted:void 0,autologoutTime:void 0,lifecycleCallback:void 0,groupLifespan:void 0,welcomeEmailSettings:void 0,welcomeEmailLogo:void 0,autoSendWelcomeEmail:void 0}:arguments[0];return A["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),t=q["default"].underscoreObject({name:r.name,ttl:r.ttl,dor:r.dor,allowPublicGroups:r.allowPublicGroups,pinLock:r.pinLock,settingsRestricted:r.settingsRestricted,autologoutTime:r.autologoutTime,lifecycleCallback:r.lifecycleCallback,groupLifespan:r.groupLifespan,welcomeEmailSettings:r.welcomeEmailSettings,welcomeEmailLogo:r.welcomeEmailLogo,autoSendWelcomeEmail:r.autoSendWelcomeEmail}),e.abrupt("return",this.httpClient.post("/organization/:id",{urlParams:{id:r.id},data:t}).then(function(e){var o=n.host.models.Organization.inject((0,E["default"])({id:r.id},t));return o}));case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=(0,j["default"])(A["default"].mark(function e(){var t,n=this,r=arguments.length<=0||void 0===arguments[0]?{onlyApproved:!1}:arguments[0];return A["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host.requireUser(),e.next=3,this.host.api.organizations.findAllOfUser(this.host.getCurrentUser().id);case 3:return t=e.sent,t=t.map(function(t){return n.host.models.Organization.inject(t)}),r.onlyApproved&&(t=U["default"].filter(t,{pending:!1})),t=U["default"].sortBy(t,function(t){return t.name.toLowerCase()}),t.forEach(function(t){return n.__reloadConversations(t)}),e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,j["default"])(A["default"].mark(function e(t){var n,r,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return A["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 4:if(o=U["default"].defaults(o,{ignoreNotFound:!1,bypassCache:!1}),this.host.requireUser(),n=void 0,o.bypassCache){e.next=11;break}if(n=this.host.models.Organization.get(t),!n){e.next=11;break}return e.abrupt("return",n);case 11:return e.next=13,this.host.api.organizations.find(this.host.getCurrentUser().id,t);case 13:if(r=e.sent,!r){e.next=19;break}n=this.host.models.Organization.inject(r),this.__reloadConversations(n),e.next=21;break;case 19:if(o.ignoreNotFound){e.next=21;break}throw new V["default"].NotFoundError(this.host.models.Organization.name,t);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.Organization.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Organization.getMulti(t)}},{key:"_onConversationChange",value:function(t,e){this.__reloadConversations(e.organization)}},{key:"__reloadConversations",value:function(t){if(t){var e=U["default"].pick(t,["conversations","unreadCount"]),n=(0,U["default"])(this.host.models.Conversation.getAll()).filter({organizationId:t.id}).orderBy(["lastEventMessageSortNumber","_origIndex"],["desc","asc"]).value(),r=U["default"].sumBy(n,function(t){return t.unreadCount}),o={conversations:n,unreadCount:r},i=!1;U["default"].each(e,function(e,n){(0,K["default"])(e,o[n])||(t[n]=o[n],i=!0)}),i&&this.host.models.Organization.inject(t)}}}]),e}(G["default"]),o(d.prototype,"findAll",[u],(0,_["default"])(d.prototype,"findAll"),d.prototype),o(d.prototype,"find",[s],(0,_["default"])(d.prototype,"find"),d.prototype),o(d.prototype,"_onConversationChange",[c,Y["default"]],(0,_["default"])(d.prototype,"_onConversationChange"),d.prototype),o(d.prototype,"__reloadConversations",[f],(0,_["default"])(d.prototype,"__reloadConversations"),d.prototype),l=d))||l);e["default"]=J,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){return u["default"].isArray(t)?t.map(function(t){return o(t,e)}):u["default"].isObject(t)?u["default"].transform(t,function(t,n,r){t[e(r)]=o(n,e)},{}):t}Object.defineProperty(e,"__esModule",{value:!0});var i=n(325),a=(r(i),n(453)),u=r(a),s={camelizeKey:u["default"].memoize(u["default"].camelCase),underscoreKey:u["default"].memoize(u["default"].snakeCase),camelizeObject:function(t){return o(t,s.camelizeKey)},underscoreObject:function(t){return o(t,s.underscoreKey)}};e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(520);t.exports=function(t,e,n,o){var i=n?n.call(o,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var a=r(t),u=r(e),s=a.length;if(s!==u.length)return!1;o=o||null;for(var c=Object.prototype.hasOwnProperty.bind(e),f=0;s>f;f++){var l=a[f];if(!c(l))return!1;var d=t[l],h=e[l],p=n?n.call(o,d,h,l):void 0;if(p===!1||void 0===p&&d!==h)return!1}return!0}},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&a(m(t))}function i(t,e){return t="number"==typeof t||h.test(t)?+t:-1,e=null==e?g:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function u(t){for(var e=c(t),n=e.length,r=n&&t.length,o=!!r&&a(r)&&(d(t)||l(t)),u=-1,s=[];++u<n;){var f=e[u];(o&&i(f,r)||v.call(t,f))&&s.push(f)}return s}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(d(t)||l(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,u=Array(e),c=e>0;++r<e;)u[r]=r+"";for(var f in t)c&&i(f,e)||"constructor"==f&&(o||!v.call(t,f))||u.push(f);return u}var f=n(521),l=n(522),d=n(523),h=/^\d+$/,p=Object.prototype,v=p.hasOwnProperty,y=f(Object,"keys"),g=9007199254740991,m=r("length"),b=y?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?u(t):s(t)?y(t):[]}:u;t.exports=b},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function o(t){return i(t)&&d.call(t)==u}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:o(t)?h.test(f.call(t)):n(t)&&s.test(t)}var u="[object Function]",s=/^\[object .+?Constructor\]$/,c=Object.prototype,f=Function.prototype.toString,l=c.hasOwnProperty,d=c.toString,h=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return i(t)&&v.call(t,"callee")&&(!g.call(t,"callee")||y.call(t)==l)}function o(t){return null!=t&&!("function"==typeof t&&a(t))&&u(m(t))}function i(t){return c(t)&&o(t)}function a(t){var e=s(t)?y.call(t):"";return e==d||e==h}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return!!t&&"object"==typeof t}var f=9007199254740991,l="[object Arguments]",d="[object Function]",h="[object GeneratorFunction]",p=Object.prototype,v=p.hasOwnProperty,y=p.toString,g=p.propertyIsEnumerable,m=n("length");t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function i(t){return a(t)&&p.call(t)==c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null==t?!1:i(t)?v.test(d.call(t)):n(t)&&f.test(t)}var s="[object Array]",c="[object Function]",f=/^\[object .+?Constructor\]$/,l=Object.prototype,d=Function.prototype.toString,h=l.hasOwnProperty,p=l.toString,v=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=r(Array,"isArray"),g=9007199254740991,m=y||function(t){return n(t)&&o(t.length)&&p.call(t)==s};t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,C["default"])(t);if(!Array.isArray(t)){var o=(0,S["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,I["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,C["default"])(s))?s.v:void 0}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,C["default"])(t);if(!Array.isArray(t)){var o=(0,S["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,I["default"])(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,C["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l,d,h,p,v,y,g,m,b,_,w,E,x,A,O,j,k=n(322),I=r(k),T=n(325),S=r(T),M=n(359),C=r(M),P=n(468),B=r(P),R=n(474),D=r(R),F=n(413),G=r(F),z=n(421),L=r(z),V=n(443),N=r(V),U=n(422),$=r(U),q=n(423),W=r(q),K=n(446),H=r(K),Y=n(447),Z=r(Y),X=n(472),J=r(X),Q=n(454),tt=n(453),et=r(tt),nt=n(471),rt=r(nt),ot=n(519),it=r(ot),at=n(515),ut=r(at),st=n(483),ct=r(st),ft=n(504),lt=new rt["default"].MD5,dt=(u=(0,Q.decorator)(),s=(0,Q.decorator)(),c=(0,Q.decorator)(),f=ct["default"]["private"],l=ct["default"]["private"],d=ct["default"]["private"],h=ct["default"]["private"],p=ct["default"]["private"],v=ct["default"]["private"],y=ct["default"]["private"],g=ct["default"]["private"],m=ct["default"]["private"],b=ct["default"]["private"],_=ct["default"]["private"],w=ct["default"]["private"],E=ct["default"]["private"],x=ct["default"]["private"],A=ct["default"]["private"],(0,ct["default"])((j=function(t){function e(){var t;(0,$["default"])(this,e);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=(0,H["default"])(this,(t=(0,N["default"])(e)).call.apply(t,[this].concat(r)));return i._fetched=!1,i._throtelled__flushConversationsToReload=i.config.conversationReloadDelay?i._throtelled__flushConversationsToReload=et["default"].throttle(i.__flushConversationsToReload,i.config.conversationReloadDelay,{leading:!1}):i.__flushConversationsToReload,i}return(0,Z["default"])(e,t),(0,W["default"])(e,[{key:"mounted",value:function(){this.host.on("message:sending",this._onMessageSending),this.host.on("message:sent",this._onMessageSent),this.host.models.Message.on("afterInject",this._onMessageChange),this.host.models.Message.on("afterEject",this._onMessageChange),this.host.models.Group.on("afterEject",this._onGroupDelete),this.__queuedConversationsToReload=[]}},{key:"dispose",value:function(){this._fetched=!1,this.host.removeListener("message:sending",this._onMessageSending),this.host.removeListener("message:sent",this._onMessageSent),this.host.models.Message.off("afterInject",this._onMessageChange),this.host.models.Message.off("afterEject",this._onMessageChange),this.host.models.Group.off("afterEject",this._onGroupDelete),this.__queuedConversationsToReload=null,this._throtelled__flushConversationsToReload.cancel&&this._throtelled__flushConversationsToReload.cancel()}},{key:"findAll",value:function(){var t=(0,L["default"])(G["default"].mark(function e(){var t,n,r=this;return G["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._fetched){e.next=2;break}return e.abrupt("return",this.getAll());case 2:return e.next=4,this.host.api.roster.findAll();case 4:return t=e.sent,n=t.map(function(t){var e=r.host.injectModel(t);delete e.$temporary;var n=t.organization_key;return{counterParty:e,organizationId:n}}).map(function(t){var e=t.counterParty,n=t.organizationId,o=r.ensureConversation(e.$entityType,e.id,n);return o._counterPartyAddedOnServer=!0,o}),this._fetched=!0,e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"refetch",value:function(){var t=(0,L["default"])(G["default"].mark(function e(){return G["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._fetched=!1,t.abrupt("return",this.findAll());case 2:case"end":return t.stop()}},e,this)}));return function(){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,L["default"])(G["default"].mark(function e(t,n,r){var o,u,s;return G["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:return o={},r&&(o["TT-X-Organization-Key"]=r),u=this.host.typeNSByModelName(t),s=this.ensureConversation(t,n,r),e.prev=16,e.next=19,this.host.api.roster.add(t,n,r);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](16),this.logger.warn("can't add "+n+" "+u);case 24:s._counterPartyAddedOnServer=!0;case 25:case"end":return e.stop()}},e,this,[[16,21]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=(0,L["default"])(G["default"].mark(function e(t,n,r){var o,u;return G["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t){e.next=8;break}throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 8:if("string"==typeof n){e.next=10;break}throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:return o={},r&&(o["TT-X-Organization-Key"]=r),
u=this.host.typeNSByModelName(t),e.prev=15,e.next=18,this.host.api.roster.remove(t,n,r);case 18:this.ejectConversation(t,n,r),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](15),this.logger.warn("can't remove "+n+" "+u);case 24:case"end":return e.stop()}},e,this,[[15,21]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"ensureConversation",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=this.getConversationKey(t,e,n),o=this.get(t,e,n);return o?(this.__ensureEntities(o),o):(o=this.host.models.Conversation.createInstance({id:r,counterPartyType:t,counterPartyId:e,organizationId:n,_origIndex:this.host.models.Conversation.getAll().length}),this.__ensureEntities(o),this.host.models.Conversation.inject(o),this.__notifyOrganizationChange(o.organizationId),o)}},{key:"ejectConversation",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=this.get(t,e,n);return r&&(this.host.models.Conversation.eject(r),this.__notifyOrganizationChange(r.organizationId)),r}},{key:"reactToIncomingMessageEvent",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.host.getCurrentUser().id,n=this.host.models.Message.parseAttrs(t);n.direction=n.senderId==e?ft.MessageDirection.OUTGOING:ft.MessageDirection.INCOMING,n.groupId?(n.counterPartyType="group",n.counterPartyId=n.groupId):n.recipientId&&(n.counterPartyType="user",n.counterPartyId=n.senderId==e?n.recipientId:n.senderId),n.direction==ft.MessageDirection.OUTGOING?n.senderStatus=ft.MessageSenderStatus.SENT:n.senderStatus=ft.MessageSenderStatus.NA;var r=this.host.conversations.ensureConversation(n.counterPartyType,n.counterPartyId,n.senderOrganizationId);n.conversationId=r.id;var o=this.host.models.Message.createInstance(n);this.__ensureMessageEntities(o),this.host.models.Message.inject(o),this.emit("message",o),this.__addConversationCounterPartyToServerRosterIfShould(r),this.__queueReload(r),r.emit("message",o),this.__notifyOrganizationChange(r.organizationId),o.senderId!=e&&o.recipientStatus!=ft.MessageRecipientStatus.READ&&o.recipientStatus!=ft.MessageRecipientStatus.DELIVERED&&this.host.messages.markAsReceived(o)}},{key:"reactToFriendsEvent",value:function(t){var e=t.friend,n=e.action,r=e.organization_id,o=(0,D["default"])(e,["action","organization_id"]),i=r,a=this.host.modelByTypeNS(o.xmlns);if(!a)return void this.logger.error("Class "+o.xmlns+" not found");switch(n){case"add":"group"==a.name&&(o.organizationId=i);var u=this.host.injectModel(o);this.__addedByCounterParty(u,i);break;case"del":this.__removedByCounterParty(a.name,o.token,i);break;default:this.logger.error("friends action not implemented",n,t)}}},{key:"_onMessageSending",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.__ensureConversationFromMessage(t);this.__addConversationCounterPartyToServerRosterIfShould(e),this.__reloadConversation(e),this.__notifyOrganizationChange(e.organizationId)}},{key:"_onMessageSent",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId);this.__reloadConversation(e),e.emit("message",t)}},{key:"_onMessageChange",value:function(t,e){e.conversation&&this.__queueReload(e.conversation)}},{key:"_onGroupDelete",value:function(t,e){this.ejectConversation("group",e.id,e.organizationId)}},{key:"__queueReload",value:function(t){et["default"].contain(this.__queuedConversationsToReload,t),this._throtelled__flushConversationsToReload()}},{key:"__flushConversationsToReload",value:function(){var t=this;this.__queuedConversationsToReload.forEach(function(e){return t.__reloadConversation(e)}),this.__queuedConversationsToReload.length=0}},{key:"__reloadConversation",value:function(t){var e=et["default"].pick(t,["messages","lastMessage","unreadMessages","unreadCount","lastEventMessageSortNumber"]),n={},r=(0,et["default"])(this.host.models.Message.getAll()).filter({conversationId:t.id}).orderBy(["sortNumber"],["asc"]).value();n.messages=r,n.lastMessage=et["default"].last(r),n.unreadMessages=r.filter(function(t){return t.direction===ft.MessageDirection.INCOMING&&(t.recipientStatus===ft.MessageRecipientStatus.NEW||t.recipientStatus===ft.MessageRecipientStatus.DELIVERED)}),n.unreadCount=n.unreadMessages.length,n.lastEventMessageSortNumber=n.lastMessage&&n.lastMessage.sortNumber||0;var o=!1;et["default"].each(e,function(e,r){(0,it["default"])(e,n[r])||(t[r]=n[r],o=!0)}),o&&(this.host.models.Conversation.inject(t),t.emit("change"),this.emit("change",t))}},{key:"__notifyOrganizationChange",value:function(t){var e=this.host.models.Organization.get(t);e&&e.emit("change")}},{key:"__ensureConversationFromMessage",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));var e=this.ensureConversation(t.counterPartyType,t.counterPartyId,t.senderOrganizationId);return e}},{key:"__addConversationCounterPartyToServerRosterIfShould",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "conversation" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "conversation" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));t&&(t._counterPartyAddedOnServer||this.add(t.counterPartyType,t.counterPartyId,t.organizationId))}},{key:"getMessageConversationKey",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if(!(t instanceof Object))throw new TypeError('Value of argument "message" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));if(t.groupId)return this.conversationHashForGroupId(t.groupId);var e=t.senderId==this.host.getCurrentUser().id?t.recipientId:t.senderId;return this.conversationHashForUserMessage(e,t.senderOrganizationId,t.recipientOrganizationId)}},{key:"getConversationKey",value:function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?n:arguments[3];if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "senderOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof r)throw new TypeError('Value of argument "recipientOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "senderOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));if("string"!=typeof r)throw new TypeError('Value of argument "recipientOrganizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));switch(t){case"user":return this.conversationHashForUserMessage(e,n,r);case"group":return this.conversationHashForGroupId(e);default:throw new Error("type "+t+" not supported in conversation")}}},{key:"conversationHashForUserMessage",value:function(t,e,n){var r=[t,e,n].join(":");return lt.b64(r)}},{key:"conversationHashForGroupId",value:function(t){return lt.b64(t)}},{key:"findConversationWithUser",value:function(){var t=(0,L["default"])(G["default"].mark(function e(t,n){return G["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "userId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.get(this.host.models.User.name,t,n));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findConversationWithGroup",value:function(){var t=(0,L["default"])(G["default"].mark(function e(t,n){return G["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t){e.next=6;break}throw new TypeError('Value of argument "groupId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return e.abrupt("return",this.get(this.host.models.Group.name,t,n));case 9:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findAllGroupConversationsWithMembers",value:function(){var t=(0,L["default"])(G["default"].mark(function e(t,n){var r,o=this;return G["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||Array.isArray(t)&&t.every(function(t){return"string"==typeof t})||Array.isArray(t)&&t.every(function(t){return t instanceof Object})){e.next=6;break}throw new TypeError('Value of argument "memberIds" violates contract.\n\nExpected:\nstring | string[] | Object[]\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return t=et["default"].arrayWrap(t).map(this._resolveModelId.bind(this)),e.next=11,this.host.groups.findAllWithSpecificMembers(t,n);case 11:return r=e.sent,e.abrupt("return",r.map(function(t){return o.get(o.host.models.Group.name,t.id,n)}));case 13:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"get",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "counterPartyType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "counterPartyId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));var r=this.getConversationKey(t,e,n),o=this.host.models.Conversation.get(r);return o||null}},{key:"getAll",value:function(){return this.host.models.Conversation.getAll()}},{key:"getById",value:function(t){if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));return this.host.models.Conversation.get(t)}},{key:"getMultiById",value:function(t){if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+a(t));if(!Array.isArray(t)||!t.every(function(t){return"string"==typeof t}))throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string>\n\nGot:\n'+i(t));return this.host.models.Conversation.getMulti(t)}},{key:"__addedByCounterParty",value:function(t,e){if(!(t instanceof Object))throw new TypeError('Value of argument "counterParty" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!(t instanceof Object))throw new TypeError('Value of argument "counterParty" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));this.ensureConversation(t.$entityType,t.id,e)}},{key:"__removedByCounterParty",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "entityType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "entityType" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if("string"!=typeof n)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));this.ejectConversation(t,e,n)}},{key:"__ensureEntities",value:function(t){var e,n,r=this;this.host.models.Organization.ensureEntityOrCreateTemporaryAndFind({id:t.organizationId,name:"Loading..."},{finder:(e=this.host.organizations).find.bind(e),onMissing:function(){r.logger.info("org "+t.organizationId+" not found, created temporary org"),t.$loadingOrganization=!0},onLoad:function(e){r.logger.info("org "+t.organizationId+" loaded"),t.$loadingOrganization=!1}});var o={id:t.counterPartyId},i=void 0;switch(t.counterPartyType){case"user":o.displayName="Loading...",i=(n=this.host.users).find.bind(n);break;case"group":o.displayName="Loading group...",o.organizationId=t.organizationId,i=(n=this.host.groups).find.bind(n);break;default:throw new Error("unsupported counterPartyType",t.counterPartyType)}this.host.store.store.models[t.counterPartyType].ensureEntityOrCreateTemporaryAndFind(o,{finder:i,onMissing:function(){r.logger.info("entry "+t.counterPartyId+" not found, created temporary on org "+t.organizationId),t.$loadingCounterParty=!0},onLoad:function(e){t.$loadingCounterParty=!1,r.__fireChange("update",t)}}),this.__fireChange("add",t)}},{key:"__ensureMessageEntities",value:function(t){var e,n=this,r=this.host.getCurrentUser().id,o=t.senderId==r?t.recipientId:t.senderId;o&&this.host.models.User.ensureEntityOrCreateTemporaryAndFind({id:o,displayName:"Loading..."},{finder:(e=this.host.users).find.bind(e),onlyPlaceholder:!!t.groupId,onMissing:function(){n.logger.info("message otherUser "+o+" not found, created temporary"),t.$loadingOtherUser=!0},onLoad:function(e){t.$loadingOtherUser=!1,n.__fireChange("update",t.conversation)}})}},{key:"__fireChange",value:function(t,e){}}]),e}(J["default"]),o(j.prototype,"findAll",[u],(0,B["default"])(j.prototype,"findAll"),j.prototype),o(j.prototype,"add",[s],(0,B["default"])(j.prototype,"add"),j.prototype),o(j.prototype,"remove",[c],(0,B["default"])(j.prototype,"remove"),j.prototype),o(j.prototype,"_onMessageSending",[f,ut["default"]],(0,B["default"])(j.prototype,"_onMessageSending"),j.prototype),o(j.prototype,"_onMessageSent",[l,ut["default"]],(0,B["default"])(j.prototype,"_onMessageSent"),j.prototype),o(j.prototype,"_onMessageChange",[d,ut["default"]],(0,B["default"])(j.prototype,"_onMessageChange"),j.prototype),o(j.prototype,"_onGroupDelete",[h,ut["default"]],(0,B["default"])(j.prototype,"_onGroupDelete"),j.prototype),o(j.prototype,"__queueReload",[p],(0,B["default"])(j.prototype,"__queueReload"),j.prototype),o(j.prototype,"__flushConversationsToReload",[v,ut["default"]],(0,B["default"])(j.prototype,"__flushConversationsToReload"),j.prototype),o(j.prototype,"__reloadConversation",[y],(0,B["default"])(j.prototype,"__reloadConversation"),j.prototype),o(j.prototype,"__notifyOrganizationChange",[g],(0,B["default"])(j.prototype,"__notifyOrganizationChange"),j.prototype),o(j.prototype,"__ensureConversationFromMessage",[m],(0,B["default"])(j.prototype,"__ensureConversationFromMessage"),j.prototype),o(j.prototype,"__addConversationCounterPartyToServerRosterIfShould",[b],(0,B["default"])(j.prototype,"__addConversationCounterPartyToServerRosterIfShould"),j.prototype),o(j.prototype,"__addedByCounterParty",[_],(0,B["default"])(j.prototype,"__addedByCounterParty"),j.prototype),o(j.prototype,"__removedByCounterParty",[w],(0,B["default"])(j.prototype,"__removedByCounterParty"),j.prototype),o(j.prototype,"__ensureEntities",[E],(0,B["default"])(j.prototype,"__ensureEntities"),j.prototype),o(j.prototype,"__ensureMessageEntities",[x],(0,B["default"])(j.prototype,"__ensureMessageEntities"),j.prototype),o(j.prototype,"__fireChange",[A],(0,B["default"])(j.prototype,"__fireChange"),j.prototype),O=j))||O);e["default"]=dt,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var i,a,u,s=n(468),c=r(s),f=n(443),l=r(f),d=n(422),h=r(d),p=n(423),v=r(p),y=n(446),g=r(y),m=n(447),b=r(m),_=n(472),w=r(_),E=n(453),x=(r(E),n(504)),A=n(483),O=r(A),j=(i=O["default"]["private"],(0,O["default"])((u=function(t){function e(t,n){(0,h["default"])(this,e);var r=(0,g["default"])(this,(0,l["default"])(e).call(this,t,n));return r._data={},r.host.models.User.on("beforeInject",function(t,e){return r._onUserInjected(e)}),r}return(0,b["default"])(e,t),(0,v["default"])(e,[{key:"reactToPresenceEvent",value:function(t){this.set(t.from,x.PresenceStatus.resolve(t.type))}},{key:"set",value:function(t,e){var n=this.host.models.User.get(t);n&&(n.presence=e),this._data[t]=e}},{key:"get",value:function(t){return t==this.host.getCurrentUser().id?x.PresenceStatus.AVAILABLE:this._data[t]}},{key:"_onUserInjected",value:function(t){t.id in this._data&&(t.presence=this._data[t.id])}}]),e}(w["default"]),o(u.prototype,"_onUserInjected",[i],(0,c["default"])(u.prototype,"_onUserInjected"),u.prototype),a=u))||a);e["default"]=j,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,m["default"])(t);if(!Array.isArray(t)){var o=(0,G["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,y["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,m["default"])(s))?s.v:void 0}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,m["default"])(t);if(!Array.isArray(t)){var o=(0,G["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,y["default"])(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,m["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u,s,c,f,l,d,h,p,v=n(322),y=r(v),g=n(359),m=r(g),b=n(468),_=r(b),w=n(527),E=r(w),x=n(485),A=r(x),O=n(360),j=r(O),k=n(531),I=r(k),T=n(428),S=r(T),M=n(396),C=r(M),P=n(392),B=r(P),R=n(413),D=r(R),F=n(325),G=r(F),z=n(421),L=r(z),V=n(443),N=r(V),U=n(422),$=r(U),q=n(423),W=r(q),K=n(446),H=r(K),Y=n(447),Z=r(Y),X=n(472),J=r(X),Q=n(453),tt=r(Q),et=n(441),nt=r(et),rt=n(454),ot=n(483),it=r(ot),at=(u=(0,rt.decorator)(),s=(0,rt.decorator)(),c=it["default"]["private"],f=it["default"]["private"],(0,it["default"])((p=h=function(t){function e(){return(0,$["default"])(this,e),(0,H["default"])(this,(0,N["default"])(e).apply(this,arguments))}return(0,Z["default"])(e,t),(0,W["default"])(e,[{key:"fullUpdate",value:function(){var t=(0,L["default"])(D["default"].mark(function e(t,n,r){return D["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if(n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "entireData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t||t instanceof Object){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 8:if(n instanceof Object){e.next=10;break}throw new TypeError('Value of argument "entireData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:if(r){e.next=14;break}throw new nt["default"].ValidationError("organizationId","required");case 14:if(!(this.host.config.maxMetadataKeyCount>0&&(0,G["default"])(n).length>this.host.config.maxMetadataKeyCount)){e.next=16;break}throw new nt["default"].ValidationError("entireData","invalid","Total number of metadata keys is "+(0,G["default"])(n)+" and should not exceed "+this.host.config.maxMetadataKeyCount);case 16:return this.host.requireUser(),t=this._resolveModelId(t),e.prev=18,e.next=21,this.host.api.metadata.update(t,n,r);case 21:return this.__injectMetadata(t,r,n),e.abrupt("return",n);case 25:if(e.prev=25,e.t0=e["catch"](18),!e.t0.response||404!=e.t0.response.status){e.next=31;break}throw new nt["default"].NotFoundError("metadata",t);case 31:throw e.t0;case 32:case"end":return e.stop()}},e,this,[[18,25]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,L["default"])(D["default"].mark(function e(t,n,r){var o,u;return D["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if(n instanceof Object){e.next=4;break}throw new TypeError('Value of argument "partialData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(n));case 4:if("string"==typeof r){e.next=6;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(r));case 6:if("string"==typeof t||t instanceof Object){e.next=8;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 8:if(n instanceof Object){e.next=10;break}throw new TypeError('Value of argument "partialData" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));case 10:if("string"==typeof r){e.next=12;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(r));case 12:if(r){e.next=14;break}throw new nt["default"].ValidationError("organizationId","required");case 14:return e.next=16,this.find(t,r);case 16:return o=e.sent,u=(0,B["default"])({},o,n),e.abrupt("return",this.fullUpdate(t,u,r));case 19:case"end":return e.stop()}},e,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=(0,L["default"])(D["default"].mark(function e(t,n){var r;return D["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if("string"==typeof t||t instanceof Object){e.next=6;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:if(n){e.next=10;break}throw new nt["default"].ValidationError("organizationId","required");case 10:return this.host.requireUser(),t=this._resolveModelId(t),e.prev=12,e.next=15,this.host.api.metadata.find(t,n);case 15:return r=e.sent,this.__injectMetadata(t,n,r),e.abrupt("return",r);case 20:if(e.prev=20,e.t0=e["catch"](12),!e.t0.response||404!=e.t0.response.status){e.next=26;break}throw new nt["default"].NotFoundError("metadata",t);case 26:throw e.t0;case 27:case"end":return e.stop()}},e,this,[[12,20]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"findMulti",value:function(){var t=(0,L["default"])(D["default"].mark(function e(t,n){var r,o,u,s,c=this;return D["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=2;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t||t instanceof Object})){e.next=6;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nArray<string | Object>\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:if(n){e.next=10;break}throw new nt["default"].ValidationError("organizationId","required");case 10:return this.host.requireUser(),t=tt["default"].uniq(tt["default"].arrayWrap(t).map(this._resolveModelId.bind(this))),r=tt["default"].chunk(t,20),o=r.map(function(t){return c.__findMultiPaged(t,n)}),e.next=16,C["default"].all(o);case 16:return u=e.sent,s=tt["default"].assign.apply(tt["default"],[{}].concat((0,S["default"])(u))),e.abrupt("return",s);case 19:case"end":return e.stop()}},e,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"__findMultiPaged",value:function(){var t=(0,L["default"])(D["default"].mark(function e(t,n){var r,o,u,s,c,f,l,d,h,p,v,y,g,m,b,_;return D["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t})){e.next=2;break;
}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+a(t));case 2:if("string"==typeof n){e.next=4;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(n));case 4:if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t})){e.next=6;break}throw new TypeError('Value of argument "ids" violates contract.\n\nExpected:\nstring[]\n\nGot:\n'+i(t));case 6:if("string"==typeof n){e.next=8;break}throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(n));case 8:return e.prev=8,e.next=11,this.host.api.metadata.findMulti(t,n);case 11:if(r=e.sent,l=(0,I["default"])(r),l&&("function"==typeof l[j["default"]]||Array.isArray(l))){e.next=15;break}throw new TypeError("Expected _Object$entries to be iterable, got "+i(l));case 15:if(l&&("function"==typeof l[j["default"]]||Array.isArray(l))){e.next=17;break}throw new TypeError("Expected _Object$entries to be iterable, got "+a(l));case 17:for(o=!0,u=!1,s=void 0,e.prev=20,c=(0,A["default"])(l);!(o=(f=c.next()).done);o=!0)d=(0,E["default"])(f.value,2),h=d[0],p=d[1],p&&this.__injectMetadata(h,n,p);e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](20),u=!0,s=e.t0;case 28:e.prev=28,e.prev=29,!o&&c["return"]&&c["return"]();case 31:if(e.prev=31,!u){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return e.abrupt("return",r);case 39:if(e.prev=39,e.t1=e["catch"](8),!e.t1.response||404!=e.t1.response.status){e.next=84;break}if(v={},t&&("function"==typeof t[j["default"]]||Array.isArray(t))){e.next=45;break}throw new TypeError("Expected ids to be iterable, got "+i(t));case 45:if(t&&("function"==typeof t[j["default"]]||Array.isArray(t))){e.next=47;break}throw new TypeError("Expected ids to be iterable, got "+a(t));case 47:y=!0,g=!1,m=void 0,e.prev=50,b=(0,A["default"])(t);case 52:if(y=(_=b.next()).done){e.next=67;break}return h=_.value,e.prev=54,e.next=57,this.find(h,n);case 57:v[h]=e.sent,e.next=64;break;case 60:if(e.prev=60,e.t2=e["catch"](54),e.t2.code==nt["default"].NotFoundError.CODE){e.next=64;break}throw e.t2;case 64:y=!0,e.next=52;break;case 67:e.next=73;break;case 69:e.prev=69,e.t3=e["catch"](50),g=!0,m=e.t3;case 73:e.prev=73,e.prev=74,!y&&b["return"]&&b["return"]();case 76:if(e.prev=76,!g){e.next=79;break}throw m;case 79:return e.finish(76);case 80:return e.finish(73);case 81:return e.abrupt("return",v);case 84:throw e.t1;case 85:case"end":return e.stop()}},e,this,[[8,39],[20,24,28,36],[29,,31,35],[50,69,73,81],[54,60],[74,,76,80]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"__injectMetadata",value:function(t,e,n){if("string"!=typeof t)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+a(e));if(!(n instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+a(n));if("string"!=typeof t)throw new TypeError('Value of argument "entityId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));if("string"!=typeof e)throw new TypeError('Value of argument "organizationId" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(e));if(!(n instanceof Object))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+i(n));var r=t+":"+e;this.host.models.Metadata.inject({id:r,data:n,entityId:t,organizationId:e})}}]),e}(J["default"]),h.METADTA_TYPES=["user","group"],d=p,o(d.prototype,"find",[u],(0,_["default"])(d.prototype,"find"),d.prototype),o(d.prototype,"findMulti",[s],(0,_["default"])(d.prototype,"findMulti"),d.prototype),o(d.prototype,"__findMultiPaged",[c],(0,_["default"])(d.prototype,"__findMultiPaged"),d.prototype),o(d.prototype,"__injectMetadata",[f],(0,_["default"])(d.prototype,"__injectMetadata"),d.prototype),l=d))||l);e["default"]=at,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=n(528),i=r(o),a=n(485),u=r(a);e["default"]=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=(0,u["default"])(t);!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i["default"])(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={"default":n(529),__esModule:!0}},function(t,e,n){n(375),n(362),t.exports=n(530)},function(t,e,n){var r=n(399),o=n(373)("iterator"),i=n(367);t.exports=n(324).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){t.exports={"default":n(532),__esModule:!0}},function(t,e,n){n(533),t.exports=n(324).Object.entries},function(t,e,n){var r=n(346),o=n(534)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var r=n(330),o=n(333),i=n(386).f;t.exports=function(t){return function(e){for(var n,a=o(e),u=r(a),s=u.length,c=0,f=[];s>c;)i.call(a,n=u[c++])&&f.push(t?[n,a[n]]:a[n]);return f}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var i,a,u=n(468),s=r(u),c=n(413),f=r(c),l=n(396),d=r(l),h=n(325),p=r(h),v=n(421),y=r(v),g=n(443),m=r(g),b=n(422),_=r(b),w=n(423),E=r(w),x=n(446),A=r(x),O=n(447),j=r(O),k=n(472),I=r(k),T=n(454),S=n(441),M=r(S),C=n(453),P=r(C),B=n(518),R=r(B),D={user:"account",distributionList:"distribution_list",group:"group",organization:"organization"},F=P["default"].values(D),G=(i=(0,T.decorator)(),a=function(t){function e(){return(0,_["default"])(this,e),(0,A["default"])(this,(0,m["default"])(e).apply(this,arguments))}return(0,j["default"])(e,t),(0,E["default"])(e,[{key:"query",value:function(){var t=(0,y["default"])(f["default"].mark(function e(t){var n,r,o,i,a,u=this,s=t.types,c=void 0===s?[]:s,l=t.query,h=void 0===l?{}:l,v=t.continuation,y=void 0===v?null:v,g=t.includeDisabled,m=void 0===g?!1:g,b=t.excludeTokens,_=void 0===b?[]:b,w=t.resultsFormat,E=void 0===w?"entities":w,x=t.organizationId,A=void 0===x?null:x,O=t.organizationIds,j=void 0===O?[]:O,k=t.sort,I=void 0===k?[]:k,T=t.includeMetadata,S=void 0===T?!1:T;return f["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=c.length){t.next=2;break}throw new M["default"].ValidationError("types","required","no types specified");case 2:if(c=c.map(function(t){return D[t]}),n=P["default"].difference(c,F),!(n.length>0)){t.next=6;break}throw new M["default"].ValidationError("types","invalid","invalid types: "+n.join(", "));case 6:if(A&&(j=[A]),0!=j.length){t.next=9;break}throw new M["default"].ValidationError("organizationIds","invalid","search must be done in a context of an organization");case 9:return"ids"===E&&(E="tokens"),r={type:c,include_disabled:m,directory:j,results_format:E},y&&(r.continuation=y),I&&I.length&&(r.sort=I),_=P["default"].arrayWrap(_),h&&(0,p["default"])(h).length>0&&(r.bool={must:R["default"].underscoreObject(h)}),t.next=17,this.httpClient.post("/search",{data:r});case 17:if(o=t.sent,i=o.data.results,a=P["default"].eachWithObject(i,function(t,e){var n=t.type,r=t.entity,o=t.organization_id;if(0!=(0,p["default"])(r).length){"tigertext:entity:account"===n&&P["default"].replaceKey(r,"status","account_status");var i=u.host.injectModel(r,n);if(!_.length||!_.includes(i.id)){if(!i)return void u.logger.warn("no entity for ",t);var a=new u.host.models.SearchResult(i,o);e.push(a)}}},[]),!S){t.next=22;break}return t.delegateYield(f["default"].mark(function e(){var t,n,r;return f["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P["default"].groupBy(a,"organizationId"),n=P["default"].keyBy(a,"entityId"),r=P["default"].transform(t,function(t,e,r){t.push(u.host.metadata.findMulti(P["default"].map(e,"entityId"),r).then(function(t){P["default"].each(t,function(t,e){return n[e].metadata=t})}))},[]),!(r.length>0)){e.next=6;break}return e.next=6,d["default"].all(r);case 6:case"end":return e.stop()}},e,u)})(),"t0",22);case 22:return t.abrupt("return",a);case 23:case"end":return t.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(I["default"]),o(a.prototype,"query",[i],(0,s["default"])(a.prototype,"query"),a.prototype),a);e["default"]=G,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(464),i=r(o),a=n(474),u=r(a),s=n(422),c=r(s),f=n(423),l=r(f),d=n(453),h=r(d),p=n(537),v=r(p),y=n(542),g=r(y),m=n(518),b=r(m),_=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.logger,o=(0,u["default"])(n,["logger"]);(0,c["default"])(this,t),this.host=e,this.options=o,this.logger=r,this.store=new v["default"]((0,i["default"])({},o,{host:e,logger:r}))}return(0,l["default"])(t,[{key:"defineModels",value:function(){var t=this,e={},n=(0,i["default"])({},this.options,{host:this.host,logger:this.logger});h["default"].each(g["default"],function(r,o){e[o]=r(t,n)}),this.models=e}},{key:"defineModel",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e.replaceKeys=e.replaceKeys||{},h["default"].defaults(e.replaceKeys,{token:"id"});var n=(this.store,this.store.defineModel(t,(0,i["default"])({},e,{beforeCreateInstance:function(t){!t[n.idAttribute]||"serverId"in t||(t.serverId=t[n.idAttribute]),e.beforeCreateInstance&&e.beforeCreateInstance(t)},beforeInject:function(t){var r=n.get(t[n.idAttribute]);!r||"serverId"in t||(t.serverId=r.serverId),e.beforeInject&&e.beforeInject(t)},afterInject:function(t){var n=Date.now();t.$lastModified==n&&(n+=1e-5),t.$lastModified=n,e.afterInject&&e.afterInject(t)},parseAttrs:function(t){var n=b["default"].camelizeObject(t);return h["default"].each(e.replaceKeys,function(t,e){h["default"].replaceKey(n,e,t)}),e.parseAttrs&&(n=e.parseAttrs(n,t)),n}})));return n}},{key:"clear",value:function(){this.store.clear()}}]),t}();e["default"]=_,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var i=(0,c["default"])(t);if(!i.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=i.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+o(t[n],e)+";"}).join("\n  "+a);return i.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var i=o(t[0],e);return t.every(function(t){return o(t,e)===i})?{v:i.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return o(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}function i(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,l["default"])(t);if(!Array.isArray(t)){var o=(0,c["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var a="  ".repeat(e-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,u["default"])(n))+": "+i(t[n],e)+";"}).join("\n  "+a);return o.length>=r&&(s+="\n  "+a+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+a+s+"\n"+a+"}":"{\n  "+a+s+"\n"+a+"}"}if(!(t.length>0))return"Array";var f=function(){if(e>n)return{v:"[...]"};var o=i(t[0],e);return t.every(function(t){return i(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return i(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof f?"undefined":(0,l["default"])(f))?f.v:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(322),u=r(a),s=n(325),c=r(s),f=n(359),l=r(f),d=n(413),h=r(d),p=n(421),v=r(p),y=n(464),g=r(y),m=n(538),b=r(m),_=n(392),w=r(_),E=n(422),x=r(E),A=n(423),O=r(A),j=n(453),k=r(j),I=n(290),T=r(I),S=n(541),M=r(S);T["default"].prototype.off=T["default"].prototype.removeListener;var C={idAttribute:"id",parseAttrs:k["default"].identity,relations:{belongsTo:{},hasMany:{}},defaultValues:null,computed:{}},P=function(){function t(e,n){var r=this,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,x["default"])(this,t),this.options=k["default"].defaultsDeep({},o,C),this.idAttribute=this.options.idAttribute,this.name=n,this.store=e,this.entitiesById={},this.entitiesList=[],this.transientAttrsStore={},this.options.relations&&this.__initRelations(),this.__initTransientAttrs(),(0,w["default"])(this.options.computed,{$entityType:{enumerable:!0,get:function(){return n}},$entityClass:{enumerable:!1,get:function(){return r}}}),this.options.computed=k["default"].transform(this.options.computed,function(t,e,n){"function"==typeof e?t[n]={get:e,enumerable:!1}:t[n]=e},{}),this._computedKeys=(0,k["default"])(this.options.computed).keys().without("$entityType","$entityClass","$$transientAttrs").value(),this._writablePropertyKeys=(0,k["default"])(this.options.computed).toPairs().filter(function(t){return t[1].set}).map(k["default"].first).value(),this._relationKeys=(0,k["default"])(this.options.relations).values().map(k["default"].keys).flatten().value()}return(0,O["default"])(t,null,[{key:"create",value:function(t,e,n){return new this(t,e,n)}}]),(0,O["default"])(t,[{key:"__initRelations",value:function(){var t=this,e=k["default"].transform(this.options.relations.belongsTo,function(e,n,r){e[r]={get:function(){return t.store.get(n.type,this[n.foreignKey])},set:function(e){this[n.foreignKey]=t.store.resolveId(n.type,e)}}},{});(0,w["default"])(this.options.computed,e);var n=k["default"].transform(this.options.relations.hasMany,function(e,n,r){e[r]={get:function(){var e=this;if(this.$$transientAttrs.relations||(this.$$transientAttrs.relations={},this.$$transientAttrs.relationsCreated={}),this.$$transientAttrs.relations[r])return this.$$transientAttrs.relations[r];var o=t.store.getAll(n.type).filter(function(r){return r[n.foreignKey]==e[t.options.idAttribute]});return this.$$transientAttrs.relations[r]=o,this.$$transientAttrs.relationsCreated[r]=!0,o},set:function(t){}}},{});(0,w["default"])(this.options.computed,n)}},{key:"__initTransientAttrs",value:function(){var t=this,e=this,n={$$transientAttrs:{enumerable:!1,get:function(){var t=this[e.options.idAttribute];return e.transientAttrsStore[t]||(e.transientAttrsStore[t]={})}}},r={};this.options.transientAttrs&&this.options.transientAttrs.forEach(function(e){t.options.defaultValues&&e in t.options.defaultValues&&(r[e]=(0,M["default"])(t.options.defaultValues[e]),delete t.options.defaultValues[e]),n[e]={get:function(){return e in this.$$transientAttrs?this.$$transientAttrs[e]:e in r?this.$$transientAttrs[e]=r[e]:void 0},set:function(t){this.$$transientAttrs[e]=t}}}),(0,w["default"])(this.options.computed,n)}},{key:"createInstance",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=this;e&&(t=this.parseAttrs(t)),this.options.defaultValues&&k["default"].defaults(t,(0,M["default"])(this.options.defaultValues));var r={};return this._writablePropertyKeys.forEach(function(e){e in t&&(r[e]=t[e],delete t[e])}),(0,b["default"])(t,this.options.computed),(0,w["default"])(t,r),this.options.instanceEvents&&(0,w["default"])(t,T["default"].prototype),(0,w["default"])(t,{toPlainObject:function(t){var e=this,r={};n._computedKeys.forEach(function(t){return r[t]=e[t]});var o=(0,w["default"])({},this,r);return delete o.toPlainObject,delete o.setMaxListeners,delete o.emit,delete o.addListener,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.listeners,delete o.listenerCount,delete o.off,delete o.toPlainObject,delete o._events,delete o._maxListeners,o}}),this.options.beforeCreateInstance&&this.options.beforeCreateInstance(t),t}},{key:"inject",value:function(t){var e=void 0,n=!0,r=this.is(t);if(r){if(e=t,this.entitiesById[this.resolveId(e)])return this.options.beforeInject&&this.options.beforeInject(e),this.emit("beforeInject",this,e),this.options.afterInject&&this.options.afterInject(e),this.emit("afterInject",this,e),e;n=!1}n&&(t=this.parseAttrs(t));var o=this.resolveId(t);if(!this.isValidId(o))throw new Error("'"+this.options.idAttribute+"' is required");return(e=this.entitiesById[o])?(this.options.beforeInject&&this.options.beforeInject(t),this.emit("beforeInject",this,t),(0,w["default"])(e,t)):(e=r?t:this.createInstance(t,!1),this.options.beforeInject&&this.options.beforeInject(t),this.emit("beforeInject",this,t),this.entitiesById[o]=e,this.entitiesList.push(e)),this.__addToHasManyRelationships(e),this.options.afterInject&&this.options.afterInject(e),this.emit("afterInject",this,e),e}},{key:"eject",value:function(t){t=this.resolveId(t);var e=this.entitiesById[t];e&&(this.__removeFromHasManyRelationships(e),delete this.entitiesById[t],k["default"].pull(this.entitiesList,e),t in this.transientAttrsStore&&delete this.transientAttrsStore[t],this.emit("afterEject",this,e))}},{key:"__addToHasManyRelationships",value:function(t){this.__updateRelationsIfNeeded(t,"add")}},{key:"__removeFromHasManyRelationships",value:function(t){this.__updateRelationsIfNeeded(t,"remove")}},{key:"__updateRelationsIfNeeded",value:function(t,e){var n=this,r=this.store.getParentRelationshipsOfModel(this.name);r&&r.forEach(function(r){var o=n.store.get(r.parent,t[r.foreignKey]);o&&o.$$transientAttrs.relationsCreated&&o.$$transientAttrs.relationsCreated[r.relationKey]&&("add"==e?o[r.relationKey].includes(t)||o[r.relationKey].push(t):"remove"==e&&k["default"].pull(o[r.relationKey],t))})}},{key:"ejectAll",value:function(){var t=this;k["default"].eachRight(this.entitiesList,function(e){return t.eject(e)})}},{key:"parseAttrs",value:function(t){var e=this,n=k["default"].pickBy(t,function(t){return e.store.isEntity(t)||e.store.isEntityArray(t)}),r=k["default"].omit(t,k["default"].keys(n)),o=this.options.parseAttrs((0,M["default"])(r)),i=(0,g["default"])({},o,n);return i}},{key:"get",value:function(t){return this.entitiesById[t]}},{key:"getAll",value:function(){return this.entitiesList}},{key:"getMulti",value:function(t){return t.map(this.get.bind(this))}},{key:"resolveId",value:function(t){return this.isValidId(t)?t:t[this.options.idAttribute]}},{key:"isValidId",value:function(t){return"string"==typeof t||"number"==typeof t}},{key:"is",value:function(t){return t&&t.$entityClass==this}},{key:"find",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t){return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+i(t));case 2:if("string"==typeof t){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+o(t));case 4:throw new"not implemented find";case 5:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"refresh",value:function(){var t=(0,v["default"])(h["default"].mark(function e(t){return h["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t||t instanceof Object){e.next=2;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+i(t));case 2:if("string"==typeof t||t instanceof Object){e.next=4;break}throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring | Object\n\nGot:\n'+o(t));case 4:throw t=this.resolveId(t),new"not implemented refresh";case 6:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();(0,w["default"])(P.prototype,T["default"].prototype);var B=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,x["default"])(this,t),this.options=n,this.models={},this.__relationsOfHasManyByContainedItem={},["inject","get","getAll","filter","resolveId","is","find","refresh"].forEach(function(t){e[t]=function(n){for(var r,o=arguments.length,i=Array(o>1?o-1:0),a=1;o>a;a++)i[a-1]=arguments[a];return(r=e.models[n])[t].apply(r,i)}})}return(0,O["default"])(t,[{key:"defineModel",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(this.models[t])throw new Error(t+" already defined");n=(0,g["default"])({},this.options,n),this.models[t]=P.create(this,t,n);var r=this.models[t].options.relations.hasMany;return k["default"].isEmpty(r)||k["default"].each(r,function(n,r){e.__relationsOfHasManyByContainedItem[n.type]||(e.__relationsOfHasManyByContainedItem[n.type]=[]),e.__relationsOfHasManyByContainedItem[n.type].push((0,g["default"])({},n,{relationKey:r,parent:t}))}),this.models[t]}},{key:"getParentRelationshipsOfModel",value:function(t){return this.__relationsOfHasManyByContainedItem[t]}},{key:"isEntity",value:function(t){return t&&t.$entityClass&&t.$entityClass.constructor===P}},{key:"isEntityArray",value:function(t){return t&&Array.isArray(t)&&t.some(this.isEntity)}},{key:"clear",value:function(){(0,k["default"])(this.models).values().forEach(function(t){return t.ejectAll()})}}]),t}();e["default"]=B,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(539),__esModule:!0}},function(t,e,n){n(540);var r=n(324).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},function(t,e,n){var r=n(346);r(r.S+r.F*!n(354),"Object",{defineProperties:n(370)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(322),i=r(o),a=function(t){return JSON.parse((0,i["default"])(t))};e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={User:n(543),Group:n(545),Organization:n(546),Message:n(547),MessageStatusPerRecipient:n(548),Event:n(549),Conversation:n(550),SearchResult:n(551),Metadata:n(552)};e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n=t.defineModel("user",{transientAttrs:["presence"],replaceKeys:{avatar:"avatarUrl"},defaultValues:{presence:c["default"].UNKNOWN},computed:{metadataByOrganizationId:{enumerable:!0,get:function(){return(0,i["default"])(t.store.getAll("metadata")).filter({entityId:this.id}).keyBy("organizationId").mapValues("data").value()}}},parseAttrs:function(t){return t.presence&&(t.presence=c["default"].resolve(t.presence)||c["default"].UNKNOWN),t}});return(0,u["default"])(t,n,{before:function(t,e,n){},after:function(t,e){}}),n};var o=n(453),i=r(o),a=n(544),u=r(a),s=n(512),c=r(s);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){}function i(t,e,n){var r=n.before,i=n.after;if(null==arguments[2]||null!=arguments[2].before&&"function"!=typeof arguments[2].before||null!=arguments[2].after&&"function"!=typeof arguments[2].after)throw new TypeError("Value of argument 2 violates contract.\n\nExpected:\n{ before: ?Function;\n  after: ?Function;\n}\n\nGot:\n"+u(arguments[2]));if(null==arguments[2]||null!=arguments[2].before&&"function"!=typeof arguments[2].before||null!=arguments[2].after&&"function"!=typeof arguments[2].after)throw new TypeError("Value of argument 2 violates contract.\n\nExpected:\n{ before: ?Function;\n  after: ?Function;\n}\n\nGot:\n"+a(arguments[2]));t.ensureEntityOrCreateTemporaryAndFind||(t.ensureEntityOrCreateTemporaryAndFind=function(e,n){function r(){var n=this;if(t.host.config.enableEnsureEntityFindMissing&&!_[w(c)]){var r=function(){var r=(0,g["default"])(v["default"].mark(function a(){return v["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c.$temporary){n.next=3;break}return t.logger.info("entity "+e+":"+s+" was already updated elsewhere"),n.abrupt("return");case 3:return n.next=5,o();case 5:delete _[w(c)];case 6:case"end":return n.stop()}},a,n)})),i=n;return function(){return r.apply(i,arguments)}}(),o=function(){var t=(0,g["default"])(v["default"].mark(function r(){return v["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.finder(s,{bypassCache:!0});case 3:delete c.$temporary,u.after(c,i),i.onLoad(c),t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),t.next=12;break;case 12:i.onLoad(null);case 13:case"end":return t.stop()}},r,n,[[0,8]])})),e=n;return function(){return t.apply(e,arguments)}}();t.host.config.temporaryEntityDelayBeforeRefreshing?_[w(c)]=setTimeout(r,t.host.config.temporaryEntityDelayBeforeRefreshing):o()}}var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(t.host.config.enableEnsureEntityWithTemp||t.host.config.enableEnsureEntityFindMissing){if(i=b["default"].defaults(i,{onLoad:o,onExists:o,onMissing:o,onlyPlaceholder:!1}),!i.finder)throw new Error("finder is missing in ensureEntityOrCreateTemporaryAndFind call");var a=t.store.models[e],u=a.__addEnsureEntityOrCreateTemporaryAndFind__config,s=n[a.idAttribute],c=t.store.get(e,s);if(u.before(n,c,i),c)u.after(c,i),c.$temporary?i.onlyPlaceholder||r():i.onExists(c);else{if(i.onMissing(),c=t.store.inject(e,n),Object.defineProperty(c,"$temporary",{value:!0,configurable:!0}),i.onlyPlaceholder)return c;r()}return c}}),e.__addEnsureEntityOrCreateTemporaryAndFind__config={before:r||o,after:i||o},e.ensureEntityOrCreateTemporaryAndFind=function(n,r){return t.ensureEntityOrCreateTemporaryAndFind(e.name,n,r)}}function a(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,h["default"])(t);if(!Array.isArray(t)){var o=(0,l["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,c["default"])(n))+": "+a(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(u+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+u+"\n"+i+"}":"{\n  "+i+u+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=a(t[0],e);return t.every(function(t){return a(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return a(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,h["default"])(s))?s.v:void 0}function u(t,e){var n=4,r=15;if(void 0===e&&(e=0),e+=1,null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return"undefined"==typeof t?"undefined":(0,h["default"])(t);if(!Array.isArray(t)){var o=(0,l["default"])(t);if(!o.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(e>n)return"{...}";var i="  ".repeat(e-1),a=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:(0,c["default"])(n))+": "+u(t[n],e)+";"}).join("\n  "+i);return o.length>=r&&(a+="\n  "+i+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}if(!(t.length>0))return"Array";var s=function(){if(e>n)return{v:"[...]"};var o=u(t[0],e);return t.every(function(t){return u(t,e)===o})?{v:o.trim()+"[]"}:{v:"["+t.slice(0,r).map(function(t){return u(t,e)}).join(", ")+(t.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof s?"undefined":(0,h["default"])(s))?s.v:void 0}Object.defineProperty(e,"__esModule",{value:!0});var s=n(322),c=r(s),f=n(325),l=r(f),d=n(359),h=r(d),p=n(413),v=r(p),y=n(421),g=r(y);e["default"]=i;var m=n(453),b=r(m),_={},w=function(t){return t.$entityType+":"+t.id};t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){function n(n){var r;t.ensureEntityOrCreateTemporaryAndFind("user",{id:n,displayName:"Loading..."},{onlyPlaceholder:!0,finder:(r=e.host.users).find.bind(r)})}function r(t){t.memberIds&&t.memberIds.forEach(n)}function o(t){t&&t.forEach(n)}var u=t.defineModel("group",{replaceKeys:{organizationKey:"organizationId",members:"memberIds",avatar:"avatarUrl",displayName:"name",numMembers:"memberCount",createdTime:"createdAt"},defaultValues:{memberIds:[],memberCount:0,groupType:a.GroupType.GROUP},validate:function(){s["default"].notEmpty("groupType",this.groupType)},__extractGroupTypeFromAttrs:function(t){return"tigertext:entity:list"==(t.type||t.xmlns)?a.GroupType.DISTRIBUTION_LIST:t.isPublic?a.GroupType.ROOM:null},parseAttrs:function(t){var e=this.__extractGroupTypeFromAttrs(t);return e&&(t.groupType=e),t},beforeCreateInstance:function(t){o(t.memberIds)},afterInject:function(t){t.memberIds&&t.memberIds.length>0&&!t.memberCount&&(t.memberCount=t.memberIds.length)},computed:{metadata:{enumerable:!0,get:function(){var e=t.store.get("metadata",this.id+":"+this.organizationId);return e?e.data:null}},members:{enumerable:!0,get:function(){return this.memberIds.map(function(e){return t.store.get("user",e)})}},conversation:{enumerable:!0,get:function(){return e.host.conversations.get("group",this.id,this.organizationId)}},displayName:{configurable:!0,enumerable:!0,get:function(){return this.name}}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}});return(0,i["default"])(t,u,{before:function(t,e,n){e&&r(e)},after:function(t,e){r(t)}}),u};var o=n(544),i=r(o),a=n(504),u=n(514),s=r(u);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n=t.defineModel("organization",{instanceEvents:!0,replaceKeys:{members:"memberCount"},fields:{},transientAttrs:["conversations","unreadCount"],defaultValues:{conversations:[]}});return(0,a["default"])(t,n,{before:function(t,e,n){},after:function(t,e){}}),n};var o=n(453),i=(r(o),n(544)),a=r(i);t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.defineModel("message",{replaceKeys:{messageId:"id",clientId:"id",senderToken:"senderId",sender:"senderId",recipientToken:"recipientId",recipient:"recipientId",senderOrganization:"senderOrganizationId",recipientOrganization:"recipientOrganizationId",groupToken:"groupId",status:"recipientStatus",data:"metadata",createdTime:"createdAt"},defaultValues:{recipientStatus:r.MessageRecipientStatus.NEW,senderStatus:r.MessageRecipientStatus.NEW,sortNumber:0
},fields:{id:{type:"string"},senderStatus:{type:"enum","enum":r.MessageSenderStatus,require:!0},recipientStatus:{type:"enum","enum":r.MessageRecipientStatus,require:!0},direction:{type:"enum","enum":r.MessageDirection,require:!0},counterPartyId:{type:"string",require:!0},counterPartyType:{type:"enum",values:["user","group"],require:!0},createdAt:{type:Date,require:!0}},parseAttrs:function(t){if(t.recipientStatus&&(t.recipientStatus=r.MessageRecipientStatus.resolve(t.recipientStatus)),"attachmentName"in t){var e=t.attachmentName;delete t.attachmentName,Array.isArray(t.attachments)&&t.attachments.length>0&&e&&(t.attachments[0].name=e)}return Array.isArray(t.attachments)&&t.attachments.forEach(function(t,e){return t.id=""+(e+1)}),t},relations:{belongsTo:{sender:{type:"user",foreignKey:"senderId"},recipient:{type:"user",foreignKey:"recipientId"},senderOrganization:{type:"organization",foreignKey:"senderOrganizationId"},recipientOrganization:{type:"organization",foreignKey:"recipientOrganizationId"},group:{type:"group",foreignKey:"groupId"},conversation:{type:"conversation",foreignKey:"conversationId"}},hasMany:{statusesPerRecipient:{type:"messageStatusPerRecipient",foreignKey:"messageId"}}},computed:{counterParty:{enumerable:!0,get:function(){return this.counterPartyType&&this.counterPartyId?t.store.get(this.counterPartyType,this.counterPartyId):null},set:function(t){if(t){switch(t.$entityType){case"user":this.recipientId=t.id;break;case"group":this.groupId=t.id;break;default:throw new Error("unsupported counterPartyType '"+t.$entityType+"'")}this.counterPartyId=t.id,this.counterPartyType=t.$entityType}else this.counterPartyId=null,this.counterPartyType=null}}}});return e};var r=n(504);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.defineModel("messageStatusPerRecipient",{replaceKeys:{accountId:"userId",timestamp:"createdAt"},defaultValues:{status:i["default"].NEW},fields:{userId:{type:String,require:!0},messageId:{type:String,require:!0},recipientStatus:{type:"enum","enum":i["default"],require:!0},createdAt:{type:Date,require:!0}},parseAttrs:function(t){return t.status&&(t.status=i["default"].resolve(t.status)),t},relations:{belongsTo:{message:{type:"message",foreignKey:"messageId"},user:{type:"user",foreignKey:"userId"}}}});return e};var o=n(505),i=r(o);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(392),i=r(o),a=n(474),u=r(a),s=n(422),c=r(s),f=n(423),l=r(f);e["default"]=function(){return function(){function t(e,n,r,o){var a=this;(0,c["default"])(this,t),this.id=e,this.type=n,this.data=r,o&&!function(){var t=o._origData,e=(0,u["default"])(o,["_origData"]);Object.defineProperty(a,"_origData",{get:function(){return t}}),(0,i["default"])(a,e)}()}return(0,l["default"])(t,null,[{key:"is",value:function(t){return t instanceof this}}]),t}()},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=t.defineModel("conversation",{instanceEvents:!0,transientAttrs:["messages","lastMessage","unreadCount","unreadMessages","lastEventMessageSortNumber","_counterPartyAddedOnServer"],defaultValues:{lastEventMessageSortNumber:0,messages:[],unreadMessages:[],unreadCount:0},computed:{counterParty:{enumerable:!0,get:function(){return this.counterPartyType&&this.counterPartyId?t.store.get(this.counterPartyType,this.counterPartyId):null},set:function(t){if(t)switch(console.log("set newCounterParty",t),t.$entityType){case"user":case"group":this.counterPartyId=t.id,this.counterPartyType=t.$entityType;break;default:throw new Error("unsupported counterPartyType '"+t.$entityType+"'")}else this.counterPartyId=null,this.counterPartyType=null}}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}}});return e};var o=n(453),i=(r(o),n(505));r(i),t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(422),i=r(o),a=n(423),u=r(a);e["default"]=function(){return function(){function t(e,n){(0,i["default"])(this,t),this.id="searchResult:"+n+":"+e.id,this.entityType=e.$entityType,this.entityId=e.id,this.entity=e,this.organizationId=n}return(0,u["default"])(t,null,[{key:"is",value:function(t){return t instanceof this}}]),t}()},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n=t.defineModel("metadata",{fields:{entityType:{type:"string",required:!0},entityId:{type:"string",required:!0},organizationId:{type:"string",required:!0}},relations:{belongsTo:{organization:{type:"organization",foreignKey:"organizationId"}}},parseAttrs:function(t,e){return t.data=e.data,t}});return n},t.exports=e["default"]},function(t,e,n){"use strict";var r=function(t,e,n,r,o,i,a,u){if(!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,u],f=0;s=new Error(e.replace(/%s/g,function(){return c[f++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(392),i=r(o),a=n(325),u=r(a);e["default"]=function(t){function e(e,n){return t.includes(e,n)||e.push(n),e}t.__tigerconnectJsUtilsEnhanced||(t.__tigerconnectJsUtilsEnhanced=!0,t.mixin({arrayWrap:function(t){return Array.isArray(t)?t:void 0!=t&&null!=t?[t]:[]},eachWithObject:function(e,n,r){return Array.isArray(e)?e.forEach(function(t,o){return n(t,r,o,e)}):t.each(e,function(t,o,i){return n(t,o,r,i,e)}),r},contain:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];return r.forEach(function(n){return e(t,n)}),t},count:function(e){var n=arguments.length<=1||void 0===arguments[1]?t.identity:arguments[1];return e.reduce(function(t,e){return t+(n(e)?1:0)},0)},replaceKey:function(t,e,n){!(n in t)&&e in t&&(t[n]=t[e],delete t[e])},replaceObject:function(e,n){var r=(0,u["default"])(e),o=(0,u["default"])(n),a=t.difference(r,o);(0,i["default"])(e,n),a.forEach(function(t){return delete e[t]})}}))},t.exports=e["default"]}]);